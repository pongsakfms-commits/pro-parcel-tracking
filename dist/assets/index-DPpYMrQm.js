(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var Pv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function LT(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),n}var Av={exports:{}},ih={},Cv={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Al=Symbol.for("react.element"),OT=Symbol.for("react.portal"),NT=Symbol.for("react.fragment"),MT=Symbol.for("react.strict_mode"),DT=Symbol.for("react.profiler"),bT=Symbol.for("react.provider"),VT=Symbol.for("react.context"),zT=Symbol.for("react.forward_ref"),FT=Symbol.for("react.suspense"),UT=Symbol.for("react.memo"),BT=Symbol.for("react.lazy"),e_=Symbol.iterator;function jT(t){return t===null||typeof t!="object"?null:(t=e_&&t[e_]||t["@@iterator"],typeof t=="function"?t:null)}var kv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rv=Object.assign,xv={};function Lo(t,e,n){this.props=t,this.context=e,this.refs=xv,this.updater=n||kv}Lo.prototype.isReactComponent={};Lo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Lo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Lv(){}Lv.prototype=Lo.prototype;function Zf(t,e,n){this.props=t,this.context=e,this.refs=xv,this.updater=n||kv}var $f=Zf.prototype=new Lv;$f.constructor=Zf;Rv($f,Lo.prototype);$f.isPureReactComponent=!0;var t_=Array.isArray,Ov=Object.prototype.hasOwnProperty,Gf={current:null},Nv={key:!0,ref:!0,__self:!0,__source:!0};function Mv(t,e,n){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)Ov.call(e,i)&&!Nv.hasOwnProperty(i)&&(s[i]=e[i]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var d=Array(h),_=0;_<h;_++)d[_]=arguments[_+2];s.children=d}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)s[i]===void 0&&(s[i]=h[i]);return{$$typeof:Al,type:t,key:o,ref:l,props:s,_owner:Gf.current}}function HT(t,e){return{$$typeof:Al,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Kf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Al}function WT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var n_=/\/+/g;function jh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?WT(""+t.key):e.toString(36)}function Gu(t,e,n,i,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Al:case OT:l=!0}}if(l)return l=t,s=s(l),t=i===""?"."+jh(l,0):i,t_(s)?(n="",t!=null&&(n=t.replace(n_,"$&/")+"/"),Gu(s,e,n,"",function(_){return _})):s!=null&&(Kf(s)&&(s=HT(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(n_,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=i===""?".":i+":",t_(t))for(var h=0;h<t.length;h++){o=t[h];var d=i+jh(o,h);l+=Gu(o,e,n,d,s)}else if(d=jT(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=i+jh(o,h++),l+=Gu(o,e,n,d,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Au(t,e,n){if(t==null)return t;var i=[],s=0;return Gu(t,i,"","",function(o){return e.call(n,o,s++)}),i}function qT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bt={current:null},Ku={transition:null},ZT={ReactCurrentDispatcher:Bt,ReactCurrentBatchConfig:Ku,ReactCurrentOwner:Gf};function Dv(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:Au,forEach:function(t,e,n){Au(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Au(t,function(){e++}),e},toArray:function(t){return Au(t,function(e){return e})||[]},only:function(t){if(!Kf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=Lo;Te.Fragment=NT;Te.Profiler=DT;Te.PureComponent=Zf;Te.StrictMode=MT;Te.Suspense=FT;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZT;Te.act=Dv;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Rv({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=Gf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)Ov.call(e,d)&&!Nv.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){h=Array(d);for(var _=0;_<d;_++)h[_]=arguments[_+2];i.children=h}return{$$typeof:Al,type:t.type,key:s,ref:o,props:i,_owner:l}};Te.createContext=function(t){return t={$$typeof:VT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bT,_context:t},t.Consumer=t};Te.createElement=Mv;Te.createFactory=function(t){var e=Mv.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:zT,render:t}};Te.isValidElement=Kf;Te.lazy=function(t){return{$$typeof:BT,_payload:{_status:-1,_result:t},_init:qT}};Te.memo=function(t,e){return{$$typeof:UT,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=Ku.transition;Ku.transition={};try{t()}finally{Ku.transition=e}};Te.unstable_act=Dv;Te.useCallback=function(t,e){return Bt.current.useCallback(t,e)};Te.useContext=function(t){return Bt.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return Bt.current.useDeferredValue(t)};Te.useEffect=function(t,e){return Bt.current.useEffect(t,e)};Te.useId=function(){return Bt.current.useId()};Te.useImperativeHandle=function(t,e,n){return Bt.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return Bt.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return Bt.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return Bt.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return Bt.current.useReducer(t,e,n)};Te.useRef=function(t){return Bt.current.useRef(t)};Te.useState=function(t){return Bt.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return Bt.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return Bt.current.useTransition()};Te.version="18.3.1";Cv.exports=Te;var we=Cv.exports;const mc=Sv(we);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $T=we,GT=Symbol.for("react.element"),KT=Symbol.for("react.fragment"),QT=Object.prototype.hasOwnProperty,YT=$T.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XT={key:!0,ref:!0,__self:!0,__source:!0};function bv(t,e,n){var i,s={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)QT.call(e,i)&&!XT.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:GT,type:t,key:o,ref:l,props:s,_owner:YT.current}}ih.Fragment=KT;ih.jsx=bv;ih.jsxs=bv;Av.exports=ih;var ie=Av.exports,Ad={},Vv={exports:{}},sn={},zv={exports:{}},Fv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,le){var Q=H.length;H.push(le);e:for(;0<Q;){var ue=Q-1>>>1,ge=H[ue];if(0<s(ge,le))H[ue]=le,H[Q]=ge,Q=ue;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var le=H[0],Q=H.pop();if(Q!==le){H[0]=Q;e:for(var ue=0,ge=H.length,Ie=ge>>>1;ue<Ie;){var Le=2*(ue+1)-1,ve=H[Le],fe=Le+1,ut=H[fe];if(0>s(ve,Q))fe<ge&&0>s(ut,ve)?(H[ue]=ut,H[fe]=Q,ue=fe):(H[ue]=ve,H[Le]=Q,ue=Le);else if(fe<ge&&0>s(ut,Q))H[ue]=ut,H[fe]=Q,ue=fe;else break e}}return le}function s(H,le){var Q=H.sortIndex-le.sortIndex;return Q!==0?Q:H.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],_=[],v=1,w=null,I=3,N=!1,b=!1,z=!1,W=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(H){for(var le=n(_);le!==null;){if(le.callback===null)i(_);else if(le.startTime<=H)i(_),le.sortIndex=le.expirationTime,e(d,le);else break;le=n(_)}}function j(H){if(z=!1,O(H),!b)if(n(d)!==null)b=!0,lt(K);else{var le=n(_);le!==null&&bt(j,le.startTime-H)}}function K(H,le){b=!1,z&&(z=!1,x(T),T=-1),N=!0;var Q=I;try{for(O(le),w=n(d);w!==null&&(!(w.expirationTime>le)||H&&!M());){var ue=w.callback;if(typeof ue=="function"){w.callback=null,I=w.priorityLevel;var ge=ue(w.expirationTime<=le);le=t.unstable_now(),typeof ge=="function"?w.callback=ge:w===n(d)&&i(d),O(le)}else i(d);w=n(d)}if(w!==null)var Ie=!0;else{var Le=n(_);Le!==null&&bt(j,Le.startTime-le),Ie=!1}return Ie}finally{w=null,I=Q,N=!1}}var Y=!1,A=null,T=-1,S=5,k=-1;function M(){return!(t.unstable_now()-k<S)}function D(){if(A!==null){var H=t.unstable_now();k=H;var le=!0;try{le=A(!0,H)}finally{le?R():(Y=!1,A=null)}}else Y=!1}var R;if(typeof P=="function")R=function(){P(D)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,Xn=Qe.port2;Qe.port1.onmessage=D,R=function(){Xn.postMessage(null)}}else R=function(){W(D,0)};function lt(H){A=H,Y||(Y=!0,R())}function bt(H,le){T=W(function(){H(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){b||N||(b=!0,lt(K))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return I},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(H){switch(I){case 1:case 2:case 3:var le=3;break;default:le=I}var Q=I;I=le;try{return H()}finally{I=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,le){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Q=I;I=H;try{return le()}finally{I=Q}},t.unstable_scheduleCallback=function(H,le,Q){var ue=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ue+Q:ue):Q=ue,H){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=Q+ge,H={id:v++,callback:le,priorityLevel:H,startTime:Q,expirationTime:ge,sortIndex:-1},Q>ue?(H.sortIndex=Q,e(_,H),n(d)===null&&H===n(_)&&(z?(x(T),T=-1):z=!0,bt(j,Q-ue))):(H.sortIndex=ge,e(d,H),b||N||(b=!0,lt(K))),H},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(H){var le=I;return function(){var Q=I;I=le;try{return H.apply(this,arguments)}finally{I=Q}}}})(Fv);zv.exports=Fv;var JT=zv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eI=we,rn=JT;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Uv=new Set,Ja={};function os(t,e){mo(t,e),mo(t+"Capture",e)}function mo(t,e){for(Ja[t]=e,t=0;t<e.length;t++)Uv.add(e[t])}var Ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cd=Object.prototype.hasOwnProperty,tI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,i_={},r_={};function nI(t){return Cd.call(r_,t)?!0:Cd.call(i_,t)?!1:tI.test(t)?r_[t]=!0:(i_[t]=!0,!1)}function iI(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function rI(t,e,n,i){if(e===null||typeof e>"u"||iI(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function jt(t,e,n,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var At={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){At[t]=new jt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];At[e]=new jt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){At[t]=new jt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){At[t]=new jt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){At[t]=new jt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){At[t]=new jt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){At[t]=new jt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){At[t]=new jt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){At[t]=new jt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qf=/[\-:]([a-z])/g;function Yf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qf,Yf);At[e]=new jt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qf,Yf);At[e]=new jt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qf,Yf);At[e]=new jt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){At[t]=new jt(t,1,!1,t.toLowerCase(),null,!1,!1)});At.xlinkHref=new jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){At[t]=new jt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xf(t,e,n,i){var s=At.hasOwnProperty(e)?At[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rI(e,n,s,i)&&(n=null),i||s===null?nI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var xi=eI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cu=Symbol.for("react.element"),qs=Symbol.for("react.portal"),Zs=Symbol.for("react.fragment"),Jf=Symbol.for("react.strict_mode"),kd=Symbol.for("react.profiler"),Bv=Symbol.for("react.provider"),jv=Symbol.for("react.context"),ep=Symbol.for("react.forward_ref"),Rd=Symbol.for("react.suspense"),xd=Symbol.for("react.suspense_list"),tp=Symbol.for("react.memo"),qi=Symbol.for("react.lazy"),Hv=Symbol.for("react.offscreen"),s_=Symbol.iterator;function Ta(t){return t===null||typeof t!="object"?null:(t=s_&&t[s_]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,Hh;function La(t){if(Hh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Hh=e&&e[1]||""}return`
`+Hh+t}var Wh=!1;function qh(t,e){if(!t||Wh)return"";Wh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(_){var i=_}Reflect.construct(t,[],e)}else{try{e.call()}catch(_){i=_}t.call(e.prototype)}else{try{throw Error()}catch(_){i=_}t()}}catch(_){if(_&&i&&typeof _.stack=="string"){for(var s=_.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,h=o.length-1;1<=l&&0<=h&&s[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==o[h]){var d=`
`+s[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{Wh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?La(t):""}function sI(t){switch(t.tag){case 5:return La(t.type);case 16:return La("Lazy");case 13:return La("Suspense");case 19:return La("SuspenseList");case 0:case 2:case 15:return t=qh(t.type,!1),t;case 11:return t=qh(t.type.render,!1),t;case 1:return t=qh(t.type,!0),t;default:return""}}function Ld(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zs:return"Fragment";case qs:return"Portal";case kd:return"Profiler";case Jf:return"StrictMode";case Rd:return"Suspense";case xd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case jv:return(t.displayName||"Context")+".Consumer";case Bv:return(t._context.displayName||"Context")+".Provider";case ep:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tp:return e=t.displayName||null,e!==null?e:Ld(t.type)||"Memo";case qi:e=t._payload,t=t._init;try{return Ld(t(e))}catch{}}return null}function oI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ld(e);case 8:return e===Jf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aI(t){var e=Wv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ku(t){t._valueTracker||(t._valueTracker=aI(t))}function qv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Wv(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function _c(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Od(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function o_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=mr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Zv(t,e){e=e.checked,e!=null&&Xf(t,"checked",e,!1)}function Nd(t,e){Zv(t,e);var n=mr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Md(t,e.type,n):e.hasOwnProperty("defaultValue")&&Md(t,e.type,mr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function a_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Md(t,e,n){(e!=="number"||_c(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Oa=Array.isArray;function ro(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+mr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Dd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function l_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(Oa(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:mr(n)}}function $v(t,e){var n=mr(e.value),i=mr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function u_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Gv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Gv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ru,Kv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ru=Ru||document.createElement("div"),Ru.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ru.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function el(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lI=["Webkit","ms","Moz","O"];Object.keys(Fa).forEach(function(t){lI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fa[e]=Fa[t]})});function Qv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fa.hasOwnProperty(t)&&Fa[t]?(""+e).trim():e+"px"}function Yv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=Qv(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var uI=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vd(t,e){if(e){if(uI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function zd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fd=null;function np(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ud=null,so=null,oo=null;function c_(t){if(t=Rl(t)){if(typeof Ud!="function")throw Error(G(280));var e=t.stateNode;e&&(e=lh(e),Ud(t.stateNode,t.type,e))}}function Xv(t){so?oo?oo.push(t):oo=[t]:so=t}function Jv(){if(so){var t=so,e=oo;if(oo=so=null,c_(t),e)for(t=0;t<e.length;t++)c_(e[t])}}function ey(t,e){return t(e)}function ty(){}var Zh=!1;function ny(t,e,n){if(Zh)return t(e,n);Zh=!0;try{return ey(t,e,n)}finally{Zh=!1,(so!==null||oo!==null)&&(ty(),Jv())}}function tl(t,e){var n=t.stateNode;if(n===null)return null;var i=lh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var Bd=!1;if(Ei)try{var Ia={};Object.defineProperty(Ia,"passive",{get:function(){Bd=!0}}),window.addEventListener("test",Ia,Ia),window.removeEventListener("test",Ia,Ia)}catch{Bd=!1}function cI(t,e,n,i,s,o,l,h,d){var _=Array.prototype.slice.call(arguments,3);try{e.apply(n,_)}catch(v){this.onError(v)}}var Ua=!1,gc=null,vc=!1,jd=null,hI={onError:function(t){Ua=!0,gc=t}};function dI(t,e,n,i,s,o,l,h,d){Ua=!1,gc=null,cI.apply(hI,arguments)}function fI(t,e,n,i,s,o,l,h,d){if(dI.apply(this,arguments),Ua){if(Ua){var _=gc;Ua=!1,gc=null}else throw Error(G(198));vc||(vc=!0,jd=_)}}function as(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function iy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function h_(t){if(as(t)!==t)throw Error(G(188))}function pI(t){var e=t.alternate;if(!e){if(e=as(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return h_(s),t;if(o===i)return h_(s),e;o=o.sibling}throw Error(G(188))}if(n.return!==i.return)n=s,i=o;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,i=o;break}if(h===i){l=!0,i=s,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=s;break}if(h===i){l=!0,i=o,n=s;break}h=h.sibling}if(!l)throw Error(G(189))}}if(n.alternate!==i)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function ry(t){return t=pI(t),t!==null?sy(t):null}function sy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=sy(t);if(e!==null)return e;t=t.sibling}return null}var oy=rn.unstable_scheduleCallback,d_=rn.unstable_cancelCallback,mI=rn.unstable_shouldYield,_I=rn.unstable_requestPaint,nt=rn.unstable_now,gI=rn.unstable_getCurrentPriorityLevel,ip=rn.unstable_ImmediatePriority,ay=rn.unstable_UserBlockingPriority,yc=rn.unstable_NormalPriority,vI=rn.unstable_LowPriority,ly=rn.unstable_IdlePriority,rh=null,Wn=null;function yI(t){if(Wn&&typeof Wn.onCommitFiberRoot=="function")try{Wn.onCommitFiberRoot(rh,t,void 0,(t.current.flags&128)===128)}catch{}}var On=Math.clz32?Math.clz32:TI,wI=Math.log,EI=Math.LN2;function TI(t){return t>>>=0,t===0?32:31-(wI(t)/EI|0)|0}var xu=64,Lu=4194304;function Na(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?i=Na(h):(o&=l,o!==0&&(i=Na(o)))}else l=n&~s,l!==0?i=Na(l):o!==0&&(i=Na(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-On(e),s=1<<n,i|=t[n],e&=~s;return i}function II(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PI(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-On(o),h=1<<l,d=s[l];d===-1?(!(h&n)||h&i)&&(s[l]=II(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function Hd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function uy(){var t=xu;return xu<<=1,!(xu&4194240)&&(xu=64),t}function $h(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Cl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-On(e),t[e]=n}function SI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-On(n),o=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~o}}function rp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-On(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var Ne=0;function cy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hy,sp,dy,fy,py,Wd=!1,Ou=[],nr=null,ir=null,rr=null,nl=new Map,il=new Map,$i=[],AI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function f_(t,e){switch(t){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":nl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":il.delete(e.pointerId)}}function Pa(t,e,n,i,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=Rl(e),e!==null&&sp(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function CI(t,e,n,i,s){switch(e){case"focusin":return nr=Pa(nr,t,e,n,i,s),!0;case"dragenter":return ir=Pa(ir,t,e,n,i,s),!0;case"mouseover":return rr=Pa(rr,t,e,n,i,s),!0;case"pointerover":var o=s.pointerId;return nl.set(o,Pa(nl.get(o)||null,t,e,n,i,s)),!0;case"gotpointercapture":return o=s.pointerId,il.set(o,Pa(il.get(o)||null,t,e,n,i,s)),!0}return!1}function my(t){var e=Br(t.target);if(e!==null){var n=as(e);if(n!==null){if(e=n.tag,e===13){if(e=iy(n),e!==null){t.blockedOn=e,py(t.priority,function(){dy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Fd=i,n.target.dispatchEvent(i),Fd=null}else return e=Rl(n),e!==null&&sp(e),t.blockedOn=n,!1;e.shift()}return!0}function p_(t,e,n){Qu(t)&&n.delete(e)}function kI(){Wd=!1,nr!==null&&Qu(nr)&&(nr=null),ir!==null&&Qu(ir)&&(ir=null),rr!==null&&Qu(rr)&&(rr=null),nl.forEach(p_),il.forEach(p_)}function Sa(t,e){t.blockedOn===e&&(t.blockedOn=null,Wd||(Wd=!0,rn.unstable_scheduleCallback(rn.unstable_NormalPriority,kI)))}function rl(t){function e(s){return Sa(s,t)}if(0<Ou.length){Sa(Ou[0],t);for(var n=1;n<Ou.length;n++){var i=Ou[n];i.blockedOn===t&&(i.blockedOn=null)}}for(nr!==null&&Sa(nr,t),ir!==null&&Sa(ir,t),rr!==null&&Sa(rr,t),nl.forEach(e),il.forEach(e),n=0;n<$i.length;n++)i=$i[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<$i.length&&(n=$i[0],n.blockedOn===null);)my(n),n.blockedOn===null&&$i.shift()}var ao=xi.ReactCurrentBatchConfig,Ec=!0;function RI(t,e,n,i){var s=Ne,o=ao.transition;ao.transition=null;try{Ne=1,op(t,e,n,i)}finally{Ne=s,ao.transition=o}}function xI(t,e,n,i){var s=Ne,o=ao.transition;ao.transition=null;try{Ne=4,op(t,e,n,i)}finally{Ne=s,ao.transition=o}}function op(t,e,n,i){if(Ec){var s=qd(t,e,n,i);if(s===null)id(t,e,i,Tc,n),f_(t,i);else if(CI(s,t,e,n,i))i.stopPropagation();else if(f_(t,i),e&4&&-1<AI.indexOf(t)){for(;s!==null;){var o=Rl(s);if(o!==null&&hy(o),o=qd(t,e,n,i),o===null&&id(t,e,i,Tc,n),o===s)break;s=o}s!==null&&i.stopPropagation()}else id(t,e,i,null,n)}}var Tc=null;function qd(t,e,n,i){if(Tc=null,t=np(i),t=Br(t),t!==null)if(e=as(t),e===null)t=null;else if(n=e.tag,n===13){if(t=iy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Tc=t,null}function _y(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gI()){case ip:return 1;case ay:return 4;case yc:case vI:return 16;case ly:return 536870912;default:return 16}default:return 16}}var Xi=null,ap=null,Yu=null;function gy(){if(Yu)return Yu;var t,e=ap,n=e.length,i,s="value"in Xi?Xi.value:Xi.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===s[o-i];i++);return Yu=s.slice(t,1<i?1-i:void 0)}function Xu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Nu(){return!0}function m_(){return!1}function on(t){function e(n,i,s,o,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Nu:m_,this.isPropagationStopped=m_,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nu)},persist:function(){},isPersistent:Nu}),e}var Oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lp=on(Oo),kl=Ge({},Oo,{view:0,detail:0}),LI=on(kl),Gh,Kh,Aa,sh=Ge({},kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:up,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Aa&&(Aa&&t.type==="mousemove"?(Gh=t.screenX-Aa.screenX,Kh=t.screenY-Aa.screenY):Kh=Gh=0,Aa=t),Gh)},movementY:function(t){return"movementY"in t?t.movementY:Kh}}),__=on(sh),OI=Ge({},sh,{dataTransfer:0}),NI=on(OI),MI=Ge({},kl,{relatedTarget:0}),Qh=on(MI),DI=Ge({},Oo,{animationName:0,elapsedTime:0,pseudoElement:0}),bI=on(DI),VI=Ge({},Oo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zI=on(VI),FI=Ge({},Oo,{data:0}),g_=on(FI),UI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jI[t])?!!e[t]:!1}function up(){return HI}var WI=Ge({},kl,{key:function(t){if(t.key){var e=UI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?BI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:up,charCode:function(t){return t.type==="keypress"?Xu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qI=on(WI),ZI=Ge({},sh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v_=on(ZI),$I=Ge({},kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:up}),GI=on($I),KI=Ge({},Oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),QI=on(KI),YI=Ge({},sh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),XI=on(YI),JI=[9,13,27,32],cp=Ei&&"CompositionEvent"in window,Ba=null;Ei&&"documentMode"in document&&(Ba=document.documentMode);var eP=Ei&&"TextEvent"in window&&!Ba,vy=Ei&&(!cp||Ba&&8<Ba&&11>=Ba),y_=" ",w_=!1;function yy(t,e){switch(t){case"keyup":return JI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $s=!1;function tP(t,e){switch(t){case"compositionend":return wy(e);case"keypress":return e.which!==32?null:(w_=!0,y_);case"textInput":return t=e.data,t===y_&&w_?null:t;default:return null}}function nP(t,e){if($s)return t==="compositionend"||!cp&&yy(t,e)?(t=gy(),Yu=ap=Xi=null,$s=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vy&&e.locale!=="ko"?null:e.data;default:return null}}var iP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function E_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!iP[t.type]:e==="textarea"}function Ey(t,e,n,i){Xv(i),e=Ic(e,"onChange"),0<e.length&&(n=new lp("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var ja=null,sl=null;function rP(t){Oy(t,0)}function oh(t){var e=Qs(t);if(qv(e))return t}function sP(t,e){if(t==="change")return e}var Ty=!1;if(Ei){var Yh;if(Ei){var Xh="oninput"in document;if(!Xh){var T_=document.createElement("div");T_.setAttribute("oninput","return;"),Xh=typeof T_.oninput=="function"}Yh=Xh}else Yh=!1;Ty=Yh&&(!document.documentMode||9<document.documentMode)}function I_(){ja&&(ja.detachEvent("onpropertychange",Iy),sl=ja=null)}function Iy(t){if(t.propertyName==="value"&&oh(sl)){var e=[];Ey(e,sl,t,np(t)),ny(rP,e)}}function oP(t,e,n){t==="focusin"?(I_(),ja=e,sl=n,ja.attachEvent("onpropertychange",Iy)):t==="focusout"&&I_()}function aP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return oh(sl)}function lP(t,e){if(t==="click")return oh(e)}function uP(t,e){if(t==="input"||t==="change")return oh(e)}function cP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mn=typeof Object.is=="function"?Object.is:cP;function ol(t,e){if(Mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Cd.call(e,s)||!Mn(t[s],e[s]))return!1}return!0}function P_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function S_(t,e){var n=P_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=P_(n)}}function Py(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Py(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Sy(){for(var t=window,e=_c();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_c(t.document)}return e}function hp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hP(t){var e=Sy(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Py(n.ownerDocument.documentElement,n)){if(i!==null&&hp(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!t.extend&&o>i&&(s=i,i=o,o=s),s=S_(n,o);var l=S_(n,i);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dP=Ei&&"documentMode"in document&&11>=document.documentMode,Gs=null,Zd=null,Ha=null,$d=!1;function A_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$d||Gs==null||Gs!==_c(i)||(i=Gs,"selectionStart"in i&&hp(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ha&&ol(Ha,i)||(Ha=i,i=Ic(Zd,"onSelect"),0<i.length&&(e=new lp("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Gs)))}function Mu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ks={animationend:Mu("Animation","AnimationEnd"),animationiteration:Mu("Animation","AnimationIteration"),animationstart:Mu("Animation","AnimationStart"),transitionend:Mu("Transition","TransitionEnd")},Jh={},Ay={};Ei&&(Ay=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function ah(t){if(Jh[t])return Jh[t];if(!Ks[t])return t;var e=Ks[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ay)return Jh[t]=e[n];return t}var Cy=ah("animationend"),ky=ah("animationiteration"),Ry=ah("animationstart"),xy=ah("transitionend"),Ly=new Map,C_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(t,e){Ly.set(t,e),os(e,[t])}for(var ed=0;ed<C_.length;ed++){var td=C_[ed],fP=td.toLowerCase(),pP=td[0].toUpperCase()+td.slice(1);wr(fP,"on"+pP)}wr(Cy,"onAnimationEnd");wr(ky,"onAnimationIteration");wr(Ry,"onAnimationStart");wr("dblclick","onDoubleClick");wr("focusin","onFocus");wr("focusout","onBlur");wr(xy,"onTransitionEnd");mo("onMouseEnter",["mouseout","mouseover"]);mo("onMouseLeave",["mouseout","mouseover"]);mo("onPointerEnter",["pointerout","pointerover"]);mo("onPointerLeave",["pointerout","pointerover"]);os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));os("onBeforeInput",["compositionend","keypress","textInput","paste"]);os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ma));function k_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,fI(i,e,void 0,t),t.currentTarget=null}function Oy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],d=h.instance,_=h.currentTarget;if(h=h.listener,d!==o&&s.isPropagationStopped())break e;k_(s,h,_),o=d}else for(l=0;l<i.length;l++){if(h=i[l],d=h.instance,_=h.currentTarget,h=h.listener,d!==o&&s.isPropagationStopped())break e;k_(s,h,_),o=d}}}if(vc)throw t=jd,vc=!1,jd=null,t}function Fe(t,e){var n=e[Xd];n===void 0&&(n=e[Xd]=new Set);var i=t+"__bubble";n.has(i)||(Ny(e,t,2,!1),n.add(i))}function nd(t,e,n){var i=0;e&&(i|=4),Ny(n,t,i,e)}var Du="_reactListening"+Math.random().toString(36).slice(2);function al(t){if(!t[Du]){t[Du]=!0,Uv.forEach(function(n){n!=="selectionchange"&&(mP.has(n)||nd(n,!1,t),nd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Du]||(e[Du]=!0,nd("selectionchange",!1,e))}}function Ny(t,e,n,i){switch(_y(e)){case 1:var s=RI;break;case 4:s=xI;break;default:s=op}n=s.bind(null,e,n,t),s=void 0,!Bd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function id(t,e,n,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;h!==null;){if(l=Br(h),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}h=h.parentNode}}i=i.return}ny(function(){var _=o,v=np(n),w=[];e:{var I=Ly.get(t);if(I!==void 0){var N=lp,b=t;switch(t){case"keypress":if(Xu(n)===0)break e;case"keydown":case"keyup":N=qI;break;case"focusin":b="focus",N=Qh;break;case"focusout":b="blur",N=Qh;break;case"beforeblur":case"afterblur":N=Qh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=__;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=NI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=GI;break;case Cy:case ky:case Ry:N=bI;break;case xy:N=QI;break;case"scroll":N=LI;break;case"wheel":N=XI;break;case"copy":case"cut":case"paste":N=zI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=v_}var z=(e&4)!==0,W=!z&&t==="scroll",x=z?I!==null?I+"Capture":null:I;z=[];for(var P=_,O;P!==null;){O=P;var j=O.stateNode;if(O.tag===5&&j!==null&&(O=j,x!==null&&(j=tl(P,x),j!=null&&z.push(ll(P,j,O)))),W)break;P=P.return}0<z.length&&(I=new N(I,b,null,n,v),w.push({event:I,listeners:z}))}}if(!(e&7)){e:{if(I=t==="mouseover"||t==="pointerover",N=t==="mouseout"||t==="pointerout",I&&n!==Fd&&(b=n.relatedTarget||n.fromElement)&&(Br(b)||b[Ti]))break e;if((N||I)&&(I=v.window===v?v:(I=v.ownerDocument)?I.defaultView||I.parentWindow:window,N?(b=n.relatedTarget||n.toElement,N=_,b=b?Br(b):null,b!==null&&(W=as(b),b!==W||b.tag!==5&&b.tag!==6)&&(b=null)):(N=null,b=_),N!==b)){if(z=__,j="onMouseLeave",x="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(z=v_,j="onPointerLeave",x="onPointerEnter",P="pointer"),W=N==null?I:Qs(N),O=b==null?I:Qs(b),I=new z(j,P+"leave",N,n,v),I.target=W,I.relatedTarget=O,j=null,Br(v)===_&&(z=new z(x,P+"enter",b,n,v),z.target=O,z.relatedTarget=W,j=z),W=j,N&&b)t:{for(z=N,x=b,P=0,O=z;O;O=Bs(O))P++;for(O=0,j=x;j;j=Bs(j))O++;for(;0<P-O;)z=Bs(z),P--;for(;0<O-P;)x=Bs(x),O--;for(;P--;){if(z===x||x!==null&&z===x.alternate)break t;z=Bs(z),x=Bs(x)}z=null}else z=null;N!==null&&R_(w,I,N,z,!1),b!==null&&W!==null&&R_(w,W,b,z,!0)}}e:{if(I=_?Qs(_):window,N=I.nodeName&&I.nodeName.toLowerCase(),N==="select"||N==="input"&&I.type==="file")var K=sP;else if(E_(I))if(Ty)K=uP;else{K=aP;var Y=oP}else(N=I.nodeName)&&N.toLowerCase()==="input"&&(I.type==="checkbox"||I.type==="radio")&&(K=lP);if(K&&(K=K(t,_))){Ey(w,K,n,v);break e}Y&&Y(t,I,_),t==="focusout"&&(Y=I._wrapperState)&&Y.controlled&&I.type==="number"&&Md(I,"number",I.value)}switch(Y=_?Qs(_):window,t){case"focusin":(E_(Y)||Y.contentEditable==="true")&&(Gs=Y,Zd=_,Ha=null);break;case"focusout":Ha=Zd=Gs=null;break;case"mousedown":$d=!0;break;case"contextmenu":case"mouseup":case"dragend":$d=!1,A_(w,n,v);break;case"selectionchange":if(dP)break;case"keydown":case"keyup":A_(w,n,v)}var A;if(cp)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else $s?yy(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(vy&&n.locale!=="ko"&&($s||T!=="onCompositionStart"?T==="onCompositionEnd"&&$s&&(A=gy()):(Xi=v,ap="value"in Xi?Xi.value:Xi.textContent,$s=!0)),Y=Ic(_,T),0<Y.length&&(T=new g_(T,t,null,n,v),w.push({event:T,listeners:Y}),A?T.data=A:(A=wy(n),A!==null&&(T.data=A)))),(A=eP?tP(t,n):nP(t,n))&&(_=Ic(_,"onBeforeInput"),0<_.length&&(v=new g_("onBeforeInput","beforeinput",null,n,v),w.push({event:v,listeners:_}),v.data=A))}Oy(w,e)})}function ll(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ic(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=tl(t,n),o!=null&&i.unshift(ll(t,o,s)),o=tl(t,e),o!=null&&i.push(ll(t,o,s))),t=t.return}return i}function Bs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function R_(t,e,n,i,s){for(var o=e._reactName,l=[];n!==null&&n!==i;){var h=n,d=h.alternate,_=h.stateNode;if(d!==null&&d===i)break;h.tag===5&&_!==null&&(h=_,s?(d=tl(n,o),d!=null&&l.unshift(ll(n,d,h))):s||(d=tl(n,o),d!=null&&l.push(ll(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var _P=/\r\n?/g,gP=/\u0000|\uFFFD/g;function x_(t){return(typeof t=="string"?t:""+t).replace(_P,`
`).replace(gP,"")}function bu(t,e,n){if(e=x_(e),x_(t)!==e&&n)throw Error(G(425))}function Pc(){}var Gd=null,Kd=null;function Qd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yd=typeof setTimeout=="function"?setTimeout:void 0,vP=typeof clearTimeout=="function"?clearTimeout:void 0,L_=typeof Promise=="function"?Promise:void 0,yP=typeof queueMicrotask=="function"?queueMicrotask:typeof L_<"u"?function(t){return L_.resolve(null).then(t).catch(wP)}:Yd;function wP(t){setTimeout(function(){throw t})}function rd(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),rl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);rl(e)}function sr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function O_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var No=Math.random().toString(36).slice(2),Hn="__reactFiber$"+No,ul="__reactProps$"+No,Ti="__reactContainer$"+No,Xd="__reactEvents$"+No,EP="__reactListeners$"+No,TP="__reactHandles$"+No;function Br(t){var e=t[Hn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ti]||n[Hn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=O_(t);t!==null;){if(n=t[Hn])return n;t=O_(t)}return e}t=n,n=t.parentNode}return null}function Rl(t){return t=t[Hn]||t[Ti],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function lh(t){return t[ul]||null}var Jd=[],Ys=-1;function Er(t){return{current:t}}function Ue(t){0>Ys||(t.current=Jd[Ys],Jd[Ys]=null,Ys--)}function ze(t,e){Ys++,Jd[Ys]=t.current,t.current=e}var _r={},Mt=Er(_r),$t=Er(!1),Qr=_r;function _o(t,e){var n=t.type.contextTypes;if(!n)return _r;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Gt(t){return t=t.childContextTypes,t!=null}function Sc(){Ue($t),Ue(Mt)}function N_(t,e,n){if(Mt.current!==_r)throw Error(G(168));ze(Mt,e),ze($t,n)}function My(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(G(108,oI(t)||"Unknown",s));return Ge({},n,i)}function Ac(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_r,Qr=Mt.current,ze(Mt,t),ze($t,$t.current),!0}function M_(t,e,n){var i=t.stateNode;if(!i)throw Error(G(169));n?(t=My(t,e,Qr),i.__reactInternalMemoizedMergedChildContext=t,Ue($t),Ue(Mt),ze(Mt,t)):Ue($t),ze($t,n)}var di=null,uh=!1,sd=!1;function Dy(t){di===null?di=[t]:di.push(t)}function IP(t){uh=!0,Dy(t)}function Tr(){if(!sd&&di!==null){sd=!0;var t=0,e=Ne;try{var n=di;for(Ne=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}di=null,uh=!1}catch(s){throw di!==null&&(di=di.slice(t+1)),oy(ip,Tr),s}finally{Ne=e,sd=!1}}return null}var Xs=[],Js=0,Cc=null,kc=0,mn=[],_n=0,Yr=null,pi=1,mi="";function Vr(t,e){Xs[Js++]=kc,Xs[Js++]=Cc,Cc=t,kc=e}function by(t,e,n){mn[_n++]=pi,mn[_n++]=mi,mn[_n++]=Yr,Yr=t;var i=pi;t=mi;var s=32-On(i)-1;i&=~(1<<s),n+=1;var o=32-On(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,pi=1<<32-On(e)+s|n<<s|i,mi=o+t}else pi=1<<o|n<<s|i,mi=t}function dp(t){t.return!==null&&(Vr(t,1),by(t,1,0))}function fp(t){for(;t===Cc;)Cc=Xs[--Js],Xs[Js]=null,kc=Xs[--Js],Xs[Js]=null;for(;t===Yr;)Yr=mn[--_n],mn[_n]=null,mi=mn[--_n],mn[_n]=null,pi=mn[--_n],mn[_n]=null}var tn=null,en=null,He=!1,xn=null;function Vy(t,e){var n=vn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function D_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,tn=t,en=sr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,tn=t,en=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yr!==null?{id:pi,overflow:mi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,tn=t,en=null,!0):!1;default:return!1}}function ef(t){return(t.mode&1)!==0&&(t.flags&128)===0}function tf(t){if(He){var e=en;if(e){var n=e;if(!D_(t,e)){if(ef(t))throw Error(G(418));e=sr(n.nextSibling);var i=tn;e&&D_(t,e)?Vy(i,n):(t.flags=t.flags&-4097|2,He=!1,tn=t)}}else{if(ef(t))throw Error(G(418));t.flags=t.flags&-4097|2,He=!1,tn=t}}}function b_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tn=t}function Vu(t){if(t!==tn)return!1;if(!He)return b_(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qd(t.type,t.memoizedProps)),e&&(e=en)){if(ef(t))throw zy(),Error(G(418));for(;e;)Vy(t,e),e=sr(e.nextSibling)}if(b_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){en=sr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}en=null}}else en=tn?sr(t.stateNode.nextSibling):null;return!0}function zy(){for(var t=en;t;)t=sr(t.nextSibling)}function go(){en=tn=null,He=!1}function pp(t){xn===null?xn=[t]:xn.push(t)}var PP=xi.ReactCurrentBatchConfig;function Ca(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var i=n.stateNode}if(!i)throw Error(G(147,t));var s=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=s.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function zu(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function V_(t){var e=t._init;return e(t._payload)}function Fy(t){function e(x,P){if(t){var O=x.deletions;O===null?(x.deletions=[P],x.flags|=16):O.push(P)}}function n(x,P){if(!t)return null;for(;P!==null;)e(x,P),P=P.sibling;return null}function i(x,P){for(x=new Map;P!==null;)P.key!==null?x.set(P.key,P):x.set(P.index,P),P=P.sibling;return x}function s(x,P){return x=ur(x,P),x.index=0,x.sibling=null,x}function o(x,P,O){return x.index=O,t?(O=x.alternate,O!==null?(O=O.index,O<P?(x.flags|=2,P):O):(x.flags|=2,P)):(x.flags|=1048576,P)}function l(x){return t&&x.alternate===null&&(x.flags|=2),x}function h(x,P,O,j){return P===null||P.tag!==6?(P=dd(O,x.mode,j),P.return=x,P):(P=s(P,O),P.return=x,P)}function d(x,P,O,j){var K=O.type;return K===Zs?v(x,P,O.props.children,j,O.key):P!==null&&(P.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===qi&&V_(K)===P.type)?(j=s(P,O.props),j.ref=Ca(x,P,O),j.return=x,j):(j=sc(O.type,O.key,O.props,null,x.mode,j),j.ref=Ca(x,P,O),j.return=x,j)}function _(x,P,O,j){return P===null||P.tag!==4||P.stateNode.containerInfo!==O.containerInfo||P.stateNode.implementation!==O.implementation?(P=fd(O,x.mode,j),P.return=x,P):(P=s(P,O.children||[]),P.return=x,P)}function v(x,P,O,j,K){return P===null||P.tag!==7?(P=$r(O,x.mode,j,K),P.return=x,P):(P=s(P,O),P.return=x,P)}function w(x,P,O){if(typeof P=="string"&&P!==""||typeof P=="number")return P=dd(""+P,x.mode,O),P.return=x,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Cu:return O=sc(P.type,P.key,P.props,null,x.mode,O),O.ref=Ca(x,null,P),O.return=x,O;case qs:return P=fd(P,x.mode,O),P.return=x,P;case qi:var j=P._init;return w(x,j(P._payload),O)}if(Oa(P)||Ta(P))return P=$r(P,x.mode,O,null),P.return=x,P;zu(x,P)}return null}function I(x,P,O,j){var K=P!==null?P.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return K!==null?null:h(x,P,""+O,j);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Cu:return O.key===K?d(x,P,O,j):null;case qs:return O.key===K?_(x,P,O,j):null;case qi:return K=O._init,I(x,P,K(O._payload),j)}if(Oa(O)||Ta(O))return K!==null?null:v(x,P,O,j,null);zu(x,O)}return null}function N(x,P,O,j,K){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(O)||null,h(P,x,""+j,K);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Cu:return x=x.get(j.key===null?O:j.key)||null,d(P,x,j,K);case qs:return x=x.get(j.key===null?O:j.key)||null,_(P,x,j,K);case qi:var Y=j._init;return N(x,P,O,Y(j._payload),K)}if(Oa(j)||Ta(j))return x=x.get(O)||null,v(P,x,j,K,null);zu(P,j)}return null}function b(x,P,O,j){for(var K=null,Y=null,A=P,T=P=0,S=null;A!==null&&T<O.length;T++){A.index>T?(S=A,A=null):S=A.sibling;var k=I(x,A,O[T],j);if(k===null){A===null&&(A=S);break}t&&A&&k.alternate===null&&e(x,A),P=o(k,P,T),Y===null?K=k:Y.sibling=k,Y=k,A=S}if(T===O.length)return n(x,A),He&&Vr(x,T),K;if(A===null){for(;T<O.length;T++)A=w(x,O[T],j),A!==null&&(P=o(A,P,T),Y===null?K=A:Y.sibling=A,Y=A);return He&&Vr(x,T),K}for(A=i(x,A);T<O.length;T++)S=N(A,x,T,O[T],j),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?T:S.key),P=o(S,P,T),Y===null?K=S:Y.sibling=S,Y=S);return t&&A.forEach(function(M){return e(x,M)}),He&&Vr(x,T),K}function z(x,P,O,j){var K=Ta(O);if(typeof K!="function")throw Error(G(150));if(O=K.call(O),O==null)throw Error(G(151));for(var Y=K=null,A=P,T=P=0,S=null,k=O.next();A!==null&&!k.done;T++,k=O.next()){A.index>T?(S=A,A=null):S=A.sibling;var M=I(x,A,k.value,j);if(M===null){A===null&&(A=S);break}t&&A&&M.alternate===null&&e(x,A),P=o(M,P,T),Y===null?K=M:Y.sibling=M,Y=M,A=S}if(k.done)return n(x,A),He&&Vr(x,T),K;if(A===null){for(;!k.done;T++,k=O.next())k=w(x,k.value,j),k!==null&&(P=o(k,P,T),Y===null?K=k:Y.sibling=k,Y=k);return He&&Vr(x,T),K}for(A=i(x,A);!k.done;T++,k=O.next())k=N(A,x,T,k.value,j),k!==null&&(t&&k.alternate!==null&&A.delete(k.key===null?T:k.key),P=o(k,P,T),Y===null?K=k:Y.sibling=k,Y=k);return t&&A.forEach(function(D){return e(x,D)}),He&&Vr(x,T),K}function W(x,P,O,j){if(typeof O=="object"&&O!==null&&O.type===Zs&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case Cu:e:{for(var K=O.key,Y=P;Y!==null;){if(Y.key===K){if(K=O.type,K===Zs){if(Y.tag===7){n(x,Y.sibling),P=s(Y,O.props.children),P.return=x,x=P;break e}}else if(Y.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===qi&&V_(K)===Y.type){n(x,Y.sibling),P=s(Y,O.props),P.ref=Ca(x,Y,O),P.return=x,x=P;break e}n(x,Y);break}else e(x,Y);Y=Y.sibling}O.type===Zs?(P=$r(O.props.children,x.mode,j,O.key),P.return=x,x=P):(j=sc(O.type,O.key,O.props,null,x.mode,j),j.ref=Ca(x,P,O),j.return=x,x=j)}return l(x);case qs:e:{for(Y=O.key;P!==null;){if(P.key===Y)if(P.tag===4&&P.stateNode.containerInfo===O.containerInfo&&P.stateNode.implementation===O.implementation){n(x,P.sibling),P=s(P,O.children||[]),P.return=x,x=P;break e}else{n(x,P);break}else e(x,P);P=P.sibling}P=fd(O,x.mode,j),P.return=x,x=P}return l(x);case qi:return Y=O._init,W(x,P,Y(O._payload),j)}if(Oa(O))return b(x,P,O,j);if(Ta(O))return z(x,P,O,j);zu(x,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,P!==null&&P.tag===6?(n(x,P.sibling),P=s(P,O),P.return=x,x=P):(n(x,P),P=dd(O,x.mode,j),P.return=x,x=P),l(x)):n(x,P)}return W}var vo=Fy(!0),Uy=Fy(!1),Rc=Er(null),xc=null,eo=null,mp=null;function _p(){mp=eo=xc=null}function gp(t){var e=Rc.current;Ue(Rc),t._currentValue=e}function nf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function lo(t,e){xc=t,mp=eo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zt=!0),t.firstContext=null)}function wn(t){var e=t._currentValue;if(mp!==t)if(t={context:t,memoizedValue:e,next:null},eo===null){if(xc===null)throw Error(G(308));eo=t,xc.dependencies={lanes:0,firstContext:t}}else eo=eo.next=t;return e}var jr=null;function vp(t){jr===null?jr=[t]:jr.push(t)}function By(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,vp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ii(t,i)}function Ii(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zi=!1;function yp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function or(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Re&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Ii(t,n)}return s=i.interleaved,s===null?(e.next=e,vp(i)):(e.next=s.next,s.next=e),i.interleaved=e,Ii(t,n)}function Ju(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,rp(t,n)}}function z_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Lc(t,e,n,i){var s=t.updateQueue;Zi=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var d=h,_=d.next;d.next=null,l===null?o=_:l.next=_,l=d;var v=t.alternate;v!==null&&(v=v.updateQueue,h=v.lastBaseUpdate,h!==l&&(h===null?v.firstBaseUpdate=_:h.next=_,v.lastBaseUpdate=d))}if(o!==null){var w=s.baseState;l=0,v=_=d=null,h=o;do{var I=h.lane,N=h.eventTime;if((i&I)===I){v!==null&&(v=v.next={eventTime:N,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var b=t,z=h;switch(I=e,N=n,z.tag){case 1:if(b=z.payload,typeof b=="function"){w=b.call(N,w,I);break e}w=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=z.payload,I=typeof b=="function"?b.call(N,w,I):b,I==null)break e;w=Ge({},w,I);break e;case 2:Zi=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,I=s.effects,I===null?s.effects=[h]:I.push(h))}else N={eventTime:N,lane:I,tag:h.tag,payload:h.payload,callback:h.callback,next:null},v===null?(_=v=N,d=w):v=v.next=N,l|=I;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;I=h,h=I.next,I.next=null,s.lastBaseUpdate=I,s.shared.pending=null}}while(!0);if(v===null&&(d=w),s.baseState=d,s.firstBaseUpdate=_,s.lastBaseUpdate=v,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Jr|=l,t.lanes=l,t.memoizedState=w}}function F_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(G(191,s));s.call(i)}}}var xl={},qn=Er(xl),cl=Er(xl),hl=Er(xl);function Hr(t){if(t===xl)throw Error(G(174));return t}function wp(t,e){switch(ze(hl,e),ze(cl,t),ze(qn,xl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=bd(e,t)}Ue(qn),ze(qn,e)}function yo(){Ue(qn),Ue(cl),Ue(hl)}function Hy(t){Hr(hl.current);var e=Hr(qn.current),n=bd(e,t.type);e!==n&&(ze(cl,t),ze(qn,n))}function Ep(t){cl.current===t&&(Ue(qn),Ue(cl))}var Ze=Er(0);function Oc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var od=[];function Tp(){for(var t=0;t<od.length;t++)od[t]._workInProgressVersionPrimary=null;od.length=0}var ec=xi.ReactCurrentDispatcher,ad=xi.ReactCurrentBatchConfig,Xr=0,$e=null,ct=null,vt=null,Nc=!1,Wa=!1,dl=0,SP=0;function kt(){throw Error(G(321))}function Ip(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Mn(t[n],e[n]))return!1;return!0}function Pp(t,e,n,i,s,o){if(Xr=o,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ec.current=t===null||t.memoizedState===null?RP:xP,t=n(i,s),Wa){o=0;do{if(Wa=!1,dl=0,25<=o)throw Error(G(301));o+=1,vt=ct=null,e.updateQueue=null,ec.current=LP,t=n(i,s)}while(Wa)}if(ec.current=Mc,e=ct!==null&&ct.next!==null,Xr=0,vt=ct=$e=null,Nc=!1,e)throw Error(G(300));return t}function Sp(){var t=dl!==0;return dl=0,t}function jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?$e.memoizedState=vt=t:vt=vt.next=t,vt}function En(){if(ct===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=vt===null?$e.memoizedState:vt.next;if(e!==null)vt=e,ct=t;else{if(t===null)throw Error(G(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},vt===null?$e.memoizedState=vt=t:vt=vt.next=t}return vt}function fl(t,e){return typeof e=="function"?e(t):e}function ld(t){var e=En(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var i=ct,s=i.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,i=i.baseState;var h=l=null,d=null,_=o;do{var v=_.lane;if((Xr&v)===v)d!==null&&(d=d.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),i=_.hasEagerState?_.eagerState:t(i,_.action);else{var w={lane:v,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};d===null?(h=d=w,l=i):d=d.next=w,$e.lanes|=v,Jr|=v}_=_.next}while(_!==null&&_!==o);d===null?l=i:d.next=h,Mn(i,e.memoizedState)||(Zt=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do o=s.lane,$e.lanes|=o,Jr|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ud(t){var e=En(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);Mn(o,e.memoizedState)||(Zt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function Wy(){}function qy(t,e){var n=$e,i=En(),s=e(),o=!Mn(i.memoizedState,s);if(o&&(i.memoizedState=s,Zt=!0),i=i.queue,Ap(Gy.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||vt!==null&&vt.memoizedState.tag&1){if(n.flags|=2048,pl(9,$y.bind(null,n,i,s,e),void 0,null),yt===null)throw Error(G(349));Xr&30||Zy(n,e,s)}return s}function Zy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $y(t,e,n,i){e.value=n,e.getSnapshot=i,Ky(e)&&Qy(t)}function Gy(t,e,n){return n(function(){Ky(e)&&Qy(t)})}function Ky(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Mn(t,n)}catch{return!0}}function Qy(t){var e=Ii(t,1);e!==null&&Nn(e,t,1,-1)}function U_(t){var e=jn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fl,lastRenderedState:t},e.queue=t,t=t.dispatch=kP.bind(null,$e,t),[e.memoizedState,t]}function pl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Yy(){return En().memoizedState}function tc(t,e,n,i){var s=jn();$e.flags|=t,s.memoizedState=pl(1|e,n,void 0,i===void 0?null:i)}function ch(t,e,n,i){var s=En();i=i===void 0?null:i;var o=void 0;if(ct!==null){var l=ct.memoizedState;if(o=l.destroy,i!==null&&Ip(i,l.deps)){s.memoizedState=pl(e,n,o,i);return}}$e.flags|=t,s.memoizedState=pl(1|e,n,o,i)}function B_(t,e){return tc(8390656,8,t,e)}function Ap(t,e){return ch(2048,8,t,e)}function Xy(t,e){return ch(4,2,t,e)}function Jy(t,e){return ch(4,4,t,e)}function ew(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function tw(t,e,n){return n=n!=null?n.concat([t]):null,ch(4,4,ew.bind(null,e,t),n)}function Cp(){}function nw(t,e){var n=En();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ip(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function iw(t,e){var n=En();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ip(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function rw(t,e,n){return Xr&21?(Mn(n,e)||(n=uy(),$e.lanes|=n,Jr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zt=!0),t.memoizedState=n)}function AP(t,e){var n=Ne;Ne=n!==0&&4>n?n:4,t(!0);var i=ad.transition;ad.transition={};try{t(!1),e()}finally{Ne=n,ad.transition=i}}function sw(){return En().memoizedState}function CP(t,e,n){var i=lr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},ow(t))aw(e,n);else if(n=By(t,e,n,i),n!==null){var s=Ut();Nn(n,t,i,s),lw(n,e,i)}}function kP(t,e,n){var i=lr(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(ow(t))aw(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(s.hasEagerState=!0,s.eagerState=h,Mn(h,l)){var d=e.interleaved;d===null?(s.next=s,vp(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=By(t,e,s,i),n!==null&&(s=Ut(),Nn(n,t,i,s),lw(n,e,i))}}function ow(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function aw(t,e){Wa=Nc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function lw(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,rp(t,n)}}var Mc={readContext:wn,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},RP={readContext:wn,useCallback:function(t,e){return jn().memoizedState=[t,e===void 0?null:e],t},useContext:wn,useEffect:B_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,tc(4194308,4,ew.bind(null,e,t),n)},useLayoutEffect:function(t,e){return tc(4194308,4,t,e)},useInsertionEffect:function(t,e){return tc(4,2,t,e)},useMemo:function(t,e){var n=jn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=jn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=CP.bind(null,$e,t),[i.memoizedState,t]},useRef:function(t){var e=jn();return t={current:t},e.memoizedState=t},useState:U_,useDebugValue:Cp,useDeferredValue:function(t){return jn().memoizedState=t},useTransition:function(){var t=U_(!1),e=t[0];return t=AP.bind(null,t[1]),jn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=$e,s=jn();if(He){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),yt===null)throw Error(G(349));Xr&30||Zy(i,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,B_(Gy.bind(null,i,o,t),[t]),i.flags|=2048,pl(9,$y.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=jn(),e=yt.identifierPrefix;if(He){var n=mi,i=pi;n=(i&~(1<<32-On(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=dl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xP={readContext:wn,useCallback:nw,useContext:wn,useEffect:Ap,useImperativeHandle:tw,useInsertionEffect:Xy,useLayoutEffect:Jy,useMemo:iw,useReducer:ld,useRef:Yy,useState:function(){return ld(fl)},useDebugValue:Cp,useDeferredValue:function(t){var e=En();return rw(e,ct.memoizedState,t)},useTransition:function(){var t=ld(fl)[0],e=En().memoizedState;return[t,e]},useMutableSource:Wy,useSyncExternalStore:qy,useId:sw,unstable_isNewReconciler:!1},LP={readContext:wn,useCallback:nw,useContext:wn,useEffect:Ap,useImperativeHandle:tw,useInsertionEffect:Xy,useLayoutEffect:Jy,useMemo:iw,useReducer:ud,useRef:Yy,useState:function(){return ud(fl)},useDebugValue:Cp,useDeferredValue:function(t){var e=En();return ct===null?e.memoizedState=t:rw(e,ct.memoizedState,t)},useTransition:function(){var t=ud(fl)[0],e=En().memoizedState;return[t,e]},useMutableSource:Wy,useSyncExternalStore:qy,useId:sw,unstable_isNewReconciler:!1};function kn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function rf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var hh={isMounted:function(t){return(t=t._reactInternals)?as(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ut(),s=lr(t),o=yi(i,s);o.payload=e,n!=null&&(o.callback=n),e=or(t,o,s),e!==null&&(Nn(e,t,s,i),Ju(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ut(),s=lr(t),o=yi(i,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=or(t,o,s),e!==null&&(Nn(e,t,s,i),Ju(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ut(),i=lr(t),s=yi(n,i);s.tag=2,e!=null&&(s.callback=e),e=or(t,s,i),e!==null&&(Nn(e,t,i,n),Ju(e,t,i))}};function j_(t,e,n,i,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!ol(n,i)||!ol(s,o):!0}function uw(t,e,n){var i=!1,s=_r,o=e.contextType;return typeof o=="object"&&o!==null?o=wn(o):(s=Gt(e)?Qr:Mt.current,i=e.contextTypes,o=(i=i!=null)?_o(t,s):_r),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function H_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&hh.enqueueReplaceState(e,e.state,null)}function sf(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},yp(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=wn(o):(o=Gt(e)?Qr:Mt.current,s.context=_o(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(rf(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&hh.enqueueReplaceState(s,s.state,null),Lc(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function wo(t,e){try{var n="",i=e;do n+=sI(i),i=i.return;while(i);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function cd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function of(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var OP=typeof WeakMap=="function"?WeakMap:Map;function cw(t,e,n){n=yi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){bc||(bc=!0,_f=i),of(t,e)},n}function hw(t,e,n){n=yi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){of(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){of(t,e),typeof i!="function"&&(ar===null?ar=new Set([this]):ar.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function W_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new OP;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=ZP.bind(null,t,e,n),e.then(t,t))}function q_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Z_(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=yi(-1,1),e.tag=2,or(n,e,1))),n.lanes|=1),t)}var NP=xi.ReactCurrentOwner,Zt=!1;function Ft(t,e,n,i){e.child=t===null?Uy(e,null,n,i):vo(e,t.child,n,i)}function $_(t,e,n,i,s){n=n.render;var o=e.ref;return lo(e,s),i=Pp(t,e,n,i,o,s),n=Sp(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Pi(t,e,s)):(He&&n&&dp(e),e.flags|=1,Ft(t,e,i,s),e.child)}function G_(t,e,n,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!Dp(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,dw(t,e,o,i,s)):(t=sc(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:ol,n(l,i)&&t.ref===e.ref)return Pi(t,e,s)}return e.flags|=1,t=ur(o,i),t.ref=e.ref,t.return=e,e.child=t}function dw(t,e,n,i,s){if(t!==null){var o=t.memoizedProps;if(ol(o,i)&&t.ref===e.ref)if(Zt=!1,e.pendingProps=i=o,(t.lanes&s)!==0)t.flags&131072&&(Zt=!0);else return e.lanes=t.lanes,Pi(t,e,s)}return af(t,e,n,i,s)}function fw(t,e,n){var i=e.pendingProps,s=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(no,Jt),Jt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ze(no,Jt),Jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,ze(no,Jt),Jt|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,ze(no,Jt),Jt|=i;return Ft(t,e,s,n),e.child}function pw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function af(t,e,n,i,s){var o=Gt(n)?Qr:Mt.current;return o=_o(e,o),lo(e,s),n=Pp(t,e,n,i,o,s),i=Sp(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Pi(t,e,s)):(He&&i&&dp(e),e.flags|=1,Ft(t,e,n,s),e.child)}function K_(t,e,n,i,s){if(Gt(n)){var o=!0;Ac(e)}else o=!1;if(lo(e,s),e.stateNode===null)nc(t,e),uw(e,n,i),sf(e,n,i,s),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,_=n.contextType;typeof _=="object"&&_!==null?_=wn(_):(_=Gt(n)?Qr:Mt.current,_=_o(e,_));var v=n.getDerivedStateFromProps,w=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function";w||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||d!==_)&&H_(e,l,i,_),Zi=!1;var I=e.memoizedState;l.state=I,Lc(e,i,l,s),d=e.memoizedState,h!==i||I!==d||$t.current||Zi?(typeof v=="function"&&(rf(e,n,v,i),d=e.memoizedState),(h=Zi||j_(e,n,h,i,I,d,_))?(w||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=_,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,jy(t,e),h=e.memoizedProps,_=e.type===e.elementType?h:kn(e.type,h),l.props=_,w=e.pendingProps,I=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=wn(d):(d=Gt(n)?Qr:Mt.current,d=_o(e,d));var N=n.getDerivedStateFromProps;(v=typeof N=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==w||I!==d)&&H_(e,l,i,d),Zi=!1,I=e.memoizedState,l.state=I,Lc(e,i,l,s);var b=e.memoizedState;h!==w||I!==b||$t.current||Zi?(typeof N=="function"&&(rf(e,n,N,i),b=e.memoizedState),(_=Zi||j_(e,n,_,i,I,b,d)||!1)?(v||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,b,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,b,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&I===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&I===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=b),l.props=i,l.state=b,l.context=d,i=_):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&I===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&I===t.memoizedState||(e.flags|=1024),i=!1)}return lf(t,e,n,i,o,s)}function lf(t,e,n,i,s,o){pw(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&M_(e,n,!1),Pi(t,e,o);i=e.stateNode,NP.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=vo(e,t.child,null,o),e.child=vo(e,null,h,o)):Ft(t,e,h,o),e.memoizedState=i.state,s&&M_(e,n,!0),e.child}function mw(t){var e=t.stateNode;e.pendingContext?N_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&N_(t,e.context,!1),wp(t,e.containerInfo)}function Q_(t,e,n,i,s){return go(),pp(s),e.flags|=256,Ft(t,e,n,i),e.child}var uf={dehydrated:null,treeContext:null,retryLane:0};function cf(t){return{baseLanes:t,cachePool:null,transitions:null}}function _w(t,e,n){var i=e.pendingProps,s=Ze.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ze(Ze,s&1),t===null)return tf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=ph(l,i,0,null),t=$r(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=cf(n),e.memoizedState=uf,t):kp(e,l));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return MP(t,e,l,i,h,s,n);if(o){o=i.fallback,l=e.mode,s=t.child,h=s.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=ur(s,d),i.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=ur(h,o):(o=$r(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?cf(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=uf,i}return o=t.child,t=o.sibling,i=ur(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function kp(t,e){return e=ph({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fu(t,e,n,i){return i!==null&&pp(i),vo(e,t.child,null,n),t=kp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function MP(t,e,n,i,s,o,l){if(n)return e.flags&256?(e.flags&=-257,i=cd(Error(G(422))),Fu(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=ph({mode:"visible",children:i.children},s,0,null),o=$r(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&vo(e,t.child,null,l),e.child.memoizedState=cf(l),e.memoizedState=uf,o);if(!(e.mode&1))return Fu(t,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(G(419)),i=cd(o,i,void 0),Fu(t,e,l,i)}if(h=(l&t.childLanes)!==0,Zt||h){if(i=yt,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Ii(t,s),Nn(i,t,s,-1))}return Mp(),i=cd(Error(G(421))),Fu(t,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=$P.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,en=sr(s.nextSibling),tn=e,He=!0,xn=null,t!==null&&(mn[_n++]=pi,mn[_n++]=mi,mn[_n++]=Yr,pi=t.id,mi=t.overflow,Yr=e),e=kp(e,i.children),e.flags|=4096,e)}function Y_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),nf(t.return,e,n)}function hd(t,e,n,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=s)}function gw(t,e,n){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Ft(t,e,i.children,n),i=Ze.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Y_(t,n,e);else if(t.tag===19)Y_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ze(Ze,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Oc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),hd(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Oc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}hd(e,!0,n,null,o);break;case"together":hd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Jr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=ur(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ur(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function DP(t,e,n){switch(e.tag){case 3:mw(e),go();break;case 5:Hy(e);break;case 1:Gt(e.type)&&Ac(e);break;case 4:wp(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;ze(Rc,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ze(Ze,Ze.current&1),e.flags|=128,null):n&e.child.childLanes?_w(t,e,n):(ze(Ze,Ze.current&1),t=Pi(t,e,n),t!==null?t.sibling:null);ze(Ze,Ze.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return gw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ze(Ze,Ze.current),i)break;return null;case 22:case 23:return e.lanes=0,fw(t,e,n)}return Pi(t,e,n)}var vw,hf,yw,ww;vw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hf=function(){};yw=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,Hr(qn.current);var o=null;switch(n){case"input":s=Od(t,s),i=Od(t,i),o=[];break;case"select":s=Ge({},s,{value:void 0}),i=Ge({},i,{value:void 0}),o=[];break;case"textarea":s=Dd(t,s),i=Dd(t,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Pc)}Vd(n,i);var l;n=null;for(_ in s)if(!i.hasOwnProperty(_)&&s.hasOwnProperty(_)&&s[_]!=null)if(_==="style"){var h=s[_];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(Ja.hasOwnProperty(_)?o||(o=[]):(o=o||[]).push(_,null));for(_ in i){var d=i[_];if(h=s!=null?s[_]:void 0,i.hasOwnProperty(_)&&d!==h&&(d!=null||h!=null))if(_==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(_,n)),n=d;else _==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(_,d)):_==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(_,""+d):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(Ja.hasOwnProperty(_)?(d!=null&&_==="onScroll"&&Fe("scroll",t),o||h===d||(o=[])):(o=o||[]).push(_,d))}n&&(o=o||[]).push("style",n);var _=o;(e.updateQueue=_)&&(e.flags|=4)}};ww=function(t,e,n,i){n!==i&&(e.flags|=4)};function ka(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function bP(t,e,n){var i=e.pendingProps;switch(fp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(e),null;case 1:return Gt(e.type)&&Sc(),Rt(e),null;case 3:return i=e.stateNode,yo(),Ue($t),Ue(Mt),Tp(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Vu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xn!==null&&(yf(xn),xn=null))),hf(t,e),Rt(e),null;case 5:Ep(e);var s=Hr(hl.current);if(n=e.type,t!==null&&e.stateNode!=null)yw(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(G(166));return Rt(e),null}if(t=Hr(qn.current),Vu(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Hn]=e,i[ul]=o,t=(e.mode&1)!==0,n){case"dialog":Fe("cancel",i),Fe("close",i);break;case"iframe":case"object":case"embed":Fe("load",i);break;case"video":case"audio":for(s=0;s<Ma.length;s++)Fe(Ma[s],i);break;case"source":Fe("error",i);break;case"img":case"image":case"link":Fe("error",i),Fe("load",i);break;case"details":Fe("toggle",i);break;case"input":o_(i,o),Fe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Fe("invalid",i);break;case"textarea":l_(i,o),Fe("invalid",i)}Vd(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&bu(i.textContent,h,t),s=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&bu(i.textContent,h,t),s=["children",""+h]):Ja.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&Fe("scroll",i)}switch(n){case"input":ku(i),a_(i,o,!0);break;case"textarea":ku(i),u_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Pc)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Gv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[Hn]=e,t[ul]=i,vw(t,e,!1,!1),e.stateNode=t;e:{switch(l=zd(n,i),n){case"dialog":Fe("cancel",t),Fe("close",t),s=i;break;case"iframe":case"object":case"embed":Fe("load",t),s=i;break;case"video":case"audio":for(s=0;s<Ma.length;s++)Fe(Ma[s],t);s=i;break;case"source":Fe("error",t),s=i;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),s=i;break;case"details":Fe("toggle",t),s=i;break;case"input":o_(t,i),s=Od(t,i),Fe("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Ge({},i,{value:void 0}),Fe("invalid",t);break;case"textarea":l_(t,i),s=Dd(t,i),Fe("invalid",t);break;default:s=i}Vd(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?Yv(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Kv(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&el(t,d):typeof d=="number"&&el(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ja.hasOwnProperty(o)?d!=null&&o==="onScroll"&&Fe("scroll",t):d!=null&&Xf(t,o,d,l))}switch(n){case"input":ku(t),a_(t,i,!1);break;case"textarea":ku(t),u_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+mr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?ro(t,!!i.multiple,o,!1):i.defaultValue!=null&&ro(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Pc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Rt(e),null;case 6:if(t&&e.stateNode!=null)ww(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(G(166));if(n=Hr(hl.current),Hr(qn.current),Vu(e)){if(i=e.stateNode,n=e.memoizedProps,i[Hn]=e,(o=i.nodeValue!==n)&&(t=tn,t!==null))switch(t.tag){case 3:bu(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bu(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Hn]=e,e.stateNode=i}return Rt(e),null;case 13:if(Ue(Ze),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&en!==null&&e.mode&1&&!(e.flags&128))zy(),go(),e.flags|=98560,o=!1;else if(o=Vu(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(G(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(G(317));o[Hn]=e}else go(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Rt(e),o=!1}else xn!==null&&(yf(xn),xn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ze.current&1?dt===0&&(dt=3):Mp())),e.updateQueue!==null&&(e.flags|=4),Rt(e),null);case 4:return yo(),hf(t,e),t===null&&al(e.stateNode.containerInfo),Rt(e),null;case 10:return gp(e.type._context),Rt(e),null;case 17:return Gt(e.type)&&Sc(),Rt(e),null;case 19:if(Ue(Ze),o=e.memoizedState,o===null)return Rt(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)ka(o,!1);else{if(dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Oc(t),l!==null){for(e.flags|=128,ka(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ze(Ze,Ze.current&1|2),e.child}t=t.sibling}o.tail!==null&&nt()>Eo&&(e.flags|=128,i=!0,ka(o,!1),e.lanes=4194304)}else{if(!i)if(t=Oc(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ka(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!He)return Rt(e),null}else 2*nt()-o.renderingStartTime>Eo&&n!==1073741824&&(e.flags|=128,i=!0,ka(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=nt(),e.sibling=null,n=Ze.current,ze(Ze,i?n&1|2:n&1),e):(Rt(e),null);case 22:case 23:return Np(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Jt&1073741824&&(Rt(e),e.subtreeFlags&6&&(e.flags|=8192)):Rt(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function VP(t,e){switch(fp(e),e.tag){case 1:return Gt(e.type)&&Sc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yo(),Ue($t),Ue(Mt),Tp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ep(e),null;case 13:if(Ue(Ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));go()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ue(Ze),null;case 4:return yo(),null;case 10:return gp(e.type._context),null;case 22:case 23:return Np(),null;case 24:return null;default:return null}}var Uu=!1,Ot=!1,zP=typeof WeakSet=="function"?WeakSet:Set,ee=null;function to(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Xe(t,e,i)}else n.current=null}function df(t,e,n){try{n()}catch(i){Xe(t,e,i)}}var X_=!1;function FP(t,e){if(Gd=Ec,t=Sy(),hp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,_=0,v=0,w=t,I=null;t:for(;;){for(var N;w!==n||s!==0&&w.nodeType!==3||(h=l+s),w!==o||i!==0&&w.nodeType!==3||(d=l+i),w.nodeType===3&&(l+=w.nodeValue.length),(N=w.firstChild)!==null;)I=w,w=N;for(;;){if(w===t)break t;if(I===n&&++_===s&&(h=l),I===o&&++v===i&&(d=l),(N=w.nextSibling)!==null)break;w=I,I=w.parentNode}w=N}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kd={focusedElem:t,selectionRange:n},Ec=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var z=b.memoizedProps,W=b.memoizedState,x=e.stateNode,P=x.getSnapshotBeforeUpdate(e.elementType===e.type?z:kn(e.type,z),W);x.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var O=e.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(j){Xe(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return b=X_,X_=!1,b}function qa(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&df(e,n,o)}s=s.next}while(s!==i)}}function dh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function ff(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ew(t){var e=t.alternate;e!==null&&(t.alternate=null,Ew(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hn],delete e[ul],delete e[Xd],delete e[EP],delete e[TP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Tw(t){return t.tag===5||t.tag===3||t.tag===4}function J_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Tw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pc));else if(i!==4&&(t=t.child,t!==null))for(pf(t,e,n),t=t.sibling;t!==null;)pf(t,e,n),t=t.sibling}function mf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(mf(t,e,n),t=t.sibling;t!==null;)mf(t,e,n),t=t.sibling}var Et=null,Rn=!1;function Hi(t,e,n){for(n=n.child;n!==null;)Iw(t,e,n),n=n.sibling}function Iw(t,e,n){if(Wn&&typeof Wn.onCommitFiberUnmount=="function")try{Wn.onCommitFiberUnmount(rh,n)}catch{}switch(n.tag){case 5:Ot||to(n,e);case 6:var i=Et,s=Rn;Et=null,Hi(t,e,n),Et=i,Rn=s,Et!==null&&(Rn?(t=Et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Et.removeChild(n.stateNode));break;case 18:Et!==null&&(Rn?(t=Et,n=n.stateNode,t.nodeType===8?rd(t.parentNode,n):t.nodeType===1&&rd(t,n),rl(t)):rd(Et,n.stateNode));break;case 4:i=Et,s=Rn,Et=n.stateNode.containerInfo,Rn=!0,Hi(t,e,n),Et=i,Rn=s;break;case 0:case 11:case 14:case 15:if(!Ot&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&df(n,e,l),s=s.next}while(s!==i)}Hi(t,e,n);break;case 1:if(!Ot&&(to(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){Xe(n,e,h)}Hi(t,e,n);break;case 21:Hi(t,e,n);break;case 22:n.mode&1?(Ot=(i=Ot)||n.memoizedState!==null,Hi(t,e,n),Ot=i):Hi(t,e,n);break;default:Hi(t,e,n)}}function eg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new zP),e.forEach(function(i){var s=GP.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Cn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:Et=h.stateNode,Rn=!1;break e;case 3:Et=h.stateNode.containerInfo,Rn=!0;break e;case 4:Et=h.stateNode.containerInfo,Rn=!0;break e}h=h.return}if(Et===null)throw Error(G(160));Iw(o,l,s),Et=null,Rn=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(_){Xe(s,e,_)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Pw(e,t),e=e.sibling}function Pw(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cn(e,t),Bn(t),i&4){try{qa(3,t,t.return),dh(3,t)}catch(z){Xe(t,t.return,z)}try{qa(5,t,t.return)}catch(z){Xe(t,t.return,z)}}break;case 1:Cn(e,t),Bn(t),i&512&&n!==null&&to(n,n.return);break;case 5:if(Cn(e,t),Bn(t),i&512&&n!==null&&to(n,n.return),t.flags&32){var s=t.stateNode;try{el(s,"")}catch(z){Xe(t,t.return,z)}}if(i&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&Zv(s,o),zd(h,l);var _=zd(h,o);for(l=0;l<d.length;l+=2){var v=d[l],w=d[l+1];v==="style"?Yv(s,w):v==="dangerouslySetInnerHTML"?Kv(s,w):v==="children"?el(s,w):Xf(s,v,w,_)}switch(h){case"input":Nd(s,o);break;case"textarea":$v(s,o);break;case"select":var I=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var N=o.value;N!=null?ro(s,!!o.multiple,N,!1):I!==!!o.multiple&&(o.defaultValue!=null?ro(s,!!o.multiple,o.defaultValue,!0):ro(s,!!o.multiple,o.multiple?[]:"",!1))}s[ul]=o}catch(z){Xe(t,t.return,z)}}break;case 6:if(Cn(e,t),Bn(t),i&4){if(t.stateNode===null)throw Error(G(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(z){Xe(t,t.return,z)}}break;case 3:if(Cn(e,t),Bn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{rl(e.containerInfo)}catch(z){Xe(t,t.return,z)}break;case 4:Cn(e,t),Bn(t);break;case 13:Cn(e,t),Bn(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Lp=nt())),i&4&&eg(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(_=Ot)||v,Cn(e,t),Ot=_):Cn(e,t),Bn(t),i&8192){if(_=t.memoizedState!==null,(t.stateNode.isHidden=_)&&!v&&t.mode&1)for(ee=t,v=t.child;v!==null;){for(w=ee=v;ee!==null;){switch(I=ee,N=I.child,I.tag){case 0:case 11:case 14:case 15:qa(4,I,I.return);break;case 1:to(I,I.return);var b=I.stateNode;if(typeof b.componentWillUnmount=="function"){i=I,n=I.return;try{e=i,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(z){Xe(i,n,z)}}break;case 5:to(I,I.return);break;case 22:if(I.memoizedState!==null){ng(w);continue}}N!==null?(N.return=I,ee=N):ng(w)}v=v.sibling}e:for(v=null,w=t;;){if(w.tag===5){if(v===null){v=w;try{s=w.stateNode,_?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=w.stateNode,d=w.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=Qv("display",l))}catch(z){Xe(t,t.return,z)}}}else if(w.tag===6){if(v===null)try{w.stateNode.nodeValue=_?"":w.memoizedProps}catch(z){Xe(t,t.return,z)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===t)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===t)break e;for(;w.sibling===null;){if(w.return===null||w.return===t)break e;v===w&&(v=null),w=w.return}v===w&&(v=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Cn(e,t),Bn(t),i&4&&eg(t);break;case 21:break;default:Cn(e,t),Bn(t)}}function Bn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Tw(n)){var i=n;break e}n=n.return}throw Error(G(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(el(s,""),i.flags&=-33);var o=J_(t);mf(t,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,h=J_(t);pf(t,h,l);break;default:throw Error(G(161))}}catch(d){Xe(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function UP(t,e,n){ee=t,Sw(t)}function Sw(t,e,n){for(var i=(t.mode&1)!==0;ee!==null;){var s=ee,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||Uu;if(!l){var h=s.alternate,d=h!==null&&h.memoizedState!==null||Ot;h=Uu;var _=Ot;if(Uu=l,(Ot=d)&&!_)for(ee=s;ee!==null;)l=ee,d=l.child,l.tag===22&&l.memoizedState!==null?ig(s):d!==null?(d.return=l,ee=d):ig(s);for(;o!==null;)ee=o,Sw(o),o=o.sibling;ee=s,Uu=h,Ot=_}tg(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ee=o):tg(t)}}function tg(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||dh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ot)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:kn(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&F_(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}F_(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var _=e.alternate;if(_!==null){var v=_.memoizedState;if(v!==null){var w=v.dehydrated;w!==null&&rl(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Ot||e.flags&512&&ff(e)}catch(I){Xe(e,e.return,I)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function ng(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function ig(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{dh(4,e)}catch(d){Xe(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(d){Xe(e,s,d)}}var o=e.return;try{ff(e)}catch(d){Xe(e,o,d)}break;case 5:var l=e.return;try{ff(e)}catch(d){Xe(e,l,d)}}}catch(d){Xe(e,e.return,d)}if(e===t){ee=null;break}var h=e.sibling;if(h!==null){h.return=e.return,ee=h;break}ee=e.return}}var BP=Math.ceil,Dc=xi.ReactCurrentDispatcher,Rp=xi.ReactCurrentOwner,yn=xi.ReactCurrentBatchConfig,Re=0,yt=null,at=null,Pt=0,Jt=0,no=Er(0),dt=0,ml=null,Jr=0,fh=0,xp=0,Za=null,qt=null,Lp=0,Eo=1/0,hi=null,bc=!1,_f=null,ar=null,Bu=!1,Ji=null,Vc=0,$a=0,gf=null,ic=-1,rc=0;function Ut(){return Re&6?nt():ic!==-1?ic:ic=nt()}function lr(t){return t.mode&1?Re&2&&Pt!==0?Pt&-Pt:PP.transition!==null?(rc===0&&(rc=uy()),rc):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:_y(t.type)),t):1}function Nn(t,e,n,i){if(50<$a)throw $a=0,gf=null,Error(G(185));Cl(t,n,i),(!(Re&2)||t!==yt)&&(t===yt&&(!(Re&2)&&(fh|=n),dt===4&&Gi(t,Pt)),Kt(t,i),n===1&&Re===0&&!(e.mode&1)&&(Eo=nt()+500,uh&&Tr()))}function Kt(t,e){var n=t.callbackNode;PI(t,e);var i=wc(t,t===yt?Pt:0);if(i===0)n!==null&&d_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&d_(n),e===1)t.tag===0?IP(rg.bind(null,t)):Dy(rg.bind(null,t)),yP(function(){!(Re&6)&&Tr()}),n=null;else{switch(cy(i)){case 1:n=ip;break;case 4:n=ay;break;case 16:n=yc;break;case 536870912:n=ly;break;default:n=yc}n=Nw(n,Aw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Aw(t,e){if(ic=-1,rc=0,Re&6)throw Error(G(327));var n=t.callbackNode;if(uo()&&t.callbackNode!==n)return null;var i=wc(t,t===yt?Pt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=zc(t,i);else{e=i;var s=Re;Re|=2;var o=kw();(yt!==t||Pt!==e)&&(hi=null,Eo=nt()+500,Zr(t,e));do try{WP();break}catch(h){Cw(t,h)}while(!0);_p(),Dc.current=o,Re=s,at!==null?e=0:(yt=null,Pt=0,e=dt)}if(e!==0){if(e===2&&(s=Hd(t),s!==0&&(i=s,e=vf(t,s))),e===1)throw n=ml,Zr(t,0),Gi(t,i),Kt(t,nt()),n;if(e===6)Gi(t,i);else{if(s=t.current.alternate,!(i&30)&&!jP(s)&&(e=zc(t,i),e===2&&(o=Hd(t),o!==0&&(i=o,e=vf(t,o))),e===1))throw n=ml,Zr(t,0),Gi(t,i),Kt(t,nt()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(G(345));case 2:zr(t,qt,hi);break;case 3:if(Gi(t,i),(i&130023424)===i&&(e=Lp+500-nt(),10<e)){if(wc(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Ut(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Yd(zr.bind(null,t,qt,hi),e);break}zr(t,qt,hi);break;case 4:if(Gi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var l=31-On(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=nt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*BP(i/1960))-i,10<i){t.timeoutHandle=Yd(zr.bind(null,t,qt,hi),i);break}zr(t,qt,hi);break;case 5:zr(t,qt,hi);break;default:throw Error(G(329))}}}return Kt(t,nt()),t.callbackNode===n?Aw.bind(null,t):null}function vf(t,e){var n=Za;return t.current.memoizedState.isDehydrated&&(Zr(t,e).flags|=256),t=zc(t,e),t!==2&&(e=qt,qt=n,e!==null&&yf(e)),t}function yf(t){qt===null?qt=t:qt.push.apply(qt,t)}function jP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],o=s.getSnapshot;s=s.value;try{if(!Mn(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gi(t,e){for(e&=~xp,e&=~fh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-On(e),i=1<<n;t[n]=-1,e&=~i}}function rg(t){if(Re&6)throw Error(G(327));uo();var e=wc(t,0);if(!(e&1))return Kt(t,nt()),null;var n=zc(t,e);if(t.tag!==0&&n===2){var i=Hd(t);i!==0&&(e=i,n=vf(t,i))}if(n===1)throw n=ml,Zr(t,0),Gi(t,e),Kt(t,nt()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zr(t,qt,hi),Kt(t,nt()),null}function Op(t,e){var n=Re;Re|=1;try{return t(e)}finally{Re=n,Re===0&&(Eo=nt()+500,uh&&Tr())}}function es(t){Ji!==null&&Ji.tag===0&&!(Re&6)&&uo();var e=Re;Re|=1;var n=yn.transition,i=Ne;try{if(yn.transition=null,Ne=1,t)return t()}finally{Ne=i,yn.transition=n,Re=e,!(Re&6)&&Tr()}}function Np(){Jt=no.current,Ue(no)}function Zr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,vP(n)),at!==null)for(n=at.return;n!==null;){var i=n;switch(fp(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Sc();break;case 3:yo(),Ue($t),Ue(Mt),Tp();break;case 5:Ep(i);break;case 4:yo();break;case 13:Ue(Ze);break;case 19:Ue(Ze);break;case 10:gp(i.type._context);break;case 22:case 23:Np()}n=n.return}if(yt=t,at=t=ur(t.current,null),Pt=Jt=e,dt=0,ml=null,xp=fh=Jr=0,qt=Za=null,jr!==null){for(e=0;e<jr.length;e++)if(n=jr[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}n.pending=i}jr=null}return t}function Cw(t,e){do{var n=at;try{if(_p(),ec.current=Mc,Nc){for(var i=$e.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Nc=!1}if(Xr=0,vt=ct=$e=null,Wa=!1,dl=0,Rp.current=null,n===null||n.return===null){dt=1,ml=e,at=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=Pt,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var _=d,v=h,w=v.tag;if(!(v.mode&1)&&(w===0||w===11||w===15)){var I=v.alternate;I?(v.updateQueue=I.updateQueue,v.memoizedState=I.memoizedState,v.lanes=I.lanes):(v.updateQueue=null,v.memoizedState=null)}var N=q_(l);if(N!==null){N.flags&=-257,Z_(N,l,h,o,e),N.mode&1&&W_(o,_,e),e=N,d=_;var b=e.updateQueue;if(b===null){var z=new Set;z.add(d),e.updateQueue=z}else b.add(d);break e}else{if(!(e&1)){W_(o,_,e),Mp();break e}d=Error(G(426))}}else if(He&&h.mode&1){var W=q_(l);if(W!==null){!(W.flags&65536)&&(W.flags|=256),Z_(W,l,h,o,e),pp(wo(d,h));break e}}o=d=wo(d,h),dt!==4&&(dt=2),Za===null?Za=[o]:Za.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var x=cw(o,d,e);z_(o,x);break e;case 1:h=d;var P=o.type,O=o.stateNode;if(!(o.flags&128)&&(typeof P.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(ar===null||!ar.has(O)))){o.flags|=65536,e&=-e,o.lanes|=e;var j=hw(o,h,e);z_(o,j);break e}}o=o.return}while(o!==null)}xw(n)}catch(K){e=K,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function kw(){var t=Dc.current;return Dc.current=Mc,t===null?Mc:t}function Mp(){(dt===0||dt===3||dt===2)&&(dt=4),yt===null||!(Jr&268435455)&&!(fh&268435455)||Gi(yt,Pt)}function zc(t,e){var n=Re;Re|=2;var i=kw();(yt!==t||Pt!==e)&&(hi=null,Zr(t,e));do try{HP();break}catch(s){Cw(t,s)}while(!0);if(_p(),Re=n,Dc.current=i,at!==null)throw Error(G(261));return yt=null,Pt=0,dt}function HP(){for(;at!==null;)Rw(at)}function WP(){for(;at!==null&&!mI();)Rw(at)}function Rw(t){var e=Ow(t.alternate,t,Jt);t.memoizedProps=t.pendingProps,e===null?xw(t):at=e,Rp.current=null}function xw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=VP(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,at=null;return}}else if(n=bP(n,e,Jt),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);dt===0&&(dt=5)}function zr(t,e,n){var i=Ne,s=yn.transition;try{yn.transition=null,Ne=1,qP(t,e,n,i)}finally{yn.transition=s,Ne=i}return null}function qP(t,e,n,i){do uo();while(Ji!==null);if(Re&6)throw Error(G(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(SI(t,o),t===yt&&(at=yt=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bu||(Bu=!0,Nw(yc,function(){return uo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=yn.transition,yn.transition=null;var l=Ne;Ne=1;var h=Re;Re|=4,Rp.current=null,FP(t,n),Pw(n,t),hP(Kd),Ec=!!Gd,Kd=Gd=null,t.current=n,UP(n),_I(),Re=h,Ne=l,yn.transition=o}else t.current=n;if(Bu&&(Bu=!1,Ji=t,Vc=s),o=t.pendingLanes,o===0&&(ar=null),yI(n.stateNode),Kt(t,nt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(bc)throw bc=!1,t=_f,_f=null,t;return Vc&1&&t.tag!==0&&uo(),o=t.pendingLanes,o&1?t===gf?$a++:($a=0,gf=t):$a=0,Tr(),null}function uo(){if(Ji!==null){var t=cy(Vc),e=yn.transition,n=Ne;try{if(yn.transition=null,Ne=16>t?16:t,Ji===null)var i=!1;else{if(t=Ji,Ji=null,Vc=0,Re&6)throw Error(G(331));var s=Re;for(Re|=4,ee=t.current;ee!==null;){var o=ee,l=o.child;if(ee.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var _=h[d];for(ee=_;ee!==null;){var v=ee;switch(v.tag){case 0:case 11:case 15:qa(8,v,o)}var w=v.child;if(w!==null)w.return=v,ee=w;else for(;ee!==null;){v=ee;var I=v.sibling,N=v.return;if(Ew(v),v===_){ee=null;break}if(I!==null){I.return=N,ee=I;break}ee=N}}}var b=o.alternate;if(b!==null){var z=b.child;if(z!==null){b.child=null;do{var W=z.sibling;z.sibling=null,z=W}while(z!==null)}}ee=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ee=l;else e:for(;ee!==null;){if(o=ee,o.flags&2048)switch(o.tag){case 0:case 11:case 15:qa(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,ee=x;break e}ee=o.return}}var P=t.current;for(ee=P;ee!==null;){l=ee;var O=l.child;if(l.subtreeFlags&2064&&O!==null)O.return=l,ee=O;else e:for(l=P;ee!==null;){if(h=ee,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:dh(9,h)}}catch(K){Xe(h,h.return,K)}if(h===l){ee=null;break e}var j=h.sibling;if(j!==null){j.return=h.return,ee=j;break e}ee=h.return}}if(Re=s,Tr(),Wn&&typeof Wn.onPostCommitFiberRoot=="function")try{Wn.onPostCommitFiberRoot(rh,t)}catch{}i=!0}return i}finally{Ne=n,yn.transition=e}}return!1}function sg(t,e,n){e=wo(n,e),e=cw(t,e,1),t=or(t,e,1),e=Ut(),t!==null&&(Cl(t,1,e),Kt(t,e))}function Xe(t,e,n){if(t.tag===3)sg(t,t,n);else for(;e!==null;){if(e.tag===3){sg(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ar===null||!ar.has(i))){t=wo(n,t),t=hw(e,t,1),e=or(e,t,1),t=Ut(),e!==null&&(Cl(e,1,t),Kt(e,t));break}}e=e.return}}function ZP(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ut(),t.pingedLanes|=t.suspendedLanes&n,yt===t&&(Pt&n)===n&&(dt===4||dt===3&&(Pt&130023424)===Pt&&500>nt()-Lp?Zr(t,0):xp|=n),Kt(t,e)}function Lw(t,e){e===0&&(t.mode&1?(e=Lu,Lu<<=1,!(Lu&130023424)&&(Lu=4194304)):e=1);var n=Ut();t=Ii(t,e),t!==null&&(Cl(t,e,n),Kt(t,n))}function $P(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Lw(t,n)}function GP(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(G(314))}i!==null&&i.delete(e),Lw(t,n)}var Ow;Ow=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$t.current)Zt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zt=!1,DP(t,e,n);Zt=!!(t.flags&131072)}else Zt=!1,He&&e.flags&1048576&&by(e,kc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;nc(t,e),t=e.pendingProps;var s=_o(e,Mt.current);lo(e,n),s=Pp(null,e,i,t,s,n);var o=Sp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gt(i)?(o=!0,Ac(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,yp(e),s.updater=hh,e.stateNode=s,s._reactInternals=e,sf(e,i,t,n),e=lf(null,e,i,!0,o,n)):(e.tag=0,He&&o&&dp(e),Ft(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(nc(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=QP(i),t=kn(i,t),s){case 0:e=af(null,e,i,t,n);break e;case 1:e=K_(null,e,i,t,n);break e;case 11:e=$_(null,e,i,t,n);break e;case 14:e=G_(null,e,i,kn(i.type,t),n);break e}throw Error(G(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:kn(i,s),af(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:kn(i,s),K_(t,e,i,s,n);case 3:e:{if(mw(e),t===null)throw Error(G(387));i=e.pendingProps,o=e.memoizedState,s=o.element,jy(t,e),Lc(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=wo(Error(G(423)),e),e=Q_(t,e,i,n,s);break e}else if(i!==s){s=wo(Error(G(424)),e),e=Q_(t,e,i,n,s);break e}else for(en=sr(e.stateNode.containerInfo.firstChild),tn=e,He=!0,xn=null,n=Uy(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(go(),i===s){e=Pi(t,e,n);break e}Ft(t,e,i,n)}e=e.child}return e;case 5:return Hy(e),t===null&&tf(e),i=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,Qd(i,s)?l=null:o!==null&&Qd(i,o)&&(e.flags|=32),pw(t,e),Ft(t,e,l,n),e.child;case 6:return t===null&&tf(e),null;case 13:return _w(t,e,n);case 4:return wp(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=vo(e,null,i,n):Ft(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:kn(i,s),$_(t,e,i,s,n);case 7:return Ft(t,e,e.pendingProps,n),e.child;case 8:return Ft(t,e,e.pendingProps.children,n),e.child;case 12:return Ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,ze(Rc,i._currentValue),i._currentValue=l,o!==null)if(Mn(o.value,l)){if(o.children===s.children&&!$t.current){e=Pi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=yi(-1,n&-n),d.tag=2;var _=o.updateQueue;if(_!==null){_=_.shared;var v=_.pending;v===null?d.next=d:(d.next=v.next,v.next=d),_.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),nf(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(G(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),nf(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Ft(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,lo(e,n),s=wn(s),i=i(s),e.flags|=1,Ft(t,e,i,n),e.child;case 14:return i=e.type,s=kn(i,e.pendingProps),s=kn(i.type,s),G_(t,e,i,s,n);case 15:return dw(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:kn(i,s),nc(t,e),e.tag=1,Gt(i)?(t=!0,Ac(e)):t=!1,lo(e,n),uw(e,i,s),sf(e,i,s,n),lf(null,e,i,!0,t,n);case 19:return gw(t,e,n);case 22:return fw(t,e,n)}throw Error(G(156,e.tag))};function Nw(t,e){return oy(t,e)}function KP(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(t,e,n,i){return new KP(t,e,n,i)}function Dp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QP(t){if(typeof t=="function")return Dp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ep)return 11;if(t===tp)return 14}return 2}function ur(t,e){var n=t.alternate;return n===null?(n=vn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function sc(t,e,n,i,s,o){var l=2;if(i=t,typeof t=="function")Dp(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Zs:return $r(n.children,s,o,e);case Jf:l=8,s|=8;break;case kd:return t=vn(12,n,e,s|2),t.elementType=kd,t.lanes=o,t;case Rd:return t=vn(13,n,e,s),t.elementType=Rd,t.lanes=o,t;case xd:return t=vn(19,n,e,s),t.elementType=xd,t.lanes=o,t;case Hv:return ph(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Bv:l=10;break e;case jv:l=9;break e;case ep:l=11;break e;case tp:l=14;break e;case qi:l=16,i=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=vn(l,n,e,s),e.elementType=t,e.type=i,e.lanes=o,e}function $r(t,e,n,i){return t=vn(7,t,i,e),t.lanes=n,t}function ph(t,e,n,i){return t=vn(22,t,i,e),t.elementType=Hv,t.lanes=n,t.stateNode={isHidden:!1},t}function dd(t,e,n){return t=vn(6,t,null,e),t.lanes=n,t}function fd(t,e,n){return e=vn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function YP(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$h(0),this.expirationTimes=$h(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$h(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function bp(t,e,n,i,s,o,l,h,d){return t=new YP(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=vn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yp(o),t}function XP(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Mw(t){if(!t)return _r;t=t._reactInternals;e:{if(as(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(Gt(n))return My(t,n,e)}return e}function Dw(t,e,n,i,s,o,l,h,d){return t=bp(n,i,!0,t,s,o,l,h,d),t.context=Mw(null),n=t.current,i=Ut(),s=lr(n),o=yi(i,s),o.callback=e??null,or(n,o,s),t.current.lanes=s,Cl(t,s,i),Kt(t,i),t}function mh(t,e,n,i){var s=e.current,o=Ut(),l=lr(s);return n=Mw(n),e.context===null?e.context=n:e.pendingContext=n,e=yi(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=or(s,e,l),t!==null&&(Nn(t,s,l,o),Ju(t,s,l)),l}function Fc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function og(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vp(t,e){og(t,e),(t=t.alternate)&&og(t,e)}function JP(){return null}var bw=typeof reportError=="function"?reportError:function(t){console.error(t)};function zp(t){this._internalRoot=t}_h.prototype.render=zp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));mh(t,e,null,null)};_h.prototype.unmount=zp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;es(function(){mh(null,t,null,null)}),e[Ti]=null}};function _h(t){this._internalRoot=t}_h.prototype.unstable_scheduleHydration=function(t){if(t){var e=fy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$i.length&&e!==0&&e<$i[n].priority;n++);$i.splice(n,0,t),n===0&&my(t)}};function Fp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ag(){}function eS(t,e,n,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var _=Fc(l);o.call(_)}}var l=Dw(e,i,t,0,null,!1,!1,"",ag);return t._reactRootContainer=l,t[Ti]=l.current,al(t.nodeType===8?t.parentNode:t),es(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var h=i;i=function(){var _=Fc(d);h.call(_)}}var d=bp(t,0,!1,null,null,!1,!1,"",ag);return t._reactRootContainer=d,t[Ti]=d.current,al(t.nodeType===8?t.parentNode:t),es(function(){mh(e,d,n,i)}),d}function vh(t,e,n,i,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var h=s;s=function(){var d=Fc(l);h.call(d)}}mh(e,l,t,s)}else l=eS(n,e,t,s,i);return Fc(l)}hy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Na(e.pendingLanes);n!==0&&(rp(e,n|1),Kt(e,nt()),!(Re&6)&&(Eo=nt()+500,Tr()))}break;case 13:es(function(){var i=Ii(t,1);if(i!==null){var s=Ut();Nn(i,t,1,s)}}),Vp(t,1)}};sp=function(t){if(t.tag===13){var e=Ii(t,134217728);if(e!==null){var n=Ut();Nn(e,t,134217728,n)}Vp(t,134217728)}};dy=function(t){if(t.tag===13){var e=lr(t),n=Ii(t,e);if(n!==null){var i=Ut();Nn(n,t,e,i)}Vp(t,e)}};fy=function(){return Ne};py=function(t,e){var n=Ne;try{return Ne=t,e()}finally{Ne=n}};Ud=function(t,e,n){switch(e){case"input":if(Nd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=lh(i);if(!s)throw Error(G(90));qv(i),Nd(i,s)}}}break;case"textarea":$v(t,n);break;case"select":e=n.value,e!=null&&ro(t,!!n.multiple,e,!1)}};ey=Op;ty=es;var tS={usingClientEntryPoint:!1,Events:[Rl,Qs,lh,Xv,Jv,Op]},Ra={findFiberByHostInstance:Br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nS={bundleType:Ra.bundleType,version:Ra.version,rendererPackageName:Ra.rendererPackageName,rendererConfig:Ra.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ry(t),t===null?null:t.stateNode},findFiberByHostInstance:Ra.findFiberByHostInstance||JP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ju.isDisabled&&ju.supportsFiber)try{rh=ju.inject(nS),Wn=ju}catch{}}sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tS;sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fp(e))throw Error(G(200));return XP(t,e,null,n)};sn.createRoot=function(t,e){if(!Fp(t))throw Error(G(299));var n=!1,i="",s=bw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=bp(t,1,!1,null,null,n,!1,i,s),t[Ti]=e.current,al(t.nodeType===8?t.parentNode:t),new zp(e)};sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=ry(e),t=t===null?null:t.stateNode,t};sn.flushSync=function(t){return es(t)};sn.hydrate=function(t,e,n){if(!gh(e))throw Error(G(200));return vh(null,t,e,!0,n)};sn.hydrateRoot=function(t,e,n){if(!Fp(t))throw Error(G(405));var i=n!=null&&n.hydratedSources||null,s=!1,o="",l=bw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=Dw(e,null,t,1,n??null,s,!1,o,l),t[Ti]=e.current,al(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new _h(e)};sn.render=function(t,e,n){if(!gh(e))throw Error(G(200));return vh(null,t,e,!1,n)};sn.unmountComponentAtNode=function(t){if(!gh(t))throw Error(G(40));return t._reactRootContainer?(es(function(){vh(null,null,t,!1,function(){t._reactRootContainer=null,t[Ti]=null})}),!0):!1};sn.unstable_batchedUpdates=Op;sn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!gh(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return vh(t,e,n,!1,i)};sn.version="18.3.1-next-f1338f8080-20240426";function Vw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vw)}catch(t){console.error(t)}}Vw(),Vv.exports=sn;var zw=Vv.exports,lg=zw;Ad.createRoot=lg.createRoot,Ad.hydrateRoot=lg.hydrateRoot;/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var iS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ll=(t,e)=>{const n=we.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:h="",children:d,..._},v)=>we.createElement("svg",{ref:v,...iS,width:s,height:s,stroke:i,strokeWidth:l?Number(o)*24/Number(s):o,className:["lucide",`lucide-${rS(t)}`,h].join(" "),..._},[...e.map(([w,I])=>we.createElement(w,I)),...Array.isArray(d)?d:[d]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=Ll("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=Ll("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=Ll("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=Ll("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=Ll("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);var cg={exports:{}};function uS(t,e,n,i){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function h(v){try{_(i.next(v))}catch(w){l(w)}}function d(v){try{_(i.throw(v))}catch(w){l(w)}}function _(v){v.done?o(v.value):s(v.value).then(h,d)}_((i=i.apply(t,[])).next())})}function cS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pd,hg;function hS(){return hg||(hg=1,pd=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var i,s,o;if(Array.isArray(e)){if(i=e.length,i!=n.length)return!1;for(s=i;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),i=o.length,i!==Object.keys(n).length)return!1;for(s=i;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[s]))return!1;for(s=i;s--!==0;){var l=o[s];if(!t(e[l],n[l]))return!1}return!0}return e!==e&&n!==n}),pd}var dS=hS(),fS=cS(dS);const wf="__googleMapsScriptId";var Wr;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(Wr||(Wr={}));class Ur{constructor({apiKey:e,authReferrerPolicy:n,channel:i,client:s,id:o=wf,language:l,libraries:h=[],mapIds:d,nonce:_,region:v,retries:w=3,url:I="https://maps.googleapis.com/maps/api/js",version:N}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=n,this.channel=i,this.client=s,this.id=o||wf,this.language=l,this.libraries=h,this.mapIds=d,this.nonce=_,this.region=v,this.retries=w,this.url=I,this.version=N,Ur.instance){if(!fS(this.options,Ur.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Ur.instance.options)}`);return Ur.instance}Ur.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Wr.FAILURE:this.done?Wr.SUCCESS:this.loading?Wr.LOADING:Wr.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,n)=>{this.loadCallback(i=>{i?n(i.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,n;if(document.getElementById(this.id)){this.callback();return}const i={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(i).forEach(o=>!i[o]&&delete i[o]),!((n=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||n===void 0)&&n.importLibrary||(o=>{let l,h,d,_="The Google Maps JavaScript API",v="google",w="importLibrary",I="__ib__",N=document,b=window;b=b[v]||(b[v]={});const z=b.maps||(b.maps={}),W=new Set,x=new URLSearchParams,P=()=>l||(l=new Promise((O,j)=>uS(this,void 0,void 0,function*(){var K;yield h=N.createElement("script"),h.id=this.id,x.set("libraries",[...W]+"");for(d in o)x.set(d.replace(/[A-Z]/g,Y=>"_"+Y[0].toLowerCase()),o[d]);x.set("callback",v+".maps."+I),h.src=this.url+"?"+x,z[I]=O,h.onerror=()=>l=j(Error(_+" could not load.")),h.nonce=this.nonce||((K=N.querySelector("script[nonce]"))===null||K===void 0?void 0:K.nonce)||"",N.head.append(h)})));z[w]?console.warn(_+" only loads once. Ignoring:",o):z[w]=(O,...j)=>W.add(O)&&P().then(()=>z[w](O,...j))})(i);const s=this.libraries.map(o=>this.importLibrary(o));s.length||s.push(this.importLibrary("core")),Promise.all(s).then(()=>this.callback(),o=>{const l=new ErrorEvent("error",{error:o});this.loadErrorCallback(l)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const n=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${n} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},n)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}const pS=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_ID:wf,Loader:Ur,get LoaderStatus(){return Wr}},Symbol.toStringTag,{value:"Module"})),mS=LT(pS);(function(t,e){(function(n,i){i(e,mS,we)})(Pv,function(n,i,s){function o(d){return d&&typeof d=="object"&&"default"in d?d:{default:d}}var l=o(s);n.Status=void 0,function(d){d.LOADING="LOADING",d.FAILURE="FAILURE",d.SUCCESS="SUCCESS"}(n.Status||(n.Status={}));const h=({children:d,render:_,callback:v,...w})=>{const[I,N]=s.useState(n.Status.LOADING);return s.useEffect(()=>{const b=new i.Loader(w),z=W=>{v&&v(W,b),N(W)};z(n.Status.LOADING),b.load().then(()=>z(n.Status.SUCCESS),()=>z(n.Status.FAILURE))},[]),I===n.Status.SUCCESS&&d?l.default.createElement(l.default.Fragment,null,d):_?_(I):l.default.createElement(l.default.Fragment,null)};n.Wrapper=h,Object.defineProperty(n,"__esModule",{value:!0})})})(cg,cg.exports);function Fw(t,e){const n=we.useRef(e);we.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const _S=1;function gS(t){return Object.freeze({__version:_S,map:t})}function vS(t,e){return Object.freeze({...t,...e})}const Uw=we.createContext(null),Bw=Uw.Provider;function Up(){const t=we.useContext(Uw);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function yS(t){function e(n,i){const{instance:s,context:o}=t(n).current;return we.useImperativeHandle(i,()=>s),n.children==null?null:mc.createElement(Bw,{value:o},n.children)}return we.forwardRef(e)}function wS(t){function e(n,i){const[s,o]=we.useState(!1),{instance:l}=t(n,o).current;we.useImperativeHandle(i,()=>l),we.useEffect(function(){s&&l.update()},[l,s,n.children]);const h=l._contentNode;return h?zw.createPortal(n.children,h):null}return we.forwardRef(e)}function ES(t){function e(n,i){const{instance:s}=t(n).current;return we.useImperativeHandle(i,()=>s),null}return we.forwardRef(e)}function jw(t,e){const n=we.useRef();we.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Bp(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function TS(t,e){return function(i,s){const o=Up(),l=t(Bp(i,o),o);return Fw(o.map,i.attribution),jw(l.current,i.eventHandlers),e(l.current,o,i,s),l}}var Ef={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(Pv,function(n){var i="1.9.4";function s(r){var a,c,f,m;for(c=1,f=arguments.length;c<f;c++){m=arguments[c];for(a in m)r[a]=m[a]}return r}var o=Object.create||function(){function r(){}return function(a){return r.prototype=a,new r}}();function l(r,a){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var f=c.call(arguments,2);return function(){return r.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++h),r._leaflet_id}function _(r,a,c){var f,m,y,C;return C=function(){f=!1,m&&(y.apply(c,m),m=!1)},y=function(){f?m=arguments:(r.apply(c,arguments),setTimeout(C,a),f=!0)},y}function v(r,a,c){var f=a[1],m=a[0],y=f-m;return r===f&&c?r:((r-m)%y+y)%y+m}function w(){return!1}function I(r,a){if(a===!1)return r;var c=Math.pow(10,a===void 0?6:a);return Math.round(r*c)/c}function N(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function b(r){return N(r).split(/\s+/)}function z(r,a){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?o(r.options):{});for(var c in a)r.options[c]=a[c];return r.options}function W(r,a,c){var f=[];for(var m in r)f.push(encodeURIComponent(c?m.toUpperCase():m)+"="+encodeURIComponent(r[m]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var x=/\{ *([\w_ -]+) *\}/g;function P(r,a){return r.replace(x,function(c,f){var m=a[f];if(m===void 0)throw new Error("No value provided for variable "+c);return typeof m=="function"&&(m=m(a)),m})}var O=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function j(r,a){for(var c=0;c<r.length;c++)if(r[c]===a)return c;return-1}var K="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Y(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var A=0;function T(r){var a=+new Date,c=Math.max(0,16-(a-A));return A=a+c,window.setTimeout(r,c)}var S=window.requestAnimationFrame||Y("RequestAnimationFrame")||T,k=window.cancelAnimationFrame||Y("CancelAnimationFrame")||Y("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function M(r,a,c){if(c&&S===T)r.call(a);else return S.call(window,l(r,a))}function D(r){r&&k.call(window,r)}var R={__proto__:null,extend:s,create:o,bind:l,get lastId(){return h},stamp:d,throttle:_,wrapNum:v,falseFn:w,formatNum:I,trim:N,splitWords:b,setOptions:z,getParamString:W,template:P,isArray:O,indexOf:j,emptyImageUrl:K,requestFn:S,cancelFn:k,requestAnimFrame:M,cancelAnimFrame:D};function Qe(){}Qe.extend=function(r){var a=function(){z(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var m in this)Object.prototype.hasOwnProperty.call(this,m)&&m!=="prototype"&&m!=="__super__"&&(a[m]=this[m]);return r.statics&&s(a,r.statics),r.includes&&(Xn(r.includes),s.apply(null,[f].concat(r.includes))),s(f,r),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},s(f.options,r.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var y=0,C=f._initHooks.length;y<C;y++)f._initHooks[y].call(this)}},a},Qe.include=function(r){var a=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=a,this.mergeOptions(r.options)),this},Qe.mergeOptions=function(r){return s(this.prototype.options,r),this},Qe.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function Xn(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=O(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var lt={on:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a);else{r=b(r);for(var m=0,y=r.length;m<y;m++)this._on(r[m],a,c)}return this},off:function(r,a,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var f in r)this._off(f,r[f],a);else{r=b(r);for(var m=arguments.length===1,y=0,C=r.length;y<C;y++)m?this._off(r[y]):this._off(r[y],a,c)}return this},_on:function(r,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(r,a,c)===!1){c===this&&(c=void 0);var m={fn:a,ctx:c};f&&(m.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(m)}},_off:function(r,a,c){var f,m,y;if(this._events&&(f=this._events[r],!!f)){if(arguments.length===1){if(this._firingCount)for(m=0,y=f.length;m<y;m++)f[m].fn=w;delete this._events[r];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var C=this._listens(r,a,c);if(C!==!1){var F=f[C];this._firingCount&&(F.fn=w,this._events[r]=f=f.slice()),f.splice(C,1)}}},fire:function(r,a,c){if(!this.listens(r,c))return this;var f=s({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var m=this._events[r];if(m){this._firingCount=this._firingCount+1||1;for(var y=0,C=m.length;y<C;y++){var F=m[y],U=F.fn;F.once&&this.off(r,U,F.ctx),U.call(F.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(r,a,c,f){typeof r!="string"&&console.warn('"string" type argument expected');var m=a;typeof a!="function"&&(f=!!a,m=void 0,c=void 0);var y=this._events&&this._events[r];if(y&&y.length&&this._listens(r,m,c)!==!1)return!0;if(f){for(var C in this._eventParents)if(this._eventParents[C].listens(r,a,c,f))return!0}return!1},_listens:function(r,a,c){if(!this._events)return!1;var f=this._events[r]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var m=0,y=f.length;m<y;m++)if(f[m].fn===a&&f[m].ctx===c)return m;return!1},once:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a,!0);else{r=b(r);for(var m=0,y=r.length;m<y;m++)this._on(r[m],a,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};lt.addEventListener=lt.on,lt.removeEventListener=lt.clearAllEventListeners=lt.off,lt.addOneTimeEventListener=lt.once,lt.fireEvent=lt.fire,lt.hasEventListeners=lt.listens;var bt=Qe.extend(lt);function H(r,a,c){this.x=c?Math.round(r):r,this.y=c?Math.round(a):a}var le=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};H.prototype={clone:function(){return new H(this.x,this.y)},add:function(r){return this.clone()._add(Q(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(Q(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new H(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new H(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=le(this.x),this.y=le(this.y),this},distanceTo:function(r){r=Q(r);var a=r.x-this.x,c=r.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(r){return r=Q(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=Q(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+I(this.x)+", "+I(this.y)+")"}};function Q(r,a,c){return r instanceof H?r:O(r)?new H(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new H(r.x,r.y):new H(r,a,c)}function ue(r,a){if(r)for(var c=a?[r,a]:r,f=0,m=c.length;f<m;f++)this.extend(c[f])}ue.prototype={extend:function(r){var a,c;if(!r)return this;if(r instanceof H||typeof r[0]=="number"||"x"in r)a=c=Q(r);else if(r=ge(r),a=r.min,c=r.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return Q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return Q(this.min.x,this.max.y)},getTopRight:function(){return Q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,c;return typeof r[0]=="number"||r instanceof H?r=Q(r):r=ge(r),r instanceof ue?(a=r.min,c=r.max):a=c=r,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=ge(r);var a=this.min,c=this.max,f=r.min,m=r.max,y=m.x>=a.x&&f.x<=c.x,C=m.y>=a.y&&f.y<=c.y;return y&&C},overlaps:function(r){r=ge(r);var a=this.min,c=this.max,f=r.min,m=r.max,y=m.x>a.x&&f.x<c.x,C=m.y>a.y&&f.y<c.y;return y&&C},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*r,m=Math.abs(a.y-c.y)*r;return ge(Q(a.x-f,a.y-m),Q(c.x+f,c.y+m))},equals:function(r){return r?(r=ge(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function ge(r,a){return!r||r instanceof ue?r:new ue(r,a)}function Ie(r,a){if(r)for(var c=a?[r,a]:r,f=0,m=c.length;f<m;f++)this.extend(c[f])}Ie.prototype={extend:function(r){var a=this._southWest,c=this._northEast,f,m;if(r instanceof ve)f=r,m=r;else if(r instanceof Ie){if(f=r._southWest,m=r._northEast,!f||!m)return this}else return r?this.extend(fe(r)||Le(r)):this;return!a&&!c?(this._southWest=new ve(f.lat,f.lng),this._northEast=new ve(m.lat,m.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(m.lat,c.lat),c.lng=Math.max(m.lng,c.lng)),this},pad:function(r){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*r,m=Math.abs(a.lng-c.lng)*r;return new Ie(new ve(a.lat-f,a.lng-m),new ve(c.lat+f,c.lng+m))},getCenter:function(){return new ve((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ve(this.getNorth(),this.getWest())},getSouthEast:function(){return new ve(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof ve||"lat"in r?r=fe(r):r=Le(r);var a=this._southWest,c=this._northEast,f,m;return r instanceof Ie?(f=r.getSouthWest(),m=r.getNorthEast()):f=m=r,f.lat>=a.lat&&m.lat<=c.lat&&f.lng>=a.lng&&m.lng<=c.lng},intersects:function(r){r=Le(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),m=r.getNorthEast(),y=m.lat>=a.lat&&f.lat<=c.lat,C=m.lng>=a.lng&&f.lng<=c.lng;return y&&C},overlaps:function(r){r=Le(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),m=r.getNorthEast(),y=m.lat>a.lat&&f.lat<c.lat,C=m.lng>a.lng&&f.lng<c.lng;return y&&C},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return r?(r=Le(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Le(r,a){return r instanceof Ie?r:new Ie(r,a)}function ve(r,a,c){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,c!==void 0&&(this.alt=+c)}ve.prototype={equals:function(r,a){if(!r)return!1;r=fe(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(a===void 0?1e-9:a)},toString:function(r){return"LatLng("+I(this.lat,r)+", "+I(this.lng,r)+")"},distanceTo:function(r){return bn.distance(this,fe(r))},wrap:function(){return bn.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,c=a/Math.cos(Math.PI/180*this.lat);return Le([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new ve(this.lat,this.lng,this.alt)}};function fe(r,a,c){return r instanceof ve?r:O(r)&&typeof r[0]!="object"?r.length===3?new ve(r[0],r[1],r[2]):r.length===2?new ve(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new ve(r.lat,"lng"in r?r.lng:r.lon,r.alt):a===void 0?null:new ve(r,a,c)}var ut={latLngToPoint:function(r,a){var c=this.projection.project(r),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(r,a){var c=this.scale(a),f=this.transformation.untransform(r,c);return this.projection.unproject(f)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(r),f=this.transformation.transform(a.min,c),m=this.transformation.transform(a.max,c);return new ue(f,m)},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?v(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?v(r.lat,this.wrapLat,!0):r.lat,f=r.alt;return new ve(c,a,f)},wrapLatLngBounds:function(r){var a=r.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,m=a.lng-c.lng;if(f===0&&m===0)return r;var y=r.getSouthWest(),C=r.getNorthEast(),F=new ve(y.lat-f,y.lng-m),U=new ve(C.lat-f,C.lng-m);return new Ie(F,U)}},bn=s({},ut,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var c=Math.PI/180,f=r.lat*c,m=a.lat*c,y=Math.sin((a.lat-r.lat)*c/2),C=Math.sin((a.lng-r.lng)*c/2),F=y*y+Math.cos(f)*Math.cos(m)*C*C,U=2*Math.atan2(Math.sqrt(F),Math.sqrt(1-F));return this.R*U}}),Wl=6378137,Oi={R:Wl,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,r.lat),-c),m=Math.sin(f*a);return new H(this.R*r.lng*a,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(r){var a=180/Math.PI;return new ve((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:function(){var r=Wl*Math.PI;return new ue([-r,-r],[r,r])}()};function Ni(r,a,c,f){if(O(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=a,this._c=c,this._d=f}Ni.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return a=a||1,r.x=a*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return a=a||1,new H((r.x/a-this._b)/this._a,(r.y/a-this._d)/this._c)}};function Jn(r,a,c,f){return new Ni(r,a,c,f)}var Ir=s({},bn,{code:"EPSG:3857",projection:Oi,transformation:function(){var r=.5/(Math.PI*Oi.R);return Jn(r,.5,-r,.5)}()}),Uo=s({},Ir,{code:"EPSG:900913"});function cs(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Bo(r,a){var c="",f,m,y,C,F,U;for(f=0,y=r.length;f<y;f++){for(F=r[f],m=0,C=F.length;m<C;m++)U=F[m],c+=(m?"L":"M")+U.x+" "+U.y;c+=a?ne.svg?"z":"x":""}return c||"M0 0"}var jo=document.documentElement.style,hs="ActiveXObject"in window,ql=hs&&!document.addEventListener,ds="msLaunchUri"in navigator&&!("documentMode"in document),fs=an("webkit"),Zl=an("android"),ps=an("android 2")||an("android 3"),Ho=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),$l=Zl&&an("Google")&&Ho<537&&!("AudioNode"in window),it=!!window.opera,pt=!ds&&an("chrome"),Pr=an("gecko")&&!fs&&!it&&!hs,Gl=!pt&&an("safari"),Wo=an("phantom"),Kl="OTransition"in jo,Sr=navigator.platform.indexOf("Win")===0,qo=hs&&"transition"in jo,ms="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ps,_s="MozPerspective"in jo,Mh=!window.L_DISABLE_3D&&(qo||ms||_s)&&!Kl&&!Wo,Ar=typeof orientation<"u"||an("mobile"),Zo=Ar&&fs,Ql=Ar&&ms,$o=!window.PointerEvent&&window.MSPointerEvent,Mi=!!(window.PointerEvent||$o),gs="ontouchstart"in window||!!window.TouchEvent,Go=!window.L_NO_TOUCH&&(gs||Mi),ei=Ar&&it,Yl=Ar&&Pr,vs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Xl=function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",w,a),window.removeEventListener("testPassiveEventSupport",w,a)}catch{}return r}(),Cr=function(){return!!document.createElement("canvas").getContext}(),ys=!!(document.createElementNS&&cs("svg").createSVGRect),wt=!!ys&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Jl=!ys&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),kr=navigator.platform.indexOf("Mac")===0,Rr=navigator.platform.indexOf("Linux")===0;function an(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var ne={ie:hs,ielt9:ql,edge:ds,webkit:fs,android:Zl,android23:ps,androidStock:$l,opera:it,chrome:pt,gecko:Pr,safari:Gl,phantom:Wo,opera12:Kl,win:Sr,ie3d:qo,webkit3d:ms,gecko3d:_s,any3d:Mh,mobile:Ar,mobileWebkit:Zo,mobileWebkit3d:Ql,msPointer:$o,pointer:Mi,touch:Go,touchNative:gs,mobileOpera:ei,mobileGecko:Yl,retina:vs,passiveEvents:Xl,canvas:Cr,svg:ys,vml:Jl,inlineSvg:wt,mac:kr,linux:Rr},ti=ne.msPointer?"MSPointerDown":"pointerdown",eu=ne.msPointer?"MSPointerMove":"pointermove",tu=ne.msPointer?"MSPointerUp":"pointerup",xr=ne.msPointer?"MSPointerCancel":"pointercancel",ws={touchstart:ti,touchmove:eu,touchend:tu,touchcancel:xr},Es={touchstart:Is,touchmove:Ts,touchend:Ts,touchcancel:Ts},Tn={},In=!1;function nu(r,a,c){return a==="touchstart"&&ru(),Es[a]?(c=Es[a].bind(this,c),r.addEventListener(ws[a],c,!1),c):(console.warn("wrong event specified:",a),w)}function iu(r,a,c){if(!ws[a]){console.warn("wrong event specified:",a);return}r.removeEventListener(ws[a],c,!1)}function Ko(r){Tn[r.pointerId]=r}function Qo(r){Tn[r.pointerId]&&(Tn[r.pointerId]=r)}function Yo(r){delete Tn[r.pointerId]}function ru(){In||(document.addEventListener(ti,Ko,!0),document.addEventListener(eu,Qo,!0),document.addEventListener(tu,Yo,!0),document.addEventListener(xr,Yo,!0),In=!0)}function Ts(r,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in Tn)a.touches.push(Tn[c]);a.changedTouches=[a],r(a)}}function Is(r,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&We(a),Ts(r,a)}function su(r){var a={},c,f;for(f in r)c=r[f],a[f]=c&&c.bind?c.bind(r):c;return r=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Xo=200;function Lr(r,a){r.addEventListener("dblclick",a);var c=0,f;function m(y){if(y.detail!==1){f=y.detail;return}if(!(y.pointerType==="mouse"||y.sourceCapabilities&&!y.sourceCapabilities.firesTouchEvents)){var C=ca(y);if(!(C.some(function(U){return U instanceof HTMLLabelElement&&U.attributes.for})&&!C.some(function(U){return U instanceof HTMLInputElement||U instanceof HTMLSelectElement}))){var F=Date.now();F-c<=Xo?(f++,f===2&&a(su(y))):f=1,c=F}}}return r.addEventListener("click",m),{dblclick:a,simDblclick:m}}function ni(r,a){r.removeEventListener("dblclick",a.dblclick),r.removeEventListener("click",a.simDblclick)}var Or=ri(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Nr=ri(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Jo=Nr==="webkitTransition"||Nr==="OTransition"?Nr+"End":"transitionend";function ea(r){return typeof r=="string"?document.getElementById(r):r}function Di(r,a){var c=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(r,null);c=f?f[a]:null}return c==="auto"?null:c}function Pe(r,a,c){var f=document.createElement(r);return f.className=a||"",c&&c.appendChild(f),f}function Ve(r){var a=r.parentNode;a&&a.removeChild(r)}function Mr(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function ii(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function bi(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function ta(r,a){if(r.classList!==void 0)return r.classList.contains(a);var c=ln(r);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function _e(r,a){if(r.classList!==void 0)for(var c=b(a),f=0,m=c.length;f<m;f++)r.classList.add(c[f]);else if(!ta(r,a)){var y=ln(r);na(r,(y?y+" ":"")+a)}}function Be(r,a){r.classList!==void 0?r.classList.remove(a):na(r,N((" "+ln(r)+" ").replace(" "+a+" "," ")))}function na(r,a){r.className.baseVal===void 0?r.className=a:r.className.baseVal=a}function ln(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function Ye(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&Ps(r,a)}function Ps(r,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):r.style.filter+=" progid:"+f+"(opacity="+a+")"}function ri(r){for(var a=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in a)return r[c];return!1}function Vn(r,a,c){var f=a||new H(0,0);r.style[Or]=(ne.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function ce(r,a){r._leaflet_pos=a,ne.any3d?Vn(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function un(r){return r._leaflet_pos||new H(0,0)}var Pn,Sn,ia;if("onselectstart"in document)Pn=function(){oe(window,"selectstart",We)},Sn=function(){De(window,"selectstart",We)};else{var Vi=ri(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Pn=function(){if(Vi){var r=document.documentElement.style;ia=r[Vi],r[Vi]="none"}},Sn=function(){Vi&&(document.documentElement.style[Vi]=ia,ia=void 0)}}function ra(){oe(window,"dragstart",We)}function sa(){De(window,"dragstart",We)}var Ss,oa;function si(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Qt(),Ss=r,oa=r.style.outlineStyle,r.style.outlineStyle="none",oe(window,"keydown",Qt))}function Qt(){Ss&&(Ss.style.outlineStyle=oa,Ss=void 0,oa=void 0,De(window,"keydown",Qt))}function aa(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function As(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var ou={__proto__:null,TRANSFORM:Or,TRANSITION:Nr,TRANSITION_END:Jo,get:ea,getStyle:Di,create:Pe,remove:Ve,empty:Mr,toFront:ii,toBack:bi,hasClass:ta,addClass:_e,removeClass:Be,setClass:na,getClass:ln,setOpacity:Ye,testProp:ri,setTransform:Vn,setPosition:ce,getPosition:un,get disableTextSelection(){return Pn},get enableTextSelection(){return Sn},disableImageDrag:ra,enableImageDrag:sa,preventOutline:si,restoreOutline:Qt,getSizedParentNode:aa,getScale:As};function oe(r,a,c,f){if(a&&typeof a=="object")for(var m in a)la(r,m,a[m],c);else{a=b(a);for(var y=0,C=a.length;y<C;y++)la(r,a[y],c,f)}return this}var cn="_leaflet_events";function De(r,a,c,f){if(arguments.length===1)au(r),delete r[cn];else if(a&&typeof a=="object")for(var m in a)ua(r,m,a[m],c);else if(a=b(a),arguments.length===2)au(r,function(F){return j(a,F)!==-1});else for(var y=0,C=a.length;y<C;y++)ua(r,a[y],c,f);return this}function au(r,a){for(var c in r[cn]){var f=c.split(/\d/)[0];(!a||a(f))&&ua(r,f,null,null,c)}}var hn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function la(r,a,c,f){var m=a+d(c)+(f?"_"+d(f):"");if(r[cn]&&r[cn][m])return this;var y=function(F){return c.call(f||r,F||window.event)},C=y;!ne.touchNative&&ne.pointer&&a.indexOf("touch")===0?y=nu(r,a,y):ne.touch&&a==="dblclick"?y=Lr(r,y):"addEventListener"in r?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?r.addEventListener(hn[a]||a,y,ne.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(y=function(F){F=F||window.event,ha(r,F)&&C(F)},r.addEventListener(hn[a],y,!1)):r.addEventListener(a,C,!1):r.attachEvent("on"+a,y),r[cn]=r[cn]||{},r[cn][m]=y}function ua(r,a,c,f,m){m=m||a+d(c)+(f?"_"+d(f):"");var y=r[cn]&&r[cn][m];if(!y)return this;!ne.touchNative&&ne.pointer&&a.indexOf("touch")===0?iu(r,a,y):ne.touch&&a==="dblclick"?ni(r,y):"removeEventListener"in r?r.removeEventListener(hn[a]||a,y,!1):r.detachEvent("on"+a,y),r[cn][m]=null}function dn(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function zi(r){return la(r,"wheel",dn),this}function Fi(r){return oe(r,"mousedown touchstart dblclick contextmenu",dn),r._leaflet_disable_click=!0,this}function We(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function Yt(r){return We(r),dn(r),this}function ca(r){if(r.composedPath)return r.composedPath();for(var a=[],c=r.target;c;)a.push(c),c=c.parentNode;return a}function Cs(r,a){if(!a)return new H(r.clientX,r.clientY);var c=As(a),f=c.boundingClientRect;return new H((r.clientX-f.left)/c.x-a.clientLeft,(r.clientY-f.top)/c.y-a.clientTop)}var je=ne.linux&&ne.chrome?window.devicePixelRatio:ne.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function lu(r){return ne.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/je:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function ha(r,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var uu={__proto__:null,on:oe,off:De,stopPropagation:dn,disableScrollPropagation:zi,disableClickPropagation:Fi,preventDefault:We,stop:Yt,getPropagationPath:ca,getMousePosition:Cs,getWheelDelta:lu,isExternalTarget:ha,addListener:oe,removeListener:De},da=bt.extend({run:function(r,a,c,f){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=un(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var c=this._startPos.add(this._offset.multiplyBy(r));a&&c._round(),ce(this._el,c),this.fire("step")},_complete:function(){D(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Ee=bt.extend({options:{crs:Ir,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=z(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(fe(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Nr&&ne.any3d&&!ne.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),oe(this._proxy,Jo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),r=this._limitCenter(fe(r),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,c.zoom):this._tryAnimatedPan(r,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(r,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return r=r||(ne.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,a)},zoomOut:function(r,a){return r=r||(ne.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,a)},setZoomAround:function(r,a,c){var f=this.getZoomScale(a),m=this.getSize().divideBy(2),y=r instanceof H?r:this.latLngToContainerPoint(r),C=y.subtract(m).multiplyBy(1-1/f),F=this.containerPointToLatLng(m.add(C));return this.setView(F,a,{zoom:c})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():Le(r);var c=Q(a.paddingTopLeft||a.padding||[0,0]),f=Q(a.paddingBottomRight||a.padding||[0,0]),m=this.getBoundsZoom(r,!1,c.add(f));if(m=typeof a.maxZoom=="number"?Math.min(a.maxZoom,m):m,m===1/0)return{center:r.getCenter(),zoom:m};var y=f.subtract(c).divideBy(2),C=this.project(r.getSouthWest(),m),F=this.project(r.getNorthEast(),m),U=this.unproject(C.add(F).divideBy(2).add(y),m);return{center:U,zoom:m}},fitBounds:function(r,a){if(r=Le(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(r=Q(r).round(),a=a||{},!r.x&&!r.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new da,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){_e(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,c){if(c=c||{},c.animate===!1||!ne.any3d)return this.setView(r,a,c);this._stop();var f=this.project(this.getCenter()),m=this.project(r),y=this.getSize(),C=this._zoom;r=fe(r),a=a===void 0?C:a;var F=Math.max(y.x,y.y),U=F*this.getZoomScale(C,a),q=m.distanceTo(f)||1,J=1.42,ae=J*J;function ye(st){var Su=st?-1:1,CT=st?U:F,kT=U*U-F*F+Su*ae*ae*q*q,RT=2*CT*ae*q,Bh=kT/RT,Jm=Math.sqrt(Bh*Bh+1)-Bh,xT=Jm<1e-9?-18:Math.log(Jm);return xT}function zt(st){return(Math.exp(st)-Math.exp(-st))/2}function _t(st){return(Math.exp(st)+Math.exp(-st))/2}function pn(st){return zt(st)/_t(st)}var Wt=ye(0);function Us(st){return F*(_t(Wt)/_t(Wt+J*st))}function IT(st){return F*(_t(Wt)*pn(Wt+J*st)-zt(Wt))/ae}function PT(st){return 1-Math.pow(1-st,1.5)}var ST=Date.now(),Ym=(ye(1)-Wt)/J,AT=c.duration?1e3*c.duration:1e3*Ym*.8;function Xm(){var st=(Date.now()-ST)/AT,Su=PT(st)*Ym;st<=1?(this._flyToFrame=M(Xm,this),this._move(this.unproject(f.add(m.subtract(f).multiplyBy(IT(Su)/q)),C),this.getScaleZoom(F/Us(Su),C),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),Xm.call(this),this},flyToBounds:function(r,a){var c=this._getBoundsCenterZoom(r,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(r){return r=Le(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,Le(r));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(r,a){a=a||{};var c=Q(a.paddingTopLeft||a.padding||[0,0]),f=Q(a.paddingBottomRight||a.padding||[0,0]),m=this.project(this.getCenter()),y=this.project(r),C=this.getPixelBounds(),F=ge([C.min.add(c),C.max.subtract(f)]),U=F.getSize();if(!F.contains(y)){this._enforcingBounds=!0;var q=y.subtract(F.getCenter()),J=F.extend(y).getSize().subtract(U);m.x+=q.x<0?-J.x:J.x,m.y+=q.y<0?-J.y:J.y,this.panTo(this.unproject(m),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),m=c.divideBy(2).round(),y=f.subtract(m);return!y.x&&!y.y?this:(r.animate&&r.pan?this.panBy(y):(r.pan&&this._rawPanBy(y),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,r):navigator.geolocation.getCurrentPosition(a,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var a=r.code,c=r.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var a=r.coords.latitude,c=r.coords.longitude,f=new ve(a,c),m=f.toBounds(r.coords.accuracy*2),y=this._locateOptions;if(y.setView){var C=this.getBoundsZoom(m);this.setView(f,y.maxZoom?Math.min(C,y.maxZoom):C)}var F={latlng:f,bounds:m,timestamp:r.timestamp};for(var U in r.coords)typeof r.coords[U]=="number"&&(F[U]=r.coords[U]);this.fire("locationfound",F)}},addHandler:function(r,a){if(!a)return this;var c=this[r]=new a(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ve(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(D(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)Ve(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),f=Pe("div",c,a||this._mapPane);return r&&(this._panes[r]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),a=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new Ie(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,c){r=Le(r),c=Q(c||[0,0]);var f=this.getZoom()||0,m=this.getMinZoom(),y=this.getMaxZoom(),C=r.getNorthWest(),F=r.getSouthEast(),U=this.getSize().subtract(c),q=ge(this.project(F,f),this.project(C,f)).getSize(),J=ne.any3d?this.options.zoomSnap:1,ae=U.x/q.x,ye=U.y/q.y,zt=a?Math.max(ae,ye):Math.min(ae,ye);return f=this.getScaleZoom(zt,f),J&&(f=Math.round(f/(J/100))*(J/100),f=a?Math.ceil(f/J)*J:Math.floor(f/J)*J),Math.max(m,Math.min(y,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new H(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var c=this._getTopLeftPoint(r,a);return new ue(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(r)/c.scale(a)},getScaleZoom:function(r,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(r*c.scale(a));return isNaN(f)?1/0:f},project:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(fe(r),a)},unproject:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(Q(r),a)},layerPointToLatLng:function(r){var a=Q(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){var a=this.project(fe(r))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(fe(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(Le(r))},distance:function(r,a){return this.options.crs.distance(fe(r),fe(a))},containerPointToLayerPoint:function(r){return Q(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return Q(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(Q(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(fe(r)))},mouseEventToContainerPoint:function(r){return Cs(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=ea(r);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");oe(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&ne.any3d,_e(r,"leaflet-container"+(ne.touch?" leaflet-touch":"")+(ne.retina?" leaflet-retina":"")+(ne.ielt9?" leaflet-oldie":"")+(ne.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=Di(r,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ce(this._mapPane,new H(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(_e(r.markerPane,"leaflet-zoom-hide"),_e(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a,c){ce(this._mapPane,new H(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var m=this._zoom!==a;this._moveStart(m,c)._move(r,a)._moveEnd(m),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,c,f){a===void 0&&(a=this._zoom);var m=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),f?c&&c.pinch&&this.fire("zoom",c):((m||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return D(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){ce(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var a=r?De:oe;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),ne.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){D(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var c=[],f,m=a==="mouseout"||a==="mouseover",y=r.target||r.srcElement,C=!1;y;){if(f=this._targets[d(y)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){C=!0;break}if(f&&f.listens(a,!0)&&(m&&!ha(y,r)||(c.push(f),m))||y===this._container)break;y=y.parentNode}return!c.length&&!C&&!m&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var a=r.target||r.srcElement;if(!(!this._loaded||a._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(a))){var c=r.type;c==="mousedown"&&si(a),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,c){if(r.type==="click"){var f=s({},r);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var m=this._findEventTargets(r,a);if(c){for(var y=[],C=0;C<c.length;C++)c[C].listens(a,!0)&&y.push(c[C]);m=y.concat(m)}if(m.length){a==="contextmenu"&&We(r);var F=m[0],U={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var q=F.getLatLng&&(!F._radius||F._radius<=10);U.containerPoint=q?this.latLngToContainerPoint(F.getLatLng()):this.mouseEventToContainerPoint(r),U.layerPoint=this.containerPointToLayerPoint(U.containerPoint),U.latlng=q?F.getLatLng():this.layerPointToLatLng(U.layerPoint)}for(C=0;C<m.length;C++)if(m[C].fire(a,U,!0),U.originalEvent._stopped||m[C].options.bubblingMouseEvents===!1&&j(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return un(this._mapPane)||new H(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){var c=r&&a!==void 0?this._getNewPixelOrigin(r,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var c=this.getSize()._divideBy(2);return this.project(r,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(r,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return ge([this.project(r.getSouthWest(),a)._subtract(f),this.project(r.getNorthWest(),a)._subtract(f),this.project(r.getSouthEast(),a)._subtract(f),this.project(r.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,c){if(!c)return r;var f=this.project(r,a),m=this.getSize().divideBy(2),y=new ue(f.subtract(m),f.add(m)),C=this._getBoundsOffset(y,c,a);return Math.abs(C.x)<=1&&Math.abs(C.y)<=1?r:this.unproject(f.add(C),a)},_limitOffset:function(r,a){if(!a)return r;var c=this.getPixelBounds(),f=new ue(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(r,a,c){var f=ge(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),m=f.min.subtract(r.min),y=f.max.subtract(r.max),C=this._rebound(m.x,-y.x),F=this._rebound(m.y,-y.y);return new H(C,F)},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),c=this.getMaxZoom(),f=ne.any3d?this.options.zoomSnap:1;return f&&(r=Math.round(r/f)*f),Math.max(a,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Be(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var c=this._getCenterOffset(r)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var r=this._proxy=Pe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var c=Or,f=this._proxy.style[c];Vn(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ve(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();Vn(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),m=this._getCenterOffset(r)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(m)?!1:(M(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,a,!0)},this),!0)},_animateZoom:function(r,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,_e(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Be(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ks(r,a){return new Ee(r,a)}var Ht=Qe.extend({options:{position:"topright"},initialize:function(r){z(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),c=this.getPosition(),f=r._controlCorners[c];return _e(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ve(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),Vt=function(r){return new Ht(r)};Ee.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",c=this._controlContainer=Pe("div",a+"control-container",this._container);function f(m,y){var C=a+m+" "+a+y;r[m+y]=Pe("div",C,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)Ve(this._controlCorners[r]);Ve(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var fa=Ht.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(r,a,c){z(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in r)this._addLayer(r[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Ht.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){_e(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(_e(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):Be(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Be(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=Pe("div",r),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),Fi(a),zi(a);var f=this._section=Pe("section",r+"-list");c&&(this._map.on("click",this.collapse,this),oe(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var m=this._layersLink=Pe("a",r+"-toggle",a);m.href="#",m.title="Layers",m.setAttribute("role","button"),oe(m,{keydown:function(y){y.keyCode===13&&this._expandSafely()},click:function(y){We(y),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Pe("div",r+"-base",f),this._separator=Pe("div",r+"-separator",f),this._overlaysList=Pe("div",r+"-overlays",f),a.appendChild(f)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,m){return this.options.sortFunction(f.layer,m.layer,f.name,m.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Mr(this._baseLayersList),Mr(this._overlaysList),this._layerControlInputs=[];var r,a,c,f,m=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,r=r||!f.overlay,m+=f.overlay?0:1;return this.options.hideSingleBase&&(r=r&&m>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(d(r.target)),c=a.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(r,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(r){var a=document.createElement("label"),c=this._map.hasLayer(r.layer),f;r.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(r.layer),oe(f,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+r.name;var y=document.createElement("span");a.appendChild(y),y.appendChild(f),y.appendChild(m);var C=r.overlay?this._overlaysList:this._baseLayersList;return C.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,a,c,f=[],m=[];this._handlingClick=!0;for(var y=r.length-1;y>=0;y--)a=r[y],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||m.push(c);for(y=0;y<m.length;y++)this._map.hasLayer(m[y])&&this._map.removeLayer(m[y]);for(y=0;y<f.length;y++)this._map.hasLayer(f[y])||this._map.addLayer(f[y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,a,c,f=this._map.getZoom(),m=r.length-1;m>=0;m--)a=r[m],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,oe(r,"click",We),this.expand();var a=this;setTimeout(function(){De(r,"click",We),a._preventClick=!1})}}),Dh=function(r,a,c){return new fa(r,a,c)},oi=Ht.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",c=Pe("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,c,f,m){var y=Pe("a",c,f);return y.innerHTML=r,y.href="#",y.title=a,y.setAttribute("role","button"),y.setAttribute("aria-label",a),Fi(y),oe(y,"click",Yt),oe(y,"click",m,this),oe(y,"click",this._refocusOnMap,this),y},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";Be(this._zoomInButton,a),Be(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(_e(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(_e(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ee.mergeOptions({zoomControl:!0}),Ee.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new oi,this.addControl(this.zoomControl))});var cu=function(r){return new oi(r)},Rs=Ht.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",c=Pe("div",a),f=this.options;return this._addScales(f,a+"-line",c),r.on(f.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,c){r.metric&&(this._mScale=Pe("div",a,c)),r.imperial&&(this._iScale=Pe("div",a,c))},_update:function(){var r=this._map,a=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/r)},_updateImperial:function(r){var a=r*3.2808399,c,f,m;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(m=this._getRoundNum(a),this._updateScale(this._iScale,m+" ft",m/a))},_updateScale:function(r,a,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),c=r/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),xs=function(r){return new Rs(r)},hu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ui=Ht.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ne.inlineSvg?hu+" ":"")+"Leaflet</a>"},initialize:function(r){z(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Pe("div","leaflet-control-attribution"),Fi(this._container);for(var a in r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Ee.mergeOptions({attributionControl:!0}),Ee.addInitHook(function(){this.options.attributionControl&&new Ui().addTo(this)});var bh=function(r){return new Ui(r)};Ht.Layers=fa,Ht.Zoom=oi,Ht.Scale=Rs,Ht.Attribution=Ui,Vt.layers=Dh,Vt.zoom=cu,Vt.scale=xs,Vt.attribution=bh;var Xt=Qe.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Xt.addTo=function(r,a){return r.addHandler(a,this),this};var Dr={Events:lt},pa=ne.touch?"touchstart mousedown":"mousedown",An=bt.extend({options:{clickTolerance:3},initialize:function(r,a,c,f){z(this,f),this._element=r,this._dragStartTarget=a||r,this._preventOutline=c},enable:function(){this._enabled||(oe(this._dragStartTarget,pa,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(An._dragging===this&&this.finishDrag(!0),De(this._dragStartTarget,pa,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!ta(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){An._dragging===this&&this.finishDrag();return}if(!(An._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(An._dragging=this,this._preventOutline&&si(this._element),ra(),Pn(),!this._moving)){this.fire("down");var a=r.touches?r.touches[0]:r,c=aa(this._element);this._startPoint=new H(a.clientX,a.clientY),this._startPos=un(this._element),this._parentScale=As(c);var f=r.type==="mousedown";oe(document,f?"mousemove":"touchmove",this._onMove,this),oe(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var a=r.touches&&r.touches.length===1?r.touches[0]:r,c=new H(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,We(r),this._moved||(this.fire("dragstart"),this._moved=!0,_e(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),_e(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),ce(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){Be(document.body,"leaflet-dragging"),this._lastTarget&&(Be(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),De(document,"mousemove touchmove",this._onMove,this),De(document,"mouseup touchend touchcancel",this._onUp,this),sa(),Sn();var a=this._moved&&this._moving;this._moving=!1,An._dragging=!1,a&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function Ls(r,a,c){var f,m=[1,4,2,8],y,C,F,U,q,J,ae,ye;for(y=0,J=r.length;y<J;y++)r[y]._code=zn(r[y],a);for(F=0;F<4;F++){for(ae=m[F],f=[],y=0,J=r.length,C=J-1;y<J;C=y++)U=r[y],q=r[C],U._code&ae?q._code&ae||(ye=mt(q,U,ae,a,c),ye._code=zn(ye,a),f.push(ye)):(q._code&ae&&(ye=mt(q,U,ae,a,c),ye._code=zn(ye,a),f.push(ye)),f.push(U));r=f}return r}function Os(r,a){var c,f,m,y,C,F,U,q,J;if(!r||r.length===0)throw new Error("latlngs not passed");u(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var ae=fe([0,0]),ye=Le(r),zt=ye.getNorthWest().distanceTo(ye.getSouthWest())*ye.getNorthEast().distanceTo(ye.getNorthWest());zt<1700&&(ae=Ns(r));var _t=r.length,pn=[];for(c=0;c<_t;c++){var Wt=fe(r[c]);pn.push(a.project(fe([Wt.lat-ae.lat,Wt.lng-ae.lng])))}for(F=U=q=0,c=0,f=_t-1;c<_t;f=c++)m=pn[c],y=pn[f],C=m.y*y.x-y.y*m.x,U+=(m.x+y.x)*C,q+=(m.y+y.y)*C,F+=C*3;F===0?J=pn[0]:J=[U/F,q/F];var Us=a.unproject(Q(J));return fe([Us.lat+ae.lat,Us.lng+ae.lng])}function Ns(r){for(var a=0,c=0,f=0,m=0;m<r.length;m++){var y=fe(r[m]);a+=y.lat,c+=y.lng,f++}return fe([a/f,c/f])}var Ms={__proto__:null,clipPolygon:Ls,polygonCenter:Os,centroid:Ns};function ma(r,a){if(!a||!r.length)return r.slice();var c=a*a;return r=fu(r,c),r=du(r,c),r}function _a(r,a,c){return Math.sqrt(fn(r,a,c,!0))}function ai(r,a,c){return fn(r,a,c)}function du(r,a){var c=r.length,f=typeof Uint8Array<"u"?Uint8Array:Array,m=new f(c);m[0]=m[c-1]=1,Ds(r,m,a,0,c-1);var y,C=[];for(y=0;y<c;y++)m[y]&&C.push(r[y]);return C}function Ds(r,a,c,f,m){var y=0,C,F,U;for(F=f+1;F<=m-1;F++)U=fn(r[F],r[f],r[m],!0),U>y&&(C=F,y=U);y>c&&(a[C]=1,Ds(r,a,c,f,C),Ds(r,a,c,C,m))}function fu(r,a){for(var c=[r[0]],f=1,m=0,y=r.length;f<y;f++)pu(r[f],r[m])>a&&(c.push(r[f]),m=f);return m<y-1&&c.push(r[y-1]),c}var ga;function br(r,a,c,f,m){var y=f?ga:zn(r,c),C=zn(a,c),F,U,q;for(ga=C;;){if(!(y|C))return[r,a];if(y&C)return!1;F=y||C,U=mt(r,a,F,c,m),q=zn(U,c),F===y?(r=U,y=q):(a=U,C=q)}}function mt(r,a,c,f,m){var y=a.x-r.x,C=a.y-r.y,F=f.min,U=f.max,q,J;return c&8?(q=r.x+y*(U.y-r.y)/C,J=U.y):c&4?(q=r.x+y*(F.y-r.y)/C,J=F.y):c&2?(q=U.x,J=r.y+C*(U.x-r.x)/y):c&1&&(q=F.x,J=r.y+C*(F.x-r.x)/y),new H(q,J,m)}function zn(r,a){var c=0;return r.x<a.min.x?c|=1:r.x>a.max.x&&(c|=2),r.y<a.min.y?c|=4:r.y>a.max.y&&(c|=8),c}function pu(r,a){var c=a.x-r.x,f=a.y-r.y;return c*c+f*f}function fn(r,a,c,f){var m=a.x,y=a.y,C=c.x-m,F=c.y-y,U=C*C+F*F,q;return U>0&&(q=((r.x-m)*C+(r.y-y)*F)/U,q>1?(m=c.x,y=c.y):q>0&&(m+=C*q,y+=F*q)),C=r.x-m,F=r.y-y,f?C*C+F*F:new H(m,y)}function u(r){return!O(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function p(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),u(r)}function g(r,a){var c,f,m,y,C,F,U,q;if(!r||r.length===0)throw new Error("latlngs not passed");u(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var J=fe([0,0]),ae=Le(r),ye=ae.getNorthWest().distanceTo(ae.getSouthWest())*ae.getNorthEast().distanceTo(ae.getNorthWest());ye<1700&&(J=Ns(r));var zt=r.length,_t=[];for(c=0;c<zt;c++){var pn=fe(r[c]);_t.push(a.project(fe([pn.lat-J.lat,pn.lng-J.lng])))}for(c=0,f=0;c<zt-1;c++)f+=_t[c].distanceTo(_t[c+1])/2;if(f===0)q=_t[0];else for(c=0,y=0;c<zt-1;c++)if(C=_t[c],F=_t[c+1],m=C.distanceTo(F),y+=m,y>f){U=(y-f)/m,q=[F.x-U*(F.x-C.x),F.y-U*(F.y-C.y)];break}var Wt=a.unproject(Q(q));return fe([Wt.lat+J.lat,Wt.lng+J.lng])}var E={__proto__:null,simplify:ma,pointToSegmentDistance:_a,closestPointOnSegment:ai,clipSegment:br,_getEdgeIntersection:mt,_getBitCode:zn,_sqClosestPointOnSegment:fn,isFlat:u,_flat:p,polylineCenter:g},V={project:function(r){return new H(r.lng,r.lat)},unproject:function(r){return new ve(r.y,r.x)},bounds:new ue([-180,-90],[180,90])},B={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ue([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var a=Math.PI/180,c=this.R,f=r.lat*a,m=this.R_MINOR/c,y=Math.sqrt(1-m*m),C=y*Math.sin(f),F=Math.tan(Math.PI/4-f/2)/Math.pow((1-C)/(1+C),y/2);return f=-c*Math.log(Math.max(F,1e-10)),new H(r.lng*a*c,f)},unproject:function(r){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,m=Math.sqrt(1-f*f),y=Math.exp(-r.y/c),C=Math.PI/2-2*Math.atan(y),F=0,U=.1,q;F<15&&Math.abs(U)>1e-7;F++)q=m*Math.sin(C),q=Math.pow((1-q)/(1+q),m/2),U=Math.PI/2-2*Math.atan(y*q)-C,C+=U;return new ve(C*a,r.x*a/c)}},X={__proto__:null,LonLat:V,Mercator:B,SphericalMercator:Oi},Oe=s({},bn,{code:"EPSG:3395",projection:B,transformation:function(){var r=.5/(Math.PI*B.R);return Jn(r,.5,-r,.5)}()}),rt=s({},bn,{code:"EPSG:4326",projection:V,transformation:Jn(1/180,1,-1/180,.5)}),Ce=s({},ut,{projection:V,transformation:Jn(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var c=a.lng-r.lng,f=a.lat-r.lat;return Math.sqrt(c*c+f*f)},infinite:!0});ut.Earth=bn,ut.EPSG3395=Oe,ut.EPSG3857=Ir,ut.EPSG900913=Uo,ut.EPSG4326=rt,ut.Simple=Ce;var be=bt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Ee.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(r);return this._layers[a]?this:(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var a=d(r);return this._layers[a]?(this._loaded&&r.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},_addLayers:function(r){r=r?O(r)?r:[r]:[];for(var a=0,c=r.length;a<c;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=d(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var m=this._zoomBoundLayers[f].options;r=m.minZoom===void 0?r:Math.min(r,m.minZoom),a=m.maxZoom===void 0?a:Math.max(a,m.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var qe=be.extend({initialize:function(r,a){z(this,a),this._layers={};var c,f;if(r)for(c=0,f=r.length;c<f;c++)this.addLayer(r[c])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){var a=typeof r=="number"?r:this.getLayerId(r);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[r]&&f[r].apply(f,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),Bi=function(r,a){return new qe(r,a)},et=qe.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),qe.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),qe.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new Ie;for(var a in this._layers){var c=this._layers[a];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),bs=function(r,a){return new et(r,a)},Fn=Qe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){z(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(r,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var m=Q(f),y=Q(a==="shadow"&&c.shadowAnchor||c.iconAnchor||m&&m.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(c.className||""),y&&(r.style.marginLeft=-y.x+"px",r.style.marginTop=-y.y+"px"),m&&(r.style.width=m.x+"px",r.style.height=m.y+"px")},_createImg:function(r,a){return a=a||document.createElement("img"),a.src=r,a},_getIconUrl:function(r){return ne.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function rT(r){return new Fn(r)}var va=Fn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof va.imagePath!="string"&&(va.imagePath=this._detectIconPath()),(this.options.imagePath||va.imagePath)+Fn.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var a=function(c,f,m){var y=f.exec(c);return y&&y[m]};return r=a(r,/^url\((['"])?(.+)\1\)$/,2),r&&a(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Pe("div","leaflet-default-icon-path",document.body),a=Di(r,"background-image")||Di(r,"backgroundImage");if(document.body.removeChild(r),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Om=Xt.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new An(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),_e(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Be(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,y=un(a._icon),C=c.getPixelBounds(),F=c.getPixelOrigin(),U=ge(C.min._subtract(F).add(m),C.max._subtract(F).subtract(m));if(!U.contains(y)){var q=Q((Math.max(U.max.x,y.x)-U.max.x)/(C.max.x-U.max.x)-(Math.min(U.min.x,y.x)-U.min.x)/(C.min.x-U.min.x),(Math.max(U.max.y,y.y)-U.max.y)/(C.max.y-U.max.y)-(Math.min(U.min.y,y.y)-U.min.y)/(C.min.y-U.min.y)).multiplyBy(f);c.panBy(q,{animate:!1}),this._draggable._newPos._add(q),this._draggable._startPos._add(q),ce(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=M(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(D(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,c=a._shadow,f=un(a._icon),m=a._map.layerPointToLatLng(f);c&&ce(c,f),a._latlng=m,r.latlng=m,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){D(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),mu=be.extend({options:{icon:new va,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){z(this,a),this._latlng=fe(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=fe(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),_e(c,a),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&oe(c,"focus",this._panOnFocus,this);var m=r.icon.createShadow(this._shadow),y=!1;m!==this._shadow&&(this._removeShadow(),y=!0),m&&(_e(m,a),m.alt=""),this._shadow=m,r.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&y&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&De(this._icon,"focus",this._panOnFocus,this),Ve(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ve(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&ce(this._icon,r),this._shadow&&ce(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(_e(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Om)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Om(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Ye(this._icon,r),this._shadow&&Ye(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var a=this.options.icon.options,c=a.iconSize?Q(a.iconSize):Q(0,0),f=a.iconAnchor?Q(a.iconAnchor):Q(0,0);r.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function sT(r,a){return new mu(r,a)}var ji=be.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return z(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),_u=ji.extend({options:{fill:!0,radius:10},initialize:function(r,a){z(this,a),this._latlng=fe(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=fe(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return ji.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,c=this._clickTolerance(),f=[r+c,a+c];this._pxBounds=new ue(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function oT(r,a){return new _u(r,a)}var Vh=_u.extend({initialize:function(r,a,c){if(typeof a=="number"&&(a=s({},c,{radius:a})),z(this,a),this._latlng=fe(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new Ie(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:ji.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===bn.distance){var m=Math.PI/180,y=this._mRadius/bn.R/m,C=c.project([a+y,r]),F=c.project([a-y,r]),U=C.add(F).divideBy(2),q=c.unproject(U).lat,J=Math.acos((Math.cos(y*m)-Math.sin(a*m)*Math.sin(q*m))/(Math.cos(a*m)*Math.cos(q*m)))/m;(isNaN(J)||J===0)&&(J=y/Math.cos(Math.PI/180*a)),this._point=U.subtract(c.getPixelOrigin()),this._radius=isNaN(J)?0:U.x-c.project([q,r-J]).x,this._radiusY=U.y-C.y}else{var ae=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(ae).x}this._updateBounds()}});function aT(r,a,c){return new Vh(r,a,c)}var li=ji.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){z(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var a=1/0,c=null,f=fn,m,y,C=0,F=this._parts.length;C<F;C++)for(var U=this._parts[C],q=1,J=U.length;q<J;q++){m=U[q-1],y=U[q];var ae=f(r,m,y,!0);ae<a&&(a=ae,c=f(r,m,y))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return g(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=fe(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new Ie,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return u(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],c=u(r),f=0,m=r.length;f<m;f++)c?(a[f]=fe(r[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(r[f]);return a},_project:function(){var r=new ue;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new H(r,r);this._rawPxBounds&&(this._pxBounds=new ue([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(r,a,c){var f=r[0]instanceof ve,m=r.length,y,C;if(f){for(C=[],y=0;y<m;y++)C[y]=this._map.latLngToLayerPoint(r[y]),c.extend(C[y]);a.push(C)}else for(y=0;y<m;y++)this._projectLatlngs(r[y],a,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,m,y,C,F,U;for(c=0,m=0,y=this._rings.length;c<y;c++)for(U=this._rings[c],f=0,C=U.length;f<C-1;f++)F=br(U[f],U[f+1],r,f,!0),F&&(a[m]=a[m]||[],a[m].push(F[0]),(F[1]!==U[f+1]||f===C-2)&&(a[m].push(F[1]),m++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,c=0,f=r.length;c<f;c++)r[c]=ma(r[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var c,f,m,y,C,F,U=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,y=this._parts.length;c<y;c++)for(F=this._parts[c],f=0,C=F.length,m=C-1;f<C;m=f++)if(!(!a&&f===0)&&_a(r,F[m],F[f])<=U)return!0;return!1}});function lT(r,a){return new li(r,a)}li._flat=p;var Vs=li.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Os(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var a=li.prototype._convertLatLngs.call(this,r),c=a.length;return c>=2&&a[0]instanceof ve&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(r){li.prototype._setLatLngs.call(this,r),u(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,c=new H(a,a);if(r=new ue(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,m=this._rings.length,y;f<m;f++)y=Ls(this._rings[f],r,!0),y.length&&this._parts.push(y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var a=!1,c,f,m,y,C,F,U,q;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(y=0,U=this._parts.length;y<U;y++)for(c=this._parts[y],C=0,q=c.length,F=q-1;C<q;F=C++)f=c[C],m=c[F],f.y>r.y!=m.y>r.y&&r.x<(m.x-f.x)*(r.y-f.y)/(m.y-f.y)+f.x&&(a=!a);return a||li.prototype._containsPoint.call(this,r,!0)}});function uT(r,a){return new Vs(r,a)}var ui=et.extend({initialize:function(r,a){z(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var a=O(r)?r:r.features,c,f,m;if(a){for(c=0,f=a.length;c<f;c++)m=a[c],(m.geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var y=this.options;if(y.filter&&!y.filter(r))return this;var C=gu(r,y);return C?(C.feature=wu(r),C.defaultOptions=C.options,this.resetStyle(C),y.onEachFeature&&y.onEachFeature(r,C),this.addLayer(C)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&(typeof a=="function"&&(a=a(r.feature)),r.setStyle(a))}});function gu(r,a){var c=r.type==="Feature"?r.geometry:r,f=c?c.coordinates:null,m=[],y=a&&a.pointToLayer,C=a&&a.coordsToLatLng||zh,F,U,q,J;if(!f&&!c)return null;switch(c.type){case"Point":return F=C(f),Nm(y,r,F,a);case"MultiPoint":for(q=0,J=f.length;q<J;q++)F=C(f[q]),m.push(Nm(y,r,F,a));return new et(m);case"LineString":case"MultiLineString":return U=vu(f,c.type==="LineString"?0:1,C),new li(U,a);case"Polygon":case"MultiPolygon":return U=vu(f,c.type==="Polygon"?1:2,C),new Vs(U,a);case"GeometryCollection":for(q=0,J=c.geometries.length;q<J;q++){var ae=gu({geometry:c.geometries[q],type:"Feature",properties:r.properties},a);ae&&m.push(ae)}return new et(m);case"FeatureCollection":for(q=0,J=c.features.length;q<J;q++){var ye=gu(c.features[q],a);ye&&m.push(ye)}return new et(m);default:throw new Error("Invalid GeoJSON object.")}}function Nm(r,a,c,f){return r?r(a,c):new mu(c,f&&f.markersInheritOptions&&f)}function zh(r){return new ve(r[1],r[0],r[2])}function vu(r,a,c){for(var f=[],m=0,y=r.length,C;m<y;m++)C=a?vu(r[m],a-1,c):(c||zh)(r[m]),f.push(C);return f}function Fh(r,a){return r=fe(r),r.alt!==void 0?[I(r.lng,a),I(r.lat,a),I(r.alt,a)]:[I(r.lng,a),I(r.lat,a)]}function yu(r,a,c,f){for(var m=[],y=0,C=r.length;y<C;y++)m.push(a?yu(r[y],u(r[y])?0:a-1,c,f):Fh(r[y],f));return!a&&c&&m.length>0&&m.push(m[0].slice()),m}function zs(r,a){return r.feature?s({},r.feature,{geometry:a}):wu(a)}function wu(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var Uh={toGeoJSON:function(r){return zs(this,{type:"Point",coordinates:Fh(this.getLatLng(),r)})}};mu.include(Uh),Vh.include(Uh),_u.include(Uh),li.include({toGeoJSON:function(r){var a=!u(this._latlngs),c=yu(this._latlngs,a?1:0,!1,r);return zs(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),Vs.include({toGeoJSON:function(r){var a=!u(this._latlngs),c=a&&!u(this._latlngs[0]),f=yu(this._latlngs,c?2:a?1:0,!0,r);return a||(f=[f]),zs(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),qe.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(r).geometry.coordinates)}),zs(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(r);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(m){if(m.toGeoJSON){var y=m.toGeoJSON(r);if(c)f.push(y.geometry);else{var C=wu(y);C.type==="FeatureCollection"?f.push.apply(f,C.features):f.push(C)}}}),c?zs(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Mm(r,a){return new ui(r,a)}var cT=Mm,Eu=be.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,c){this._url=r,this._bounds=Le(a),z(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(_e(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ve(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&ii(this._image),this},bringToBack:function(){return this._map&&bi(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=Le(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",a=this._image=r?this._url:Pe("img");if(_e(a,"leaflet-image-layer"),this._zoomAnimated&&_e(a,"leaflet-zoom-animated"),this.options.className&&_e(a,this.options.className),a.onselectstart=w,a.onmousemove=w,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Vn(this._image,c,a)},_reset:function(){var r=this._image,a=new ue(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();ce(r,a.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){Ye(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),hT=function(r,a,c){return new Eu(r,a,c)},Dm=Eu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",a=this._image=r?this._url:Pe("video");if(_e(a,"leaflet-image-layer"),this._zoomAnimated&&_e(a,"leaflet-zoom-animated"),this.options.className&&_e(a,this.options.className),a.onselectstart=w,a.onmousemove=w,a.onloadeddata=l(this.fire,this,"load"),r){for(var c=a.getElementsByTagName("source"),f=[],m=0;m<c.length;m++)f.push(c[m].src);this._url=c.length>0?f:[a.src];return}O(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var y=0;y<this._url.length;y++){var C=Pe("source");C.src=this._url[y],a.appendChild(C)}}});function dT(r,a,c){return new Dm(r,a,c)}var bm=Eu.extend({_initImage:function(){var r=this._image=this._url;_e(r,"leaflet-image-layer"),this._zoomAnimated&&_e(r,"leaflet-zoom-animated"),this.options.className&&_e(r,this.options.className),r.onselectstart=w,r.onmousemove=w}});function fT(r,a,c){return new bm(r,a,c)}var Un=be.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,a){r&&(r instanceof ve||O(r))?(this._latlng=fe(r),z(this,a)):(z(this,r),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Ye(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Ye(this._container,1),this.bringToFront(),this.options.interactive&&(_e(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Ye(this._container,0),this._removeTimeout=setTimeout(l(Ve,void 0,this._container),200)):Ve(this._container),this.options.interactive&&(Be(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=fe(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ii(this._container),this},bringToBack:function(){return this._map&&bi(this._container),this},_prepareOpen:function(r){var a=this._source;if(!a._map)return!1;if(a instanceof et){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!r)if(a.getCenter)r=a.getCenter();else if(a.getLatLng)r=a.getLatLng();else if(a.getBounds)r=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=Q(this.options.offset),c=this._getAnchor();this._zoomAnimated?ce(this._container,r.add(c)):a=a.add(r).add(c);var f=this._containerBottom=-a.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}});Ee.include({_initOverlay:function(r,a,c,f){var m=a;return m instanceof r||(m=new r(f).setContent(a)),c&&m.setLatLng(c),m}}),be.include({_initOverlay:function(r,a,c,f){var m=c;return m instanceof r?(z(m,f),m._source=this):(m=a&&!f?a:new r(f,this),m.setContent(c)),m}});var Tu=Un.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,Un.prototype.openOn.call(this,r)},onAdd:function(r){Un.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ji||this._source.on("preclick",dn))},onRemove:function(r){Un.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ji||this._source.off("preclick",dn))},getEvents:function(){var r=Un.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",a=this._container=Pe("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Pe("div",r+"-content-wrapper",a);if(this._contentNode=Pe("div",r+"-content",c),Fi(a),zi(this._contentNode),oe(a,"contextmenu",dn),this._tipContainer=Pe("div",r+"-tip-container",a),this._tip=Pe("div",r+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Pe("a",r+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',oe(f,"click",function(m){We(m),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=r.offsetHeight,m=this.options.maxHeight,y="leaflet-popup-scrolled";m&&f>m?(a.height=m+"px",_e(r,y)):Be(r,y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();ce(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,a=parseInt(Di(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,m=new H(this._containerLeft,-c-this._containerBottom);m._add(un(this._container));var y=r.layerPointToContainerPoint(m),C=Q(this.options.autoPanPadding),F=Q(this.options.autoPanPaddingTopLeft||C),U=Q(this.options.autoPanPaddingBottomRight||C),q=r.getSize(),J=0,ae=0;y.x+f+U.x>q.x&&(J=y.x+f-q.x+U.x),y.x-J-F.x<0&&(J=y.x-F.x),y.y+c+U.y>q.y&&(ae=y.y+c-q.y+U.y),y.y-ae-F.y<0&&(ae=y.y-F.y),(J||ae)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([J,ae]))}},_getAnchor:function(){return Q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),pT=function(r,a){return new Tu(r,a)};Ee.mergeOptions({closePopupOnClick:!0}),Ee.include({openPopup:function(r,a,c){return this._initOverlay(Tu,r,a,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),be.include({bindPopup:function(r,a){return this._popup=this._initOverlay(Tu,this._popup,r,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof et||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){Yt(r);var a=r.layer||r.target;if(this._popup._source===a&&!(a instanceof ji)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=a,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Iu=Un.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){Un.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){Un.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=Un.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",a=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Pe("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,c,f=this._map,m=this._container,y=f.latLngToContainerPoint(f.getCenter()),C=f.layerPointToContainerPoint(r),F=this.options.direction,U=m.offsetWidth,q=m.offsetHeight,J=Q(this.options.offset),ae=this._getAnchor();F==="top"?(a=U/2,c=q):F==="bottom"?(a=U/2,c=0):F==="center"?(a=U/2,c=q/2):F==="right"?(a=0,c=q/2):F==="left"?(a=U,c=q/2):C.x<y.x?(F="right",a=0,c=q/2):(F="left",a=U+(J.x+ae.x)*2,c=q/2),r=r.subtract(Q(a,c,!0)).add(J).add(ae),Be(m,"leaflet-tooltip-right"),Be(m,"leaflet-tooltip-left"),Be(m,"leaflet-tooltip-top"),Be(m,"leaflet-tooltip-bottom"),_e(m,"leaflet-tooltip-"+F),ce(m,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Ye(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return Q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),mT=function(r,a){return new Iu(r,a)};Ee.include({openTooltip:function(r,a,c){return this._initOverlay(Iu,r,a,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),be.include({bindTooltip:function(r,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Iu,this._tooltip,r,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var a=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof et||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&(oe(a,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),oe(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var a=r.latlng,c,f;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var Vm=Fn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Mr(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=Q(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function _T(r){return new Vm(r)}Fn.Default=va;var ya=be.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ne.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){z(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),Ve(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ii(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(bi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof H?r:new H(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var a=this.getPane().children,c=-r(-1/0,1/0),f=0,m=a.length,y;f<m;f++)y=a[f].style.zIndex,a[f]!==this._container&&y&&(c=r(c,+y));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ne.ielt9){Ye(this._container,this.options.opacity);var r=+new Date,a=!1,c=!1;for(var f in this._tiles){var m=this._tiles[f];if(!(!m.current||!m.loaded)){var y=Math.min(1,(r-m.loaded)/200);Ye(m.el,y),y<1?a=!0:(m.active?c=!0:this._onOpaqueTile(m),m.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(D(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=Pe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=a-Math.abs(r-c),this._onUpdateLevel(c)):(Ve(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[r],m=this._map;return f||(f=this._levels[r]={},f.el=Pe("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=m.project(m.unproject(m.getPixelOrigin()),r).round(),f.zoom=r,this._setZoomTransform(f,m.getCenter(),m.getZoom()),w(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var r,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)a=this._tiles[r],a.retain=a.current;for(r in this._tiles)if(a=this._tiles[r],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)Ve(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,c,f){var m=Math.floor(r/2),y=Math.floor(a/2),C=c-1,F=new H(+m,+y);F.z=+C;var U=this._tileCoordsToKey(F),q=this._tiles[U];return q&&q.active?(q.retain=!0,!0):(q&&q.loaded&&(q.retain=!0),C>f?this._retainParent(m,y,C,f):!1)},_retainChildren:function(r,a,c,f){for(var m=2*r;m<2*r+2;m++)for(var y=2*a;y<2*a+2;y++){var C=new H(m,y);C.z=c+1;var F=this._tileCoordsToKey(C),U=this._tiles[F];if(U&&U.active){U.retain=!0;continue}else U&&U.loaded&&(U.retain=!0);c+1<f&&this._retainChildren(m,y,c+1,f)}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return a.minNativeZoom!==void 0&&r<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,c,f){var m=Math.round(a);this.options.maxZoom!==void 0&&m>this.options.maxZoom||this.options.minZoom!==void 0&&m<this.options.minZoom?m=void 0:m=this._clampZoom(m);var y=this.options.updateWhenZooming&&m!==this._tileZoom;(!f||y)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),m!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,a)},_setZoomTransform:function(r,a,c){var f=this._map.getZoomScale(c,r.zoom),m=r.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();ne.any3d?Vn(r.el,m,f):ce(r.el,m)},_resetGrid:function(){var r=this._map,a=r.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(r.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(r.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),m=a.project(r,this._tileZoom).floor(),y=a.getSize().divideBy(f*2);return new ue(m.subtract(y),m.add(y))},_update:function(r){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(r===void 0&&(r=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(r),m=this._pxBoundsToTileRange(f),y=m.getCenter(),C=[],F=this.options.keepBuffer,U=new ue(m.getBottomLeft().subtract([F,-F]),m.getTopRight().add([F,-F]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var q in this._tiles){var J=this._tiles[q].coords;(J.z!==this._tileZoom||!U.contains(new H(J.x,J.y)))&&(this._tiles[q].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var ae=m.min.y;ae<=m.max.y;ae++)for(var ye=m.min.x;ye<=m.max.x;ye++){var zt=new H(ye,ae);if(zt.z=this._tileZoom,!!this._isValidTile(zt)){var _t=this._tiles[this._tileCoordsToKey(zt)];_t?_t.current=!0:C.push(zt)}}if(C.sort(function(Wt,Us){return Wt.distanceTo(y)-Us.distanceTo(y)}),C.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var pn=document.createDocumentFragment();for(ye=0;ye<C.length;ye++)this._addTile(C[ye],pn);this._level.el.appendChild(pn)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!a.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(r);return Le(this.options.bounds).overlaps(f)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,c=this.getTileSize(),f=r.scaleBy(c),m=f.add(c),y=a.unproject(f,r.z),C=a.unproject(m,r.z);return[y,C]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),c=new Ie(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),c=new H(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(r){var a=this._tiles[r];a&&(Ve(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){_e(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=w,r.onmousemove=w,ne.ielt9&&this.options.opacity<1&&Ye(r,this.options.opacity)},_addTile:function(r,a){var c=this._getTilePos(r),f=this._tileCoordsToKey(r),m=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(m),this.createTile.length<2&&M(l(this._tileReady,this,r,null,m)),ce(m,c),this._tiles[f]={el:m,coords:r,current:!0},a.appendChild(m),this.fire("tileloadstart",{tile:m,coords:r})},_tileReady:function(r,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:r});var f=this._tileCoordsToKey(r);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Ye(c.el,0),D(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(_e(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ne.ielt9||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new H(this._wrapX?v(r.x,this._wrapX):r.x,this._wrapY?v(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new ue(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function gT(r){return new ya(r)}var Fs=ya.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,a){this._url=r,a=z(this,a),a.detectRetina&&ne.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&a===void 0&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var c=document.createElement("img");return oe(c,"load",l(this._tileOnLoad,this,a,c)),oe(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var a={r:ne.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=c),a["-y"]=c}return P(this._url,s(a,this.options))},_tileOnLoad:function(r,a){ne.ielt9?setTimeout(l(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),r(c,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(r=a-r),r+f},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(a=this._tiles[r].el,a.onload=w,a.onerror=w,!a.complete)){a.src=K;var c=this._tiles[r].coords;Ve(a),delete this._tiles[r],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(r){var a=this._tiles[r];if(a)return a.el.setAttribute("src",K),ya.prototype._removeTile.call(this,r)},_tileReady:function(r,a,c){if(!(!this._map||c&&c.getAttribute("src")===K))return ya.prototype._tileReady.call(this,r,a,c)}});function zm(r,a){return new Fs(r,a)}var Fm=Fs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var c=s({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=z(this,a);var m=a.detectRetina&&ne.retina?2:1,y=this.getTileSize();c.width=y.x*m,c.height=y.y*m,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,Fs.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),c=this._crs,f=ge(c.project(a[0]),c.project(a[1])),m=f.min,y=f.max,C=(this._wmsVersion>=1.3&&this._crs===rt?[m.y,m.x,y.y,y.x]:[m.x,m.y,y.x,y.y]).join(","),F=Fs.prototype.getTileUrl.call(this,r);return F+W(this.wmsParams,F,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+C},setParams:function(r,a){return s(this.wmsParams,r),a||this.redraw(),this}});function vT(r,a){return new Fm(r,a)}Fs.WMS=Fm,zm.wms=vT;var ci=be.extend({options:{padding:.1},initialize:function(r){z(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),_e(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,a),y=f.multiplyBy(-c).add(m).subtract(this._map._getNewPixelOrigin(r,a));ne.any3d?Vn(this._container,y,c):ce(this._container,y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new ue(c,c.add(a.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Um=ci.extend({options:{tolerance:0},getEvents:function(){var r=ci.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ci.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");oe(r,"mousemove",this._onMouseMove,this),oe(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),oe(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){D(this._redrawRequest),delete this._ctx,Ve(this._container),De(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var a in this._layers)r=this._layers[a],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ci.prototype._update.call(this);var r=this._bounds,a=this._container,c=r.getSize(),f=ne.retina?2:1;ce(a,r.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",ne.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){ci.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var a=r.options.dashArray.split(/[, ]+/),c=[],f,m;for(m=0;m<a.length;m++){if(f=Number(a[m]),isNaN(f))return;c.push(f)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ue,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)r=f.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var c,f,m,y,C=r._parts,F=C.length,U=this._ctx;if(F){for(U.beginPath(),c=0;c<F;c++){for(f=0,m=C[c].length;f<m;f++)y=C[c][f],U[f?"lineTo":"moveTo"](y.x,y.y);a&&U.closePath()}this._fillStroke(U,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var a=r._point,c=this._ctx,f=Math.max(Math.round(r._radius),1),m=(Math.max(Math.round(r._radiusY),1)||f)/f;m!==1&&(c.save(),c.scale(1,m)),c.beginPath(),c.arc(a.x,a.y/m,f,0,Math.PI*2,!1),m!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,a){var c=a.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var a=this._map.mouseEventToLayerPoint(r),c,f,m=this._drawFirst;m;m=m.next)c=m.layer,c.options.interactive&&c._containsPoint(a)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&(Be(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var c,f,m=this._drawFirst;m;m=m.next)c=m.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(r),f&&(_e(this._container,"leaflet-interactive"),this._fireEvent([f],r,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,c){this._map._fireDOMEvent(a,c||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function Bm(r){return ne.canvas?new Um(r):null}var wa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),yT={_initContainer:function(){this._container=Pe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ci.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=wa("shape");_e(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=wa("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;Ve(a),r.removeInteractiveTarget(a),delete this._layers[d(r)]},_updateStyle:function(r){var a=r._stroke,c=r._fill,f=r.options,m=r._container;m.stroked=!!f.stroke,m.filled=!!f.fill,f.stroke?(a||(a=r._stroke=wa("stroke")),m.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=O(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(m.removeChild(a),r._stroke=null),f.fill?(c||(c=r._fill=wa("fill")),m.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(m.removeChild(c),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),c=Math.round(r._radius),f=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){ii(r._container)},_bringToBack:function(r){bi(r._container)}},Pu=ne.vml?wa:cs,Ea=ci.extend({_initContainer:function(){this._container=Pu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Pu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ve(this._container),De(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ci.prototype._update.call(this);var r=this._bounds,a=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),ce(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=Pu("path");r.options.className&&_e(a,r.options.className),r.options.interactive&&_e(a,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){Ve(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,c=r.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,Bo(r._parts,a))},_updateCircle:function(r){var a=r._point,c=Math.max(Math.round(r._radius),1),f=Math.max(Math.round(r._radiusY),1)||c,m="a"+c+","+f+" 0 1,0 ",y=r._empty()?"M0 0":"M"+(a.x-c)+","+a.y+m+c*2+",0 "+m+-c*2+",0 ";this._setPath(r,y)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){ii(r._path)},_bringToBack:function(r){bi(r._path)}});ne.vml&&Ea.include(yT);function jm(r){return ne.svg||ne.vml?new Ea(r):null}Ee.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var a=this._paneRenderers[r];return a===void 0&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&Bm(r)||jm(r)}});var Hm=Vs.extend({initialize:function(r,a){Vs.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=Le(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function wT(r,a){return new Hm(r,a)}Ea.create=Pu,Ea.pointsToPath=Bo,ui.geometryToLayer=gu,ui.coordsToLatLng=zh,ui.coordsToLatLngs=vu,ui.latLngToCoords=Fh,ui.latLngsToCoords=yu,ui.getFeature=zs,ui.asFeature=wu,Ee.mergeOptions({boxZoom:!0});var Wm=Xt.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){oe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){De(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ve(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Pn(),ra(),this._startPoint=this._map.mouseEventToContainerPoint(r),oe(document,{contextmenu:Yt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Pe("div","leaflet-zoom-box",this._container),_e(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new ue(this._point,this._startPoint),c=a.getSize();ce(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Ve(this._box),Be(this._container,"leaflet-crosshair")),Sn(),sa(),De(document,{contextmenu:Yt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Ie(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ee.addInitHook("addHandler","boxZoom",Wm),Ee.mergeOptions({doubleClickZoom:!0});var qm=Xt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,m=r.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(m):a.setZoomAround(r.containerPoint,m)}});Ee.addInitHook("addHandler","doubleClickZoom",qm),Ee.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Zm=Xt.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new An(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}_e(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Be(this._map._container,"leaflet-grab"),Be(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=Le(this._map.options.maxBounds);this._offsetLimit=ge(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,m=(f-a+c)%r+a-c,y=(f+a+c)%r-a-c,C=Math.abs(m+c)<Math.abs(y+c)?m:y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=C},_onDragEnd:function(r){var a=this._map,c=a.options,f=!c.inertia||r.noInertia||this._times.length<2;if(a.fire("dragend",r),f)a.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),y=(this._lastTime-this._times[0])/1e3,C=c.easeLinearity,F=m.multiplyBy(C/y),U=F.distanceTo([0,0]),q=Math.min(c.inertiaMaxSpeed,U),J=F.multiplyBy(q/U),ae=q/(c.inertiaDeceleration*C),ye=J.multiplyBy(-ae/2).round();!ye.x&&!ye.y?a.fire("moveend"):(ye=a._limitOffset(ye,a.options.maxBounds),M(function(){a.panBy(ye,{duration:ae,easeLinearity:C,noMoveStart:!0,animate:!0})}))}}});Ee.addInitHook("addHandler","dragging",Zm),Ee.mergeOptions({keyboard:!0,keyboardPanDelta:80});var $m=Xt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),oe(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),De(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,c=r.scrollTop||a.scrollTop,f=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var a=this._panKeys={},c=this.keyCodes,f,m;for(f=0,m=c.left.length;f<m;f++)a[c.left[f]]=[-1*r,0];for(f=0,m=c.right.length;f<m;f++)a[c.right[f]]=[r,0];for(f=0,m=c.down.length;f<m;f++)a[c.down[f]]=[0,r];for(f=0,m=c.up.length;f<m;f++)a[c.up[f]]=[0,-1*r]},_setZoomDelta:function(r){var a=this._zoomKeys={},c=this.keyCodes,f,m;for(f=0,m=c.zoomIn.length;f<m;f++)a[c.zoomIn[f]]=r;for(f=0,m=c.zoomOut.length;f<m;f++)a[c.zoomOut[f]]=-r},_addHooks:function(){oe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){De(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var a=r.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],r.shiftKey&&(f=Q(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(Q(f),c.options.maxBounds)),c.options.worldCopyJump){var m=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(m)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Yt(r)}}});Ee.addInitHook("addHandler","keyboard",$m),Ee.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Gm=Xt.extend({addHooks:function(){oe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){De(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=lu(r),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),Yt(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),m=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,y=c?Math.ceil(m/c)*c:m,C=r._limitZoom(a+(this._delta>0?y:-y))-a;this._delta=0,this._startTime=null,C&&(r.options.scrollWheelZoom==="center"?r.setZoom(a+C):r.setZoomAround(this._lastMousePos,a+C))}});Ee.addInitHook("addHandler","scrollWheelZoom",Gm);var ET=600;Ee.mergeOptions({tapHold:ne.touchNative&&ne.safari&&ne.mobile,tapTolerance:15});var Km=Xt.extend({addHooks:function(){oe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){De(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var a=r.touches[0];this._startPos=this._newPos=new H(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(oe(document,"touchend",We),oe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),ET),oe(document,"touchend touchcancel contextmenu",this._cancel,this),oe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){De(document,"touchend",We),De(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),De(document,"touchend touchcancel contextmenu",this._cancel,this),De(document,"touchmove",this._onMove,this)},_onMove:function(r){var a=r.touches[0];this._newPos=new H(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,a){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Ee.addInitHook("addHandler","tapHold",Km),Ee.mergeOptions({touchZoom:ne.touch,bounceAtZoomLimits:!0});var Qm=Xt.extend({addHooks:function(){_e(this._map._container,"leaflet-touch-zoom"),oe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Be(this._map._container,"leaflet-touch-zoom"),De(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(!(!r.touches||r.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),oe(document,"touchmove",this._onTouchMove,this),oe(document,"touchend touchcancel",this._onTouchEnd,this),We(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]),m=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(m,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&m<1||this._zoom>a.getMaxZoom()&&m>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,m===1)return}else{var y=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(m===1&&y.x===0&&y.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(y),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),D(this._animRequest);var C=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=M(C,this,!0),We(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,D(this._animRequest),De(document,"touchmove",this._onTouchMove,this),De(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ee.addInitHook("addHandler","touchZoom",Qm),Ee.BoxZoom=Wm,Ee.DoubleClickZoom=qm,Ee.Drag=Zm,Ee.Keyboard=$m,Ee.ScrollWheelZoom=Gm,Ee.TapHold=Km,Ee.TouchZoom=Qm,n.Bounds=ue,n.Browser=ne,n.CRS=ut,n.Canvas=Um,n.Circle=Vh,n.CircleMarker=_u,n.Class=Qe,n.Control=Ht,n.DivIcon=Vm,n.DivOverlay=Un,n.DomEvent=uu,n.DomUtil=ou,n.Draggable=An,n.Evented=bt,n.FeatureGroup=et,n.GeoJSON=ui,n.GridLayer=ya,n.Handler=Xt,n.Icon=Fn,n.ImageOverlay=Eu,n.LatLng=ve,n.LatLngBounds=Ie,n.Layer=be,n.LayerGroup=qe,n.LineUtil=E,n.Map=Ee,n.Marker=mu,n.Mixin=Dr,n.Path=ji,n.Point=H,n.PolyUtil=Ms,n.Polygon=Vs,n.Polyline=li,n.Popup=Tu,n.PosAnimation=da,n.Projection=X,n.Rectangle=Hm,n.Renderer=ci,n.SVG=Ea,n.SVGOverlay=bm,n.TileLayer=Fs,n.Tooltip=Iu,n.Transformation=Ni,n.Util=R,n.VideoOverlay=Dm,n.bind=l,n.bounds=ge,n.canvas=Bm,n.circle=aT,n.circleMarker=oT,n.control=Vt,n.divIcon=_T,n.extend=s,n.featureGroup=bs,n.geoJSON=Mm,n.geoJson=cT,n.gridLayer=gT,n.icon=rT,n.imageOverlay=hT,n.latLng=fe,n.latLngBounds=Le,n.layerGroup=Bi,n.map=ks,n.marker=sT,n.point=Q,n.polygon=uT,n.polyline=lT,n.popup=pT,n.rectangle=wT,n.setOptions=z,n.stamp=d,n.svg=jm,n.svgOverlay=fT,n.tileLayer=zm,n.tooltip=mT,n.transformation=Jn,n.version=i,n.videoOverlay=dT;var TT=window.L;n.noConflict=function(){return window.L=TT,this},window.L=n})})(Ef,Ef.exports);var Ol=Ef.exports;const Hw=Sv(Ol);function jp(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Hp(t,e){return e==null?function(i,s){const o=we.useRef();return o.current||(o.current=t(i,s)),o}:function(i,s){const o=we.useRef();o.current||(o.current=t(i,s));const l=we.useRef(i),{instance:h}=o.current;return we.useEffect(function(){l.current!==i&&(e(h,i,l.current),l.current=i)},[h,i,s]),o}}function IS(t,e){we.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function Ww(t){return function(n){const i=Up(),s=t(Bp(n,i),i);return Fw(i.map,n.attribution),jw(s.current,n.eventHandlers),IS(s.current,i),s}}function PS(t,e){const n=Hp(t,e),i=Ww(n);return yS(i)}function SS(t,e){const n=Hp(t),i=TS(n,e);return wS(i)}function AS(t,e){const n=Hp(t,e),i=Ww(n);return ES(i)}function CS(t,e,n){const{opacity:i,zIndex:s}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function kS(){return Up().map}function Tf(){return Tf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Tf.apply(this,arguments)}function RS({bounds:t,boundsOptions:e,center:n,children:i,className:s,id:o,placeholder:l,style:h,whenReady:d,zoom:_,...v},w){const[I]=we.useState({className:s,id:o,style:h}),[N,b]=we.useState(null);we.useImperativeHandle(w,()=>(N==null?void 0:N.map)??null,[N]);const z=we.useCallback(x=>{if(x!==null&&N===null){const P=new Ol.Map(x,v);n!=null&&_!=null?P.setView(n,_):t!=null&&P.fitBounds(t,e),d!=null&&P.whenReady(d),b(gS(P))}},[]);we.useEffect(()=>()=>{N==null||N.map.remove()},[N]);const W=N?mc.createElement(Bw,{value:N},i):l??null;return mc.createElement("div",Tf({},I,{ref:z}),W)}const xS=we.forwardRef(RS),LS=PS(function({position:e,...n},i){const s=new Ol.Marker(e,n);return jp(s,vS(i,{overlayContainer:s}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),OS=SS(function(e,n){const i=new Ol.Popup(e,n.overlayContainer);return jp(i,n)},function(e,n,{position:i},s){we.useEffect(function(){const{instance:l}=e;function h(_){_.popup===l&&(l.update(),s(!0))}function d(_){_.popup===l&&s(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var v;n.map.off({popupopen:h,popupclose:d}),(v=n.overlayContainer)==null||v.unbindPopup(),n.map.removeLayer(l)}},[e,n,s,i])}),NS=AS(function({url:e,...n},i){const s=new Ol.TileLayer(e,Bp(n,i));return jp(s,i)},function(e,n,i){CS(e,n,i);const{url:s}=n;s!=null&&s!==i.url&&e.setUrl(s)});delete Hw.Icon.Default.prototype._getIconUrl;Hw.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function MS({center:t,zoom:e}){function n(){const i=kS();return we.useEffect(()=>{i.flyTo(t,e)},[t,e,i]),null}return ie.jsxs(xS,{center:t,zoom:e,style:{width:"100%",height:"300px",borderRadius:"24px",zIndex:0},children:[ie.jsx(NS,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),ie.jsx(LS,{position:t,children:ie.jsx(OS,{children:"Your Package is here!"})}),ie.jsx(n,{})]})}function DS({center:t={lat:13.7563,lng:100.5018},zoom:e=12}){return ie.jsx(MS,{center:t,zoom:e})}var dg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},bS=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],h=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Zw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,h=l?t[s+1]:0,d=s+2<t.length,_=d?t[s+2]:0,v=o>>2,w=(o&3)<<4|h>>4;let I=(h&15)<<2|_>>6,N=_&63;d||(N=64,l||(I=64)),i.push(n[v],n[w],n[I],n[N])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const _=s<t.length?n[t.charAt(s)]:64;++s;const w=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||h==null||_==null||w==null)throw new VS;const I=o<<2|h>>4;if(i.push(I),_!==64){const N=h<<4&240|_>>2;if(i.push(N),w!==64){const b=_<<6&192|w;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class VS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zS=function(t){const e=qw(t);return Zw.encodeByteArray(e,!0)},Uc=function(t){return zS(t).replace(/\./g,"")},$w=function(t){try{return Zw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=()=>FS().__FIREBASE_DEFAULTS__,BS=()=>{if(typeof process>"u"||typeof dg>"u")return;const t=dg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$w(t[1]);return e&&JSON.parse(e)},yh=()=>{try{return US()||BS()||jS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Gw=t=>{var e,n;return(n=(e=yh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},HS=t=>{const e=Gw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Kw=()=>{var t;return(t=yh())===null||t===void 0?void 0:t.config},Qw=t=>{var e;return(e=yh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Uc(JSON.stringify(n)),Uc(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function $S(){var t;const e=(t=yh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function QS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YS(){const t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function XS(){return!$S()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JS(){try{return typeof indexedDB=="object"}catch{return!1}}function eA(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="FirebaseError";class Li extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=tA,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nl.prototype.create)}}class Nl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?nA(o,i):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new Li(s,h,i)}}function nA(t,e){return t.replace(iA,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const iA=/\{\$([^}]+)}/g;function rA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Bc(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],l=e[s];if(fg(o)&&fg(l)){if(!Bc(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function fg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function sA(t,e){const n=new oA(t,e);return n.subscribe.bind(n)}class oA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");aA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=md),s.error===void 0&&(s.error=md),s.complete===void 0&&(s.complete=md);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function md(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t){return t&&t._delegate?t._delegate:t}class ts{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new WS;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cA(e))try{this.getOrInitializeService({instanceIdentifier:Fr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=Fr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fr){return this.instances.has(e)}getOptions(e=Fr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:uA(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Fr){return this.component?this.component.multipleInstances?e:Fr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uA(t){return t===Fr?void 0:t}function cA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new lA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const dA={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},fA=Ae.INFO,pA={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},mA=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=pA[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wp{constructor(e){this.name=e,this._logLevel=fA,this._logHandler=mA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const _A=(t,e)=>e.some(n=>t instanceof n);let pg,mg;function gA(){return pg||(pg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vA(){return mg||(mg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yw=new WeakMap,If=new WeakMap,Xw=new WeakMap,_d=new WeakMap,qp=new WeakMap;function yA(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(cr(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&Yw.set(n,t)}).catch(()=>{}),qp.set(e,t),e}function wA(t){if(If.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});If.set(t,e)}let Pf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return If.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Xw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EA(t){Pf=t(Pf)}function TA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(gd(this),e,...n);return Xw.set(i,e.sort?e.sort():[e]),cr(i)}:vA().includes(t)?function(...e){return t.apply(gd(this),e),cr(Yw.get(this))}:function(...e){return cr(t.apply(gd(this),e))}}function IA(t){return typeof t=="function"?TA(t):(t instanceof IDBTransaction&&wA(t),_A(t,gA())?new Proxy(t,Pf):t)}function cr(t){if(t instanceof IDBRequest)return yA(t);if(_d.has(t))return _d.get(t);const e=IA(t);return e!==t&&(_d.set(t,e),qp.set(e,t)),e}const gd=t=>qp.get(t);function PA(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),h=cr(l);return i&&l.addEventListener("upgradeneeded",d=>{i(cr(l.result),d.oldVersion,d.newVersion,cr(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",_=>s(_.oldVersion,_.newVersion,_))}).catch(()=>{}),h}const SA=["get","getKey","getAll","getAllKeys","count"],AA=["put","add","delete","clear"],vd=new Map;function _g(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vd.get(e))return vd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=AA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||SA.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let _=d.store;return i&&(_=_.index(h.shift())),(await Promise.all([_[n](...h),s&&d.done]))[0]};return vd.set(e,o),o}EA(t=>({...t,get:(e,n,i)=>_g(e,n)||t.get(e,n,i),has:(e,n)=>!!_g(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function kA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sf="@firebase/app",gg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new Wp("@firebase/app"),RA="@firebase/app-compat",xA="@firebase/analytics-compat",LA="@firebase/analytics",OA="@firebase/app-check-compat",NA="@firebase/app-check",MA="@firebase/auth",DA="@firebase/auth-compat",bA="@firebase/database",VA="@firebase/data-connect",zA="@firebase/database-compat",FA="@firebase/functions",UA="@firebase/functions-compat",BA="@firebase/installations",jA="@firebase/installations-compat",HA="@firebase/messaging",WA="@firebase/messaging-compat",qA="@firebase/performance",ZA="@firebase/performance-compat",$A="@firebase/remote-config",GA="@firebase/remote-config-compat",KA="@firebase/storage",QA="@firebase/storage-compat",YA="@firebase/firestore",XA="@firebase/vertexai-preview",JA="@firebase/firestore-compat",eC="firebase",tC="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af="[DEFAULT]",nC={[Sf]:"fire-core",[RA]:"fire-core-compat",[LA]:"fire-analytics",[xA]:"fire-analytics-compat",[NA]:"fire-app-check",[OA]:"fire-app-check-compat",[MA]:"fire-auth",[DA]:"fire-auth-compat",[bA]:"fire-rtdb",[VA]:"fire-data-connect",[zA]:"fire-rtdb-compat",[FA]:"fire-fn",[UA]:"fire-fn-compat",[BA]:"fire-iid",[jA]:"fire-iid-compat",[HA]:"fire-fcm",[WA]:"fire-fcm-compat",[qA]:"fire-perf",[ZA]:"fire-perf-compat",[$A]:"fire-rc",[GA]:"fire-rc-compat",[KA]:"fire-gcs",[QA]:"fire-gcs-compat",[YA]:"fire-fst",[JA]:"fire-fst-compat",[XA]:"fire-vertex","fire-js":"fire-js",[eC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=new Map,iC=new Map,Cf=new Map;function vg(t,e){try{t.container.addComponent(e)}catch(n){Si.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function To(t){const e=t.name;if(Cf.has(e))return Si.debug(`There were multiple attempts to register component ${e}.`),!1;Cf.set(e,t);for(const n of jc.values())vg(n,t);for(const n of iC.values())vg(n,t);return!0}function Zp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function er(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hr=new Nl("app","Firebase",rC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=tC;function Jw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Af,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw hr.create("bad-app-name",{appName:String(s)});if(n||(n=Kw()),!n)throw hr.create("no-options");const o=jc.get(s);if(o){if(Bc(n,o.options)&&Bc(i,o.config))return o;throw hr.create("duplicate-app",{appName:s})}const l=new hA(s);for(const d of Cf.values())l.addComponent(d);const h=new sC(n,i,l);return jc.set(s,h),h}function e0(t=Af){const e=jc.get(t);if(!e&&t===Af&&Kw())return Jw();if(!e)throw hr.create("no-app",{appName:t});return e}function dr(t,e,n){var i;let s=(i=nC[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Si.warn(h.join(" "));return}To(new ts(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC="firebase-heartbeat-database",aC=1,_l="firebase-heartbeat-store";let yd=null;function t0(){return yd||(yd=PA(oC,aC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_l)}catch(n){console.warn(n)}}}}).catch(t=>{throw hr.create("idb-open",{originalErrorMessage:t.message})})),yd}async function lC(t){try{const n=(await t0()).transaction(_l),i=await n.objectStore(_l).get(n0(t));return await n.done,i}catch(e){if(e instanceof Li)Si.warn(e.message);else{const n=hr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Si.warn(n.message)}}}async function yg(t,e){try{const i=(await t0()).transaction(_l,"readwrite");await i.objectStore(_l).put(e,n0(t)),await i.done}catch(n){if(n instanceof Li)Si.warn(n.message);else{const i=hr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Si.warn(i.message)}}}function n0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=1024,cC=30*24*60*60*1e3;class hC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new fC(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=wg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const h=new Date(l.date).valueOf();return Date.now()-h<=cC}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Si.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wg(),{heartbeatsToSend:i,unsentEntries:s}=dC(this._heartbeatsCache.heartbeats),o=Uc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Si.warn(n),""}}}function wg(){return new Date().toISOString().substring(0,10)}function dC(t,e=uC){const n=[];let i=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),Eg(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Eg(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class fC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JS()?eA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await lC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Eg(t){return Uc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t){To(new ts("platform-logger",e=>new CA(e),"PRIVATE")),To(new ts("heartbeat",e=>new hC(e),"PRIVATE")),dr(Sf,gg,t),dr(Sf,gg,"esm2017"),dr("fire-js","")}pC("");var mC="firebase",_C="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr(mC,_C,"app");var Tg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gr,i0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,T){function S(){}S.prototype=T.prototype,A.D=T.prototype,A.prototype=new S,A.prototype.constructor=A,A.C=function(k,M,D){for(var R=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)R[Qe-2]=arguments[Qe];return T.prototype[M].apply(k,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,T,S){S||(S=0);var k=Array(16);if(typeof T=="string")for(var M=0;16>M;++M)k[M]=T.charCodeAt(S++)|T.charCodeAt(S++)<<8|T.charCodeAt(S++)<<16|T.charCodeAt(S++)<<24;else for(M=0;16>M;++M)k[M]=T[S++]|T[S++]<<8|T[S++]<<16|T[S++]<<24;T=A.g[0],S=A.g[1],M=A.g[2];var D=A.g[3],R=T+(D^S&(M^D))+k[0]+3614090360&4294967295;T=S+(R<<7&4294967295|R>>>25),R=D+(M^T&(S^M))+k[1]+3905402710&4294967295,D=T+(R<<12&4294967295|R>>>20),R=M+(S^D&(T^S))+k[2]+606105819&4294967295,M=D+(R<<17&4294967295|R>>>15),R=S+(T^M&(D^T))+k[3]+3250441966&4294967295,S=M+(R<<22&4294967295|R>>>10),R=T+(D^S&(M^D))+k[4]+4118548399&4294967295,T=S+(R<<7&4294967295|R>>>25),R=D+(M^T&(S^M))+k[5]+1200080426&4294967295,D=T+(R<<12&4294967295|R>>>20),R=M+(S^D&(T^S))+k[6]+2821735955&4294967295,M=D+(R<<17&4294967295|R>>>15),R=S+(T^M&(D^T))+k[7]+4249261313&4294967295,S=M+(R<<22&4294967295|R>>>10),R=T+(D^S&(M^D))+k[8]+1770035416&4294967295,T=S+(R<<7&4294967295|R>>>25),R=D+(M^T&(S^M))+k[9]+2336552879&4294967295,D=T+(R<<12&4294967295|R>>>20),R=M+(S^D&(T^S))+k[10]+4294925233&4294967295,M=D+(R<<17&4294967295|R>>>15),R=S+(T^M&(D^T))+k[11]+2304563134&4294967295,S=M+(R<<22&4294967295|R>>>10),R=T+(D^S&(M^D))+k[12]+1804603682&4294967295,T=S+(R<<7&4294967295|R>>>25),R=D+(M^T&(S^M))+k[13]+4254626195&4294967295,D=T+(R<<12&4294967295|R>>>20),R=M+(S^D&(T^S))+k[14]+2792965006&4294967295,M=D+(R<<17&4294967295|R>>>15),R=S+(T^M&(D^T))+k[15]+1236535329&4294967295,S=M+(R<<22&4294967295|R>>>10),R=T+(M^D&(S^M))+k[1]+4129170786&4294967295,T=S+(R<<5&4294967295|R>>>27),R=D+(S^M&(T^S))+k[6]+3225465664&4294967295,D=T+(R<<9&4294967295|R>>>23),R=M+(T^S&(D^T))+k[11]+643717713&4294967295,M=D+(R<<14&4294967295|R>>>18),R=S+(D^T&(M^D))+k[0]+3921069994&4294967295,S=M+(R<<20&4294967295|R>>>12),R=T+(M^D&(S^M))+k[5]+3593408605&4294967295,T=S+(R<<5&4294967295|R>>>27),R=D+(S^M&(T^S))+k[10]+38016083&4294967295,D=T+(R<<9&4294967295|R>>>23),R=M+(T^S&(D^T))+k[15]+3634488961&4294967295,M=D+(R<<14&4294967295|R>>>18),R=S+(D^T&(M^D))+k[4]+3889429448&4294967295,S=M+(R<<20&4294967295|R>>>12),R=T+(M^D&(S^M))+k[9]+568446438&4294967295,T=S+(R<<5&4294967295|R>>>27),R=D+(S^M&(T^S))+k[14]+3275163606&4294967295,D=T+(R<<9&4294967295|R>>>23),R=M+(T^S&(D^T))+k[3]+4107603335&4294967295,M=D+(R<<14&4294967295|R>>>18),R=S+(D^T&(M^D))+k[8]+1163531501&4294967295,S=M+(R<<20&4294967295|R>>>12),R=T+(M^D&(S^M))+k[13]+2850285829&4294967295,T=S+(R<<5&4294967295|R>>>27),R=D+(S^M&(T^S))+k[2]+4243563512&4294967295,D=T+(R<<9&4294967295|R>>>23),R=M+(T^S&(D^T))+k[7]+1735328473&4294967295,M=D+(R<<14&4294967295|R>>>18),R=S+(D^T&(M^D))+k[12]+2368359562&4294967295,S=M+(R<<20&4294967295|R>>>12),R=T+(S^M^D)+k[5]+4294588738&4294967295,T=S+(R<<4&4294967295|R>>>28),R=D+(T^S^M)+k[8]+2272392833&4294967295,D=T+(R<<11&4294967295|R>>>21),R=M+(D^T^S)+k[11]+1839030562&4294967295,M=D+(R<<16&4294967295|R>>>16),R=S+(M^D^T)+k[14]+4259657740&4294967295,S=M+(R<<23&4294967295|R>>>9),R=T+(S^M^D)+k[1]+2763975236&4294967295,T=S+(R<<4&4294967295|R>>>28),R=D+(T^S^M)+k[4]+1272893353&4294967295,D=T+(R<<11&4294967295|R>>>21),R=M+(D^T^S)+k[7]+4139469664&4294967295,M=D+(R<<16&4294967295|R>>>16),R=S+(M^D^T)+k[10]+3200236656&4294967295,S=M+(R<<23&4294967295|R>>>9),R=T+(S^M^D)+k[13]+681279174&4294967295,T=S+(R<<4&4294967295|R>>>28),R=D+(T^S^M)+k[0]+3936430074&4294967295,D=T+(R<<11&4294967295|R>>>21),R=M+(D^T^S)+k[3]+3572445317&4294967295,M=D+(R<<16&4294967295|R>>>16),R=S+(M^D^T)+k[6]+76029189&4294967295,S=M+(R<<23&4294967295|R>>>9),R=T+(S^M^D)+k[9]+3654602809&4294967295,T=S+(R<<4&4294967295|R>>>28),R=D+(T^S^M)+k[12]+3873151461&4294967295,D=T+(R<<11&4294967295|R>>>21),R=M+(D^T^S)+k[15]+530742520&4294967295,M=D+(R<<16&4294967295|R>>>16),R=S+(M^D^T)+k[2]+3299628645&4294967295,S=M+(R<<23&4294967295|R>>>9),R=T+(M^(S|~D))+k[0]+4096336452&4294967295,T=S+(R<<6&4294967295|R>>>26),R=D+(S^(T|~M))+k[7]+1126891415&4294967295,D=T+(R<<10&4294967295|R>>>22),R=M+(T^(D|~S))+k[14]+2878612391&4294967295,M=D+(R<<15&4294967295|R>>>17),R=S+(D^(M|~T))+k[5]+4237533241&4294967295,S=M+(R<<21&4294967295|R>>>11),R=T+(M^(S|~D))+k[12]+1700485571&4294967295,T=S+(R<<6&4294967295|R>>>26),R=D+(S^(T|~M))+k[3]+2399980690&4294967295,D=T+(R<<10&4294967295|R>>>22),R=M+(T^(D|~S))+k[10]+4293915773&4294967295,M=D+(R<<15&4294967295|R>>>17),R=S+(D^(M|~T))+k[1]+2240044497&4294967295,S=M+(R<<21&4294967295|R>>>11),R=T+(M^(S|~D))+k[8]+1873313359&4294967295,T=S+(R<<6&4294967295|R>>>26),R=D+(S^(T|~M))+k[15]+4264355552&4294967295,D=T+(R<<10&4294967295|R>>>22),R=M+(T^(D|~S))+k[6]+2734768916&4294967295,M=D+(R<<15&4294967295|R>>>17),R=S+(D^(M|~T))+k[13]+1309151649&4294967295,S=M+(R<<21&4294967295|R>>>11),R=T+(M^(S|~D))+k[4]+4149444226&4294967295,T=S+(R<<6&4294967295|R>>>26),R=D+(S^(T|~M))+k[11]+3174756917&4294967295,D=T+(R<<10&4294967295|R>>>22),R=M+(T^(D|~S))+k[2]+718787259&4294967295,M=D+(R<<15&4294967295|R>>>17),R=S+(D^(M|~T))+k[9]+3951481745&4294967295,A.g[0]=A.g[0]+T&4294967295,A.g[1]=A.g[1]+(M+(R<<21&4294967295|R>>>11))&4294967295,A.g[2]=A.g[2]+M&4294967295,A.g[3]=A.g[3]+D&4294967295}i.prototype.u=function(A,T){T===void 0&&(T=A.length);for(var S=T-this.blockSize,k=this.B,M=this.h,D=0;D<T;){if(M==0)for(;D<=S;)s(this,A,D),D+=this.blockSize;if(typeof A=="string"){for(;D<T;)if(k[M++]=A.charCodeAt(D++),M==this.blockSize){s(this,k),M=0;break}}else for(;D<T;)if(k[M++]=A[D++],M==this.blockSize){s(this,k),M=0;break}}this.h=M,this.o+=T},i.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var T=1;T<A.length-8;++T)A[T]=0;var S=8*this.o;for(T=A.length-8;T<A.length;++T)A[T]=S&255,S/=256;for(this.u(A),A=Array(16),T=S=0;4>T;++T)for(var k=0;32>k;k+=8)A[S++]=this.g[T]>>>k&255;return A};function o(A,T){var S=h;return Object.prototype.hasOwnProperty.call(S,A)?S[A]:S[A]=T(A)}function l(A,T){this.h=T;for(var S=[],k=!0,M=A.length-1;0<=M;M--){var D=A[M]|0;k&&D==T||(S[M]=D,k=!1)}this.g=S}var h={};function d(A){return-128<=A&&128>A?o(A,function(T){return new l([T|0],0>T?-1:0)}):new l([A|0],0>A?-1:0)}function _(A){if(isNaN(A)||!isFinite(A))return w;if(0>A)return W(_(-A));for(var T=[],S=1,k=0;A>=S;k++)T[k]=A/S|0,S*=4294967296;return new l(T,0)}function v(A,T){if(A.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A.charAt(0)=="-")return W(v(A.substring(1),T));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=_(Math.pow(T,8)),k=w,M=0;M<A.length;M+=8){var D=Math.min(8,A.length-M),R=parseInt(A.substring(M,M+D),T);8>D?(D=_(Math.pow(T,D)),k=k.j(D).add(_(R))):(k=k.j(S),k=k.add(_(R)))}return k}var w=d(0),I=d(1),N=d(16777216);t=l.prototype,t.m=function(){if(z(this))return-W(this).m();for(var A=0,T=1,S=0;S<this.g.length;S++){var k=this.i(S);A+=(0<=k?k:4294967296+k)*T,T*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(b(this))return"0";if(z(this))return"-"+W(this).toString(A);for(var T=_(Math.pow(A,6)),S=this,k="";;){var M=j(S,T).g;S=x(S,M.j(T));var D=((0<S.g.length?S.g[0]:S.h)>>>0).toString(A);if(S=M,b(S))return D+k;for(;6>D.length;)D="0"+D;k=D+k}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function b(A){if(A.h!=0)return!1;for(var T=0;T<A.g.length;T++)if(A.g[T]!=0)return!1;return!0}function z(A){return A.h==-1}t.l=function(A){return A=x(this,A),z(A)?-1:b(A)?0:1};function W(A){for(var T=A.g.length,S=[],k=0;k<T;k++)S[k]=~A.g[k];return new l(S,~A.h).add(I)}t.abs=function(){return z(this)?W(this):this},t.add=function(A){for(var T=Math.max(this.g.length,A.g.length),S=[],k=0,M=0;M<=T;M++){var D=k+(this.i(M)&65535)+(A.i(M)&65535),R=(D>>>16)+(this.i(M)>>>16)+(A.i(M)>>>16);k=R>>>16,D&=65535,R&=65535,S[M]=R<<16|D}return new l(S,S[S.length-1]&-2147483648?-1:0)};function x(A,T){return A.add(W(T))}t.j=function(A){if(b(this)||b(A))return w;if(z(this))return z(A)?W(this).j(W(A)):W(W(this).j(A));if(z(A))return W(this.j(W(A)));if(0>this.l(N)&&0>A.l(N))return _(this.m()*A.m());for(var T=this.g.length+A.g.length,S=[],k=0;k<2*T;k++)S[k]=0;for(k=0;k<this.g.length;k++)for(var M=0;M<A.g.length;M++){var D=this.i(k)>>>16,R=this.i(k)&65535,Qe=A.i(M)>>>16,Xn=A.i(M)&65535;S[2*k+2*M]+=R*Xn,P(S,2*k+2*M),S[2*k+2*M+1]+=D*Xn,P(S,2*k+2*M+1),S[2*k+2*M+1]+=R*Qe,P(S,2*k+2*M+1),S[2*k+2*M+2]+=D*Qe,P(S,2*k+2*M+2)}for(k=0;k<T;k++)S[k]=S[2*k+1]<<16|S[2*k];for(k=T;k<2*T;k++)S[k]=0;return new l(S,0)};function P(A,T){for(;(A[T]&65535)!=A[T];)A[T+1]+=A[T]>>>16,A[T]&=65535,T++}function O(A,T){this.g=A,this.h=T}function j(A,T){if(b(T))throw Error("division by zero");if(b(A))return new O(w,w);if(z(A))return T=j(W(A),T),new O(W(T.g),W(T.h));if(z(T))return T=j(A,W(T)),new O(W(T.g),T.h);if(30<A.g.length){if(z(A)||z(T))throw Error("slowDivide_ only works with positive integers.");for(var S=I,k=T;0>=k.l(A);)S=K(S),k=K(k);var M=Y(S,1),D=Y(k,1);for(k=Y(k,2),S=Y(S,2);!b(k);){var R=D.add(k);0>=R.l(A)&&(M=M.add(S),D=R),k=Y(k,1),S=Y(S,1)}return T=x(A,M.j(T)),new O(M,T)}for(M=w;0<=A.l(T);){for(S=Math.max(1,Math.floor(A.m()/T.m())),k=Math.ceil(Math.log(S)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),D=_(S),R=D.j(T);z(R)||0<R.l(A);)S-=k,D=_(S),R=D.j(T);b(D)&&(D=I),M=M.add(D),A=x(A,R)}return new O(M,A)}t.A=function(A){return j(this,A).h},t.and=function(A){for(var T=Math.max(this.g.length,A.g.length),S=[],k=0;k<T;k++)S[k]=this.i(k)&A.i(k);return new l(S,this.h&A.h)},t.or=function(A){for(var T=Math.max(this.g.length,A.g.length),S=[],k=0;k<T;k++)S[k]=this.i(k)|A.i(k);return new l(S,this.h|A.h)},t.xor=function(A){for(var T=Math.max(this.g.length,A.g.length),S=[],k=0;k<T;k++)S[k]=this.i(k)^A.i(k);return new l(S,this.h^A.h)};function K(A){for(var T=A.g.length+1,S=[],k=0;k<T;k++)S[k]=A.i(k)<<1|A.i(k-1)>>>31;return new l(S,A.h)}function Y(A,T){var S=T>>5;T%=32;for(var k=A.g.length-S,M=[],D=0;D<k;D++)M[D]=0<T?A.i(D+S)>>>T|A.i(D+S+1)<<32-T:A.i(D+S);return new l(M,A.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,i0=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=_,l.fromString=v,Gr=l}).apply(typeof Tg<"u"?Tg:typeof self<"u"?self:typeof window<"u"?window:{});var Hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var r0,Da,s0,oc,kf,o0,a0,l0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,g){return u==Array.prototype||u==Object.prototype||(u[p]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hu=="object"&&Hu];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function s(u,p){if(p)e:{var g=i;u=u.split(".");for(var E=0;E<u.length-1;E++){var V=u[E];if(!(V in g))break e;g=g[V]}u=u[u.length-1],E=g[u],p=p(E),p!=E&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}function o(u,p){u instanceof String&&(u+="");var g=0,E=!1,V={next:function(){if(!E&&g<u.length){var B=g++;return{value:p(B,u[B]),done:!1}}return E=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(u){return u||function(){return o(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function d(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function _(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function v(u,p,g){return u.call.apply(u.bind,arguments)}function w(u,p,g){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,E),u.apply(p,V)}}return function(){return u.apply(p,arguments)}}function I(u,p,g){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,I.apply(null,arguments)}function N(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function b(u,p){function g(){}g.prototype=p.prototype,u.aa=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(E,V,B){for(var X=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)X[Oe-2]=arguments[Oe];return p.prototype[V].apply(E,X)}}function z(u){const p=u.length;if(0<p){const g=Array(p);for(let E=0;E<p;E++)g[E]=u[E];return g}return[]}function W(u,p){for(let g=1;g<arguments.length;g++){const E=arguments[g];if(d(E)){const V=u.length||0,B=E.length||0;u.length=V+B;for(let X=0;X<B;X++)u[V+X]=E[X]}else u.push(E)}}class x{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function P(u){return/^[\s\xa0]*$/.test(u)}function O(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function j(u){return j[" "](u),u}j[" "]=function(){};var K=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function Y(u,p,g){for(const E in u)p.call(g,u[E],E,u)}function A(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function T(u){const p={};for(const g in u)p[g]=u[g];return p}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,p){let g,E;for(let V=1;V<arguments.length;V++){E=arguments[V];for(g in E)u[g]=E[g];for(let B=0;B<S.length;B++)g=S[B],Object.prototype.hasOwnProperty.call(E,g)&&(u[g]=E[g])}}function M(u){var p=1;u=u.split(":");const g=[];for(;0<p&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function D(u){h.setTimeout(()=>{throw u},0)}function R(){var u=le;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Qe{constructor(){this.h=this.g=null}add(p,g){const E=Xn.get();E.set(p,g),this.h?this.h.next=E:this.g=E,this.h=E}}var Xn=new x(()=>new lt,u=>u.reset());class lt{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let bt,H=!1,le=new Qe,Q=()=>{const u=h.Promise.resolve(void 0);bt=()=>{u.then(ue)}};var ue=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(g){D(g)}var p=Xn;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}H=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var Le=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};h.addEventListener("test",g,p),h.removeEventListener("test",g,p)}catch{}return u}();function ve(u,p){if(Ie.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(K){e:{try{j(p.nodeName);var V=!0;break e}catch{}V=!1}V||(p=null)}}else g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement);this.relatedTarget=p,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:fe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ve.aa.h.call(this)}}b(ve,Ie);var fe={2:"touch",3:"pen",4:"mouse"};ve.prototype.h=function(){ve.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ut="closure_listenable_"+(1e6*Math.random()|0),bn=0;function Wl(u,p,g,E,V){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!E,this.ha=V,this.key=++bn,this.da=this.fa=!1}function Oi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ni(u){this.src=u,this.g={},this.h=0}Ni.prototype.add=function(u,p,g,E,V){var B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);var X=Ir(u,p,E,V);return-1<X?(p=u[X],g||(p.fa=!1)):(p=new Wl(p,this.src,B,!!E,V),p.fa=g,u.push(p)),p};function Jn(u,p){var g=p.type;if(g in u.g){var E=u.g[g],V=Array.prototype.indexOf.call(E,p,void 0),B;(B=0<=V)&&Array.prototype.splice.call(E,V,1),B&&(Oi(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Ir(u,p,g,E){for(var V=0;V<u.length;++V){var B=u[V];if(!B.da&&B.listener==p&&B.capture==!!g&&B.ha==E)return V}return-1}var Uo="closure_lm_"+(1e6*Math.random()|0),cs={};function Bo(u,p,g,E,V){if(Array.isArray(p)){for(var B=0;B<p.length;B++)Bo(u,p[B],g,E,V);return null}return g=$l(g),u&&u[ut]?u.K(p,g,_(E)?!!E.capture:!1,V):jo(u,p,g,!1,E,V)}function jo(u,p,g,E,V,B){if(!p)throw Error("Invalid event type");var X=_(V)?!!V.capture:!!V,Oe=ps(u);if(Oe||(u[Uo]=Oe=new Ni(u)),g=Oe.add(p,g,E,X,B),g.proxy)return g;if(E=hs(),g.proxy=E,E.src=u,E.listener=g,u.addEventListener)Le||(V=X),V===void 0&&(V=!1),u.addEventListener(p.toString(),E,V);else if(u.attachEvent)u.attachEvent(fs(p.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function hs(){function u(g){return p.call(u.src,u.listener,g)}const p=Zl;return u}function ql(u,p,g,E,V){if(Array.isArray(p))for(var B=0;B<p.length;B++)ql(u,p[B],g,E,V);else E=_(E)?!!E.capture:!!E,g=$l(g),u&&u[ut]?(u=u.i,p=String(p).toString(),p in u.g&&(B=u.g[p],g=Ir(B,g,E,V),-1<g&&(Oi(B[g]),Array.prototype.splice.call(B,g,1),B.length==0&&(delete u.g[p],u.h--)))):u&&(u=ps(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Ir(p,g,E,V)),(g=-1<u?p[u]:null)&&ds(g))}function ds(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[ut])Jn(p.i,u);else{var g=u.type,E=u.proxy;p.removeEventListener?p.removeEventListener(g,E,u.capture):p.detachEvent?p.detachEvent(fs(g),E):p.addListener&&p.removeListener&&p.removeListener(E),(g=ps(p))?(Jn(g,u),g.h==0&&(g.src=null,p[Uo]=null)):Oi(u)}}}function fs(u){return u in cs?cs[u]:cs[u]="on"+u}function Zl(u,p){if(u.da)u=!0;else{p=new ve(p,this);var g=u.listener,E=u.ha||u.src;u.fa&&ds(u),u=g.call(E,p)}return u}function ps(u){return u=u[Uo],u instanceof Ni?u:null}var Ho="__closure_events_fn_"+(1e9*Math.random()>>>0);function $l(u){return typeof u=="function"?u:(u[Ho]||(u[Ho]=function(p){return u.handleEvent(p)}),u[Ho])}function it(){ge.call(this),this.i=new Ni(this),this.M=this,this.F=null}b(it,ge),it.prototype[ut]=!0,it.prototype.removeEventListener=function(u,p,g,E){ql(this,u,p,g,E)};function pt(u,p){var g,E=u.F;if(E)for(g=[];E;E=E.F)g.push(E);if(u=u.M,E=p.type||p,typeof p=="string")p=new Ie(p,u);else if(p instanceof Ie)p.target=p.target||u;else{var V=p;p=new Ie(E,u),k(p,V)}if(V=!0,g)for(var B=g.length-1;0<=B;B--){var X=p.g=g[B];V=Pr(X,E,!0,p)&&V}if(X=p.g=u,V=Pr(X,E,!0,p)&&V,V=Pr(X,E,!1,p)&&V,g)for(B=0;B<g.length;B++)X=p.g=g[B],V=Pr(X,E,!1,p)&&V}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var g=u.g[p],E=0;E<g.length;E++)Oi(g[E]);delete u.g[p],u.h--}}this.F=null},it.prototype.K=function(u,p,g,E){return this.i.add(String(u),p,!1,g,E)},it.prototype.L=function(u,p,g,E){return this.i.add(String(u),p,!0,g,E)};function Pr(u,p,g,E){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var V=!0,B=0;B<p.length;++B){var X=p[B];if(X&&!X.da&&X.capture==g){var Oe=X.listener,rt=X.ha||X.src;X.fa&&Jn(u.i,X),V=Oe.call(rt,E)!==!1&&V}}return V&&!E.defaultPrevented}function Gl(u,p,g){if(typeof u=="function")g&&(u=I(u,g));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:h.setTimeout(u,p||0)}function Wo(u){u.g=Gl(()=>{u.g=null,u.i&&(u.i=!1,Wo(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Kl extends ge{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Wo(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sr(u){ge.call(this),this.h=u,this.g={}}b(Sr,ge);var qo=[];function ms(u){Y(u.g,function(p,g){this.g.hasOwnProperty(g)&&ds(p)},u),u.g={}}Sr.prototype.N=function(){Sr.aa.N.call(this),ms(this)},Sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _s=h.JSON.stringify,Mh=h.JSON.parse,Ar=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Zo(){}Zo.prototype.h=null;function Ql(u){return u.h||(u.h=u.i())}function $o(){}var Mi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gs(){Ie.call(this,"d")}b(gs,Ie);function Go(){Ie.call(this,"c")}b(Go,Ie);var ei={},Yl=null;function vs(){return Yl=Yl||new it}ei.La="serverreachability";function Xl(u){Ie.call(this,ei.La,u)}b(Xl,Ie);function Cr(u){const p=vs();pt(p,new Xl(p))}ei.STAT_EVENT="statevent";function ys(u,p){Ie.call(this,ei.STAT_EVENT,u),this.stat=p}b(ys,Ie);function wt(u){const p=vs();pt(p,new ys(p,u))}ei.Ma="timingevent";function Jl(u,p){Ie.call(this,ei.Ma,u),this.size=p}b(Jl,Ie);function kr(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},p)}function Rr(){this.g=!0}Rr.prototype.xa=function(){this.g=!1};function an(u,p,g,E,V,B){u.info(function(){if(u.g)if(B)for(var X="",Oe=B.split("&"),rt=0;rt<Oe.length;rt++){var Ce=Oe[rt].split("=");if(1<Ce.length){var be=Ce[0];Ce=Ce[1];var qe=be.split("_");X=2<=qe.length&&qe[1]=="type"?X+(be+"="+Ce+"&"):X+(be+"=redacted&")}}else X=null;else X=B;return"XMLHTTP REQ ("+E+") [attempt "+V+"]: "+p+`
`+g+`
`+X})}function ne(u,p,g,E,V,B,X){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+V+"]: "+p+`
`+g+`
`+B+" "+X})}function ti(u,p,g,E){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+tu(u,g)+(E?" "+E:"")})}function eu(u,p){u.info(function(){return"TIMEOUT: "+p})}Rr.prototype.info=function(){};function tu(u,p){if(!u.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var E=g[u];if(!(2>E.length)){var V=E[1];if(Array.isArray(V)&&!(1>V.length)){var B=V[0];if(B!="noop"&&B!="stop"&&B!="close")for(var X=1;X<V.length;X++)V[X]=""}}}}return _s(g)}catch{return p}}var xr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ws={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Es;function Tn(){}b(Tn,Zo),Tn.prototype.g=function(){return new XMLHttpRequest},Tn.prototype.i=function(){return{}},Es=new Tn;function In(u,p,g,E){this.j=u,this.i=p,this.l=g,this.R=E||1,this.U=new Sr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nu}function nu(){this.i=null,this.g="",this.h=!1}var iu={},Ko={};function Qo(u,p,g){u.L=1,u.v=un(Ye(p)),u.m=g,u.P=!0,Yo(u,null)}function Yo(u,p){u.F=Date.now(),Is(u),u.A=Ye(u.v);var g=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),ou(g.i,"t",E),u.C=0,g=u.j.J,u.h=new nu,u.g=fu(u.j,g?p:null,!u.m),0<u.O&&(u.M=new Kl(I(u.Y,u,u.g),u.O)),p=u.U,g=u.g,E=u.ca;var V="readystatechange";Array.isArray(V)||(V&&(qo[0]=V.toString()),V=qo);for(var B=0;B<V.length;B++){var X=Bo(g,V[B],E||p.handleEvent,!1,p.h||p);if(!X)break;p.g[X.key]=X}p=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Cr(),an(u.i,u.u,u.A,u.l,u.R,u.m)}In.prototype.ca=function(u){u=u.target;const p=this.M;p&&Vt(u)==3?p.j():this.Y(u)},In.prototype.Y=function(u){try{if(u==this.g)e:{const qe=Vt(this.g);var p=this.g.Ba();const Bi=this.g.Z();if(!(3>qe)&&(qe!=3||this.g&&(this.h.h||this.g.oa()||fa(this.g)))){this.J||qe!=4||p==7||(p==8||0>=Bi?Cr(3):Cr(2)),Xo(this);var g=this.g.Z();this.X=g;t:if(ru(this)){var E=fa(this.g);u="";var V=E.length,B=Vt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ni(this),Lr(this);var X="";break t}this.h.i=new h.TextDecoder}for(p=0;p<V;p++)this.h.h=!0,u+=this.h.i.decode(E[p],{stream:!(B&&p==V-1)});E.length=0,this.h.g+=u,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=g==200,ne(this.i,this.u,this.A,this.l,this.R,qe,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,rt=this.g;if((Oe=rt.g?rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Oe)){var Ce=Oe;break t}}Ce=null}if(g=Ce)ti(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Or(this,g);else{this.o=!1,this.s=3,wt(12),ni(this),Lr(this);break e}}if(this.P){g=!0;let et;for(;!this.J&&this.C<X.length;)if(et=Ts(this,X),et==Ko){qe==4&&(this.s=4,wt(14),g=!1),ti(this.i,this.l,null,"[Incomplete Response]");break}else if(et==iu){this.s=4,wt(15),ti(this.i,this.l,X,"[Invalid Chunk]"),g=!1;break}else ti(this.i,this.l,et,null),Or(this,et);if(ru(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qe!=4||X.length!=0||this.h.h||(this.s=1,wt(16),g=!1),this.o=this.o&&g,!g)ti(this.i,this.l,X,"[Invalid Chunked Response]"),ni(this),Lr(this);else if(0<X.length&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.ba&&!be.M&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),Os(be),be.M=!0,wt(11))}}else ti(this.i,this.l,X,null),Or(this,X);qe==4&&ni(this),this.o&&!this.J&&(qe==4?ma(this.j,this):(this.o=!1,Is(this)))}else Dh(this.g),g==400&&0<X.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),ni(this),Lr(this)}}}catch{}finally{}};function ru(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ts(u,p){var g=u.C,E=p.indexOf(`
`,g);return E==-1?Ko:(g=Number(p.substring(g,E)),isNaN(g)?iu:(E+=1,E+g>p.length?Ko:(p=p.slice(E,E+g),u.C=E+g,p)))}In.prototype.cancel=function(){this.J=!0,ni(this)};function Is(u){u.S=Date.now()+u.I,su(u,u.I)}function su(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=kr(I(u.ba,u),p)}function Xo(u){u.B&&(h.clearTimeout(u.B),u.B=null)}In.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(eu(this.i,this.A),this.L!=2&&(Cr(),wt(17)),ni(this),this.s=2,Lr(this)):su(this,this.S-u)};function Lr(u){u.j.G==0||u.J||ma(u.j,u)}function ni(u){Xo(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,ms(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Or(u,p){try{var g=u.j;if(g.G!=0&&(g.g==u||Pe(g.h,u))){if(!u.K&&Pe(g.h,u)&&g.G==3){try{var E=g.Da.g.parse(p)}catch{E=null}if(Array.isArray(E)&&E.length==3){var V=E;if(V[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)Ms(g),xs(g);else break e;Ls(g),wt(18)}}else g.za=V[1],0<g.za-g.T&&37500>V[2]&&g.F&&g.v==0&&!g.C&&(g.C=kr(I(g.Za,g),6e3));if(1>=Di(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ai(g,11)}else if((u.K||g.g==u)&&Ms(g),!P(p))for(V=g.Da.g.parse(p),p=0;p<V.length;p++){let Ce=V[p];if(g.T=Ce[0],Ce=Ce[1],g.G==2)if(Ce[0]=="c"){g.K=Ce[1],g.ia=Ce[2];const be=Ce[3];be!=null&&(g.la=be,g.j.info("VER="+g.la));const qe=Ce[4];qe!=null&&(g.Aa=qe,g.j.info("SVER="+g.Aa));const Bi=Ce[5];Bi!=null&&typeof Bi=="number"&&0<Bi&&(E=1.5*Bi,g.L=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const et=u.g;if(et){const bs=et.g?et.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bs){var B=E.h;B.g||bs.indexOf("spdy")==-1&&bs.indexOf("quic")==-1&&bs.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Ve(B,B.h),B.h=null))}if(E.D){const Fn=et.g?et.g.getResponseHeader("X-HTTP-Session-Id"):null;Fn&&(E.ya=Fn,ce(E.I,E.D,Fn))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),E=g;var X=u;if(E.qa=Ds(E,E.J?E.ia:null,E.W),X.K){Mr(E.h,X);var Oe=X,rt=E.L;rt&&(Oe.I=rt),Oe.B&&(Xo(Oe),Is(Oe)),E.g=X}else An(E);0<g.i.length&&Ui(g)}else Ce[0]!="stop"&&Ce[0]!="close"||ai(g,7);else g.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?ai(g,7):Rs(g):Ce[0]!="noop"&&g.l&&g.l.ta(Ce),g.v=0)}}Cr(4)}catch{}}var Nr=class{constructor(u,p){this.g=u,this.map=p}};function Jo(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ea(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Di(u){return u.h?1:u.g?u.g.size:0}function Pe(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Ve(u,p){u.g?u.g.add(p):u.h=p}function Mr(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Jo.prototype.cancel=function(){if(this.i=ii(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ii(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.D);return p}return z(u.i)}function bi(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(d(u)){for(var p=[],g=u.length,E=0;E<g;E++)p.push(u[E]);return p}p=[],g=0;for(E in u)p[g++]=u[E];return p}function ta(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(d(u)||typeof u=="string"){var p=[];u=u.length;for(var g=0;g<u;g++)p.push(g);return p}p=[],g=0;for(const E in u)p[g++]=E;return p}}}function _e(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(d(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var g=ta(u),E=bi(u),V=E.length,B=0;B<V;B++)p.call(void 0,E[B],g&&g[B],u)}var Be=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function na(u,p){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var E=u[g].indexOf("="),V=null;if(0<=E){var B=u[g].substring(0,E);V=u[g].substring(E+1)}else B=u[g];p(B,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function ln(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ln){this.h=u.h,Ps(this,u.j),this.o=u.o,this.g=u.g,ri(this,u.s),this.l=u.l;var p=u.i,g=new si;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),Vn(this,g),this.m=u.m}else u&&(p=String(u).match(Be))?(this.h=!1,Ps(this,p[1]||"",!0),this.o=Pn(p[2]||""),this.g=Pn(p[3]||"",!0),ri(this,p[4]),this.l=Pn(p[5]||"",!0),Vn(this,p[6]||"",!0),this.m=Pn(p[7]||"")):(this.h=!1,this.i=new si(null,this.h))}ln.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Sn(p,Vi,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Sn(p,Vi,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Sn(g,g.charAt(0)=="/"?sa:ra,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Sn(g,oa)),u.join("")};function Ye(u){return new ln(u)}function Ps(u,p,g){u.j=g?Pn(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function ri(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Vn(u,p,g){p instanceof si?(u.i=p,cn(u.i,u.h)):(g||(p=Sn(p,Ss)),u.i=new si(p,u.h))}function ce(u,p,g){u.i.set(p,g)}function un(u){return ce(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Pn(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Sn(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,ia),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ia(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Vi=/[#\/\?@]/g,ra=/[#\?:]/g,sa=/[#\?]/g,Ss=/[#\?@]/g,oa=/#/g;function si(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Qt(u){u.g||(u.g=new Map,u.h=0,u.i&&na(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=si.prototype,t.add=function(u,p){Qt(this),this.i=null,u=oe(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function aa(u,p){Qt(u),p=oe(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function As(u,p){return Qt(u),p=oe(u,p),u.g.has(p)}t.forEach=function(u,p){Qt(this),this.g.forEach(function(g,E){g.forEach(function(V){u.call(p,V,E,this)},this)},this)},t.na=function(){Qt(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let E=0;E<p.length;E++){const V=u[E];for(let B=0;B<V.length;B++)g.push(p[E])}return g},t.V=function(u){Qt(this);let p=[];if(typeof u=="string")As(this,u)&&(p=p.concat(this.g.get(oe(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)p=p.concat(u[g])}return p},t.set=function(u,p){return Qt(this),this.i=null,u=oe(this,u),As(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function ou(u,p,g){aa(u,p),0<g.length&&(u.i=null,u.g.set(oe(u,p),z(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var E=p[g];const B=encodeURIComponent(String(E)),X=this.V(E);for(E=0;E<X.length;E++){var V=B;X[E]!==""&&(V+="="+encodeURIComponent(String(X[E]))),u.push(V)}}return this.i=u.join("&")};function oe(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function cn(u,p){p&&!u.j&&(Qt(u),u.i=null,u.g.forEach(function(g,E){var V=E.toLowerCase();E!=V&&(aa(this,E),ou(this,V,g))},u)),u.j=p}function De(u,p){const g=new Rr;if(h.Image){const E=new Image;E.onload=N(hn,g,"TestLoadImage: loaded",!0,p,E),E.onerror=N(hn,g,"TestLoadImage: error",!1,p,E),E.onabort=N(hn,g,"TestLoadImage: abort",!1,p,E),E.ontimeout=N(hn,g,"TestLoadImage: timeout",!1,p,E),h.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else p(!1)}function au(u,p){const g=new Rr,E=new AbortController,V=setTimeout(()=>{E.abort(),hn(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:E.signal}).then(B=>{clearTimeout(V),B.ok?hn(g,"TestPingServer: ok",!0,p):hn(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(V),hn(g,"TestPingServer: error",!1,p)})}function hn(u,p,g,E,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),E(g)}catch{}}function la(){this.g=new Ar}function ua(u,p,g){const E=g||"";try{_e(u,function(V,B){let X=V;_(V)&&(X=_s(V)),p.push(E+B+"="+encodeURIComponent(X))})}catch(V){throw p.push(E+"type="+encodeURIComponent("_badmap")),V}}function dn(u){this.l=u.Ub||null,this.j=u.eb||!1}b(dn,Zo),dn.prototype.g=function(){return new zi(this.l,this.j)},dn.prototype.i=function(u){return function(){return u}}({});function zi(u,p){it.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(zi,it),t=zi.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Yt(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||h).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,We(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Yt(this)),this.g&&(this.readyState=3,Yt(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fi(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fi(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?We(this):Yt(this),this.readyState==3&&Fi(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,We(this))},t.Qa=function(u){this.g&&(this.response=u,We(this))},t.ga=function(){this.g&&We(this)};function We(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Yt(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function Yt(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ca(u){let p="";return Y(u,function(g,E){p+=E,p+=":",p+=g,p+=`\r
`}),p}function Cs(u,p,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=ca(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):ce(u,p,g))}function je(u){it.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(je,it);var lu=/^https?$/i,ha=["POST","PUT"];t=je.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Es.g(),this.v=this.o?Ql(this.o):Ql(Es),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(B){uu(this,B);return}if(u=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var V in E)g.set(V,E[V]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const B of E.keys())g.set(B,E.get(B));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(B=>B.toLowerCase()=="content-type"),V=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ha,p,void 0))||E||V||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,X]of g)this.g.setRequestHeader(B,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ht(this),this.u=!0,this.g.send(u),this.u=!1}catch(B){uu(this,B)}};function uu(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,da(u),ks(u)}function da(u){u.A||(u.A=!0,pt(u,"complete"),pt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,pt(this,"complete"),pt(this,"abort"),ks(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ks(this,!0)),je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ee(this):this.bb())},t.bb=function(){Ee(this)};function Ee(u){if(u.h&&typeof l<"u"&&(!u.v[1]||Vt(u)!=4||u.Z()!=2)){if(u.u&&Vt(u)==4)Gl(u.Ea,0,u);else if(pt(u,"readystatechange"),Vt(u)==4){u.h=!1;try{const X=u.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var E;if(E=X===0){var V=String(u.D).match(Be)[1]||null;!V&&h.self&&h.self.location&&(V=h.self.location.protocol.slice(0,-1)),E=!lu.test(V?V.toLowerCase():"")}g=E}if(g)pt(u,"complete"),pt(u,"success");else{u.m=6;try{var B=2<Vt(u)?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.Z()+"]",da(u)}}finally{ks(u)}}}}function ks(u,p){if(u.g){Ht(u);const g=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||pt(u,"ready");try{g.onreadystatechange=E}catch{}}}function Ht(u){u.I&&(h.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Vt(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Vt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Mh(p)}};function fa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Dh(u){const p={};u=(u.g&&2<=Vt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(P(u[E]))continue;var g=M(u[E]);const V=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const B=p[V]||[];p[V]=B,B.push(g)}A(p,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function oi(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function cu(u){this.Aa=0,this.i=[],this.j=new Rr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=oi("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=oi("baseRetryDelayMs",5e3,u),this.cb=oi("retryDelaySeedMs",1e4,u),this.Wa=oi("forwardChannelMaxRetries",2,u),this.wa=oi("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Jo(u&&u.concurrentRequestLimit),this.Da=new la,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=cu.prototype,t.la=8,t.G=1,t.connect=function(u,p,g,E){wt(0),this.W=u,this.H=p||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.I=Ds(this,null,this.W),Ui(this)};function Rs(u){if(hu(u),u.G==3){var p=u.U++,g=Ye(u.I);if(ce(g,"SID",u.K),ce(g,"RID",p),ce(g,"TYPE","terminate"),Dr(u,g),p=new In(u,u.j,p),p.L=2,p.v=un(Ye(g)),g=!1,h.navigator&&h.navigator.sendBeacon)try{g=h.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&h.Image&&(new Image().src=p.v,g=!0),g||(p.g=fu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Is(p)}du(u)}function xs(u){u.g&&(Os(u),u.g.cancel(),u.g=null)}function hu(u){xs(u),u.u&&(h.clearTimeout(u.u),u.u=null),Ms(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function Ui(u){if(!ea(u.h)&&!u.s){u.s=!0;var p=u.Ga;bt||Q(),H||(bt(),H=!0),le.add(p,u),u.B=0}}function bh(u,p){return Di(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=kr(I(u.Ga,u,p),_a(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const V=new In(this,this.j,u);let B=this.o;if(this.S&&(B?(B=T(B),k(B,this.S)):B=this.S),this.m!==null||this.O||(V.H=B,B=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(p+=E,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=pa(this,V,p),g=Ye(this.I),ce(g,"RID",u),ce(g,"CVER",22),this.D&&ce(g,"X-HTTP-Session-Id",this.D),Dr(this,g),B&&(this.O?p="headers="+encodeURIComponent(String(ca(B)))+"&"+p:this.m&&Cs(g,this.m,B)),Ve(this.h,V),this.Ua&&ce(g,"TYPE","init"),this.P?(ce(g,"$req",p),ce(g,"SID","null"),V.T=!0,Qo(V,g,null)):Qo(V,g,p),this.G=2}}else this.G==3&&(u?Xt(this,u):this.i.length==0||ea(this.h)||Xt(this))};function Xt(u,p){var g;p?g=p.l:g=u.U++;const E=Ye(u.I);ce(E,"SID",u.K),ce(E,"RID",g),ce(E,"AID",u.T),Dr(u,E),u.m&&u.o&&Cs(E,u.m,u.o),g=new In(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),p&&(u.i=p.D.concat(u.i)),p=pa(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ve(u.h,g),Qo(g,E,p)}function Dr(u,p){u.H&&Y(u.H,function(g,E){ce(p,E,g)}),u.l&&_e({},function(g,E){ce(p,E,g)})}function pa(u,p,g){g=Math.min(u.i.length,g);var E=u.l?I(u.l.Na,u.l,u):null;e:{var V=u.i;let B=-1;for(;;){const X=["count="+g];B==-1?0<g?(B=V[0].g,X.push("ofs="+B)):B=0:X.push("ofs="+B);let Oe=!0;for(let rt=0;rt<g;rt++){let Ce=V[rt].g;const be=V[rt].map;if(Ce-=B,0>Ce)B=Math.max(0,V[rt].g-100),Oe=!1;else try{ua(be,X,"req"+Ce+"_")}catch{E&&E(be)}}if(Oe){E=X.join("&");break e}}}return u=u.i.splice(0,g),p.D=u,E}function An(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;bt||Q(),H||(bt(),H=!0),le.add(p,u),u.v=0}}function Ls(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=kr(I(u.Fa,u),_a(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Ns(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=kr(I(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),xs(this),Ns(this))};function Os(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function Ns(u){u.g=new In(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Ye(u.qa);ce(p,"RID","rpc"),ce(p,"SID",u.K),ce(p,"AID",u.T),ce(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&ce(p,"TO",u.ja),ce(p,"TYPE","xmlhttp"),Dr(u,p),u.m&&u.o&&Cs(p,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=un(Ye(p)),g.m=null,g.P=!0,Yo(g,u)}t.Za=function(){this.C!=null&&(this.C=null,xs(this),Ls(this),wt(19))};function Ms(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function ma(u,p){var g=null;if(u.g==p){Ms(u),Os(u),u.g=null;var E=2}else if(Pe(u.h,p))g=p.D,Mr(u.h,p),E=1;else return;if(u.G!=0){if(p.o)if(E==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var V=u.B;E=vs(),pt(E,new Jl(E,g)),Ui(u)}else An(u);else if(V=p.s,V==3||V==0&&0<p.X||!(E==1&&bh(u,p)||E==2&&Ls(u)))switch(g&&0<g.length&&(p=u.h,p.i=p.i.concat(g)),V){case 1:ai(u,5);break;case 4:ai(u,10);break;case 3:ai(u,6);break;default:ai(u,2)}}}function _a(u,p){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*p}function ai(u,p){if(u.j.info("Error code "+p),p==2){var g=I(u.fb,u),E=u.Xa;const V=!E;E=new ln(E||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ps(E,"https"),un(E),V?De(E.toString(),g):au(E.toString(),g)}else wt(2);u.G=0,u.l&&u.l.sa(p),du(u),hu(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function du(u){if(u.G=0,u.ka=[],u.l){const p=ii(u.h);(p.length!=0||u.i.length!=0)&&(W(u.ka,p),W(u.ka,u.i),u.h.i.length=0,z(u.i),u.i.length=0),u.l.ra()}}function Ds(u,p,g){var E=g instanceof ln?Ye(g):new ln(g);if(E.g!="")p&&(E.g=p+"."+E.g),ri(E,E.s);else{var V=h.location;E=V.protocol,p=p?p+"."+V.hostname:V.hostname,V=+V.port;var B=new ln(null);E&&Ps(B,E),p&&(B.g=p),V&&ri(B,V),g&&(B.l=g),E=B}return g=u.D,p=u.ya,g&&p&&ce(E,g,p),ce(E,"VER",u.la),Dr(u,E),E}function fu(u,p,g){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new je(new dn({eb:g})):new je(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ga(){}t=ga.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function br(){}br.prototype.g=function(u,p){return new mt(u,p)};function mt(u,p){it.call(this),this.g=new cu(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!P(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!P(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new fn(this)}b(mt,it),mt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mt.prototype.close=function(){Rs(this.g)},mt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=_s(u),u=g);p.i.push(new Nr(p.Ya++,u)),p.G==3&&Ui(p)},mt.prototype.N=function(){this.g.l=null,delete this.j,Rs(this.g),delete this.g,mt.aa.N.call(this)};function zn(u){gs.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}b(zn,gs);function pu(){Go.call(this),this.status=1}b(pu,Go);function fn(u){this.g=u}b(fn,ga),fn.prototype.ua=function(){pt(this.g,"a")},fn.prototype.ta=function(u){pt(this.g,new zn(u))},fn.prototype.sa=function(u){pt(this.g,new pu)},fn.prototype.ra=function(){pt(this.g,"b")},br.prototype.createWebChannel=br.prototype.g,mt.prototype.send=mt.prototype.o,mt.prototype.open=mt.prototype.m,mt.prototype.close=mt.prototype.close,l0=function(){return new br},a0=function(){return vs()},o0=ei,kf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xr.NO_ERROR=0,xr.TIMEOUT=8,xr.HTTP_ERROR=6,oc=xr,ws.COMPLETE="complete",s0=ws,$o.EventType=Mi,Mi.OPEN="a",Mi.CLOSE="b",Mi.ERROR="c",Mi.MESSAGE="d",it.prototype.listen=it.prototype.K,Da=$o,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,r0=je}).apply(typeof Hu<"u"?Hu:typeof self<"u"?self:typeof window<"u"?window:{});const Ig="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Do="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new Wp("@firebase/firestore");function xa(){return ns.logLevel}function te(t,...e){if(ns.logLevel<=Ae.DEBUG){const n=e.map($p);ns.debug(`Firestore (${Do}): ${t}`,...n)}}function Ai(t,...e){if(ns.logLevel<=Ae.ERROR){const n=e.map($p);ns.error(`Firestore (${Do}): ${t}`,...n)}}function Io(t,...e){if(ns.logLevel<=Ae.WARN){const n=e.map($p);ns.warn(`Firestore (${Do}): ${t}`,...n)}}function $p(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(t="Unexpected state"){const e=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: `+t;throw Ai(e),new Error(e)}function Me(t,e){t||de()}function me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Li{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Lt.UNAUTHENTICATED))}shutdown(){}}class vC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class yC{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Me(this.o===void 0);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new fr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new fr,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new fr)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Me(typeof i.accessToken=="string"),new u0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string"),new Lt(e)}}class wC{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class EC{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new wC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class TC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Me(this.o===void 0);const i=o=>{o.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,te("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Me(typeof n.token=="string"),this.R=n.token,new TC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=PC(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%e.length))}return i}}function xe(t,e){return t<e?-1:t>e?1:0}function Po(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new re($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new ft(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pe(e)}static min(){return new pe(new ft(0,0))}static max(){return new pe(new ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n,i){n===void 0?n=0:n>e.length&&de(),i===void 0?i=e.length-n:i>e.length-n&&de(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return gl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=e.get(s),l=n.get(s);if(o<l)return-1;if(o>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Je extends gl{construct(e,n,i){return new Je(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new re($.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Je(n)}static emptyPath(){return new Je([])}}const SC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends gl{construct(e,n,i){return new It(e,n,i)}static isValidIdentifier(e){return SC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new It(["__name__"])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new re($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new re($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new re($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(i+=h,s++):(o(),s++)}if(o(),l)throw new re($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(n)}static emptyPath(){return new It([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(Je.fromString(e))}static fromName(e){return new se(Je.fromString(e).popFirst(5))}static empty(){return new se(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new Je(e.slice()))}}function AC(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=pe.fromTimestamp(i===1e9?new ft(n+1,0):new ft(n,i));return new gr(s,se.empty(),e)}function CC(t){return new gr(t.readTime,t.key,-1)}class gr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new gr(pe.min(),se.empty(),-1)}static max(){return new gr(pe.max(),se.empty(),-1)}}function kC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==RC)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&de(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,i)=>{n(e)})}static reject(e){return new Z((n,i)=>{i(e)})}static waitFor(e){return new Z((n,i)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},d=>i(d))}),l=!0,o===s&&n()})}static or(e){let n=Z.resolve(!1);for(const i of e)n=n.next(s=>s?Z.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(e,n){return new Z((i,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const _=d;n(e[_]).next(v=>{l[_]=v,++h,h===o&&i(l)},v=>s(v))}})}static doWhile(e,n){return new Z((i,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):i()};o()})}}function LC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Gp.oe=-1;function wh(t){return t==null}function Hc(t){return t===0&&1/t==-1/0}function OC(t){return typeof t=="number"&&Number.isInteger(t)&&!Hc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function bo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function h0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.comparator=e,this.root=n||Tt.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wu(this.root,e,this.comparator,!0)}}class Wu{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??Tt.RED,this.left=s??Tt.EMPTY,this.right=o??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new Tt(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Tt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw de();const e=this.left.check();if(e!==this.right.check())throw de();return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw de()}get value(){throw de()}get color(){throw de()}get left(){throw de()}get right(){throw de()}copy(e,n,i,s,o){return this}insert(e,n,i){return new Tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sg(this.data.getIterator())}getIteratorFrom(e){return new Sg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class Sg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new Ln([])}unionWith(e){let n=new St(It.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Po(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new d0("Invalid base64 string: "+o):o}}(e);return new Ct(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new Ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const NC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vr(t){if(Me(!!t),typeof t=="string"){let e=0;const n=NC.exec(t);if(Me(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function is(t){return typeof t=="string"?Ct.fromBase64String(t):Ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Qp(t){const e=t.mapValue.fields.__previous_value__;return Kp(e)?Qp(e):e}function vl(t){const e=vr(t.mapValue.fields.__local_write_time__.timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,n,i,s,o,l,h,d,_){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=_}}class yl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new yl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof yl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu={mapValue:{}};function rs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Kp(t)?4:bC(t)?9007199254740991:DC(t)?10:11:de()}function Qn(t,e){if(t===e)return!0;const n=rs(t);if(n!==rs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vl(t).isEqual(vl(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=vr(s.timestampValue),h=vr(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return is(s.bytesValue).isEqual(is(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return tt(s.geoPointValue.latitude)===tt(o.geoPointValue.latitude)&&tt(s.geoPointValue.longitude)===tt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return tt(s.integerValue)===tt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=tt(s.doubleValue),h=tt(o.doubleValue);return l===h?Hc(l)===Hc(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return Po(t.arrayValue.values||[],e.arrayValue.values||[],Qn);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(Pg(l)!==Pg(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!Qn(l[d],h[d])))return!1;return!0}(t,e);default:return de()}}function wl(t,e){return(t.values||[]).find(n=>Qn(n,e))!==void 0}function So(t,e){if(t===e)return 0;const n=rs(t),i=rs(e);if(n!==i)return xe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=tt(o.integerValue||o.doubleValue),d=tt(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return Ag(t.timestampValue,e.timestampValue);case 4:return Ag(vl(t),vl(e));case 5:return xe(t.stringValue,e.stringValue);case 6:return function(o,l){const h=is(o),d=is(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let _=0;_<h.length&&_<d.length;_++){const v=xe(h[_],d[_]);if(v!==0)return v}return xe(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=xe(tt(o.latitude),tt(l.latitude));return h!==0?h:xe(tt(o.longitude),tt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Cg(t.arrayValue,e.arrayValue);case 10:return function(o,l){var h,d,_,v;const w=o.fields||{},I=l.fields||{},N=(h=w.value)===null||h===void 0?void 0:h.arrayValue,b=(d=I.value)===null||d===void 0?void 0:d.arrayValue,z=xe(((_=N==null?void 0:N.values)===null||_===void 0?void 0:_.length)||0,((v=b==null?void 0:b.values)===null||v===void 0?void 0:v.length)||0);return z!==0?z:Cg(N,b)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===qu.mapValue&&l===qu.mapValue)return 0;if(o===qu.mapValue)return 1;if(l===qu.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),_=l.fields||{},v=Object.keys(_);d.sort(),v.sort();for(let w=0;w<d.length&&w<v.length;++w){const I=xe(d[w],v[w]);if(I!==0)return I;const N=So(h[d[w]],_[v[w]]);if(N!==0)return N}return xe(d.length,v.length)}(t.mapValue,e.mapValue);default:throw de()}}function Ag(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);const n=vr(t),i=vr(e),s=xe(n.seconds,i.seconds);return s!==0?s:xe(n.nanos,i.nanos)}function Cg(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=So(n[s],i[s]);if(o)return o}return xe(n.length,i.length)}function Ao(t){return Rf(t)}function Rf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=vr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return is(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=Rf(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${Rf(n.fields[l])}`;return s+"}"}(t.mapValue):de()}function xf(t){return!!t&&"integerValue"in t}function Yp(t){return!!t&&"arrayValue"in t}function kg(t){return!!t&&"nullValue"in t}function Rg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ac(t){return!!t&&"mapValue"in t}function DC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ga(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return bo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Ga(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ga(t.arrayValue.values[n]);return e}return Object.assign({},t)}function bC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.value=e}static empty(){return new gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!ac(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ga(n)}setAll(e){let n=It.emptyPath(),i={},s=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=h.popLast()}l?i[h.lastSegment()]=Ga(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());ac(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];ac(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){bo(n,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new gn(Ga(this.value))}}function f0(t){const e=[];return bo(t.fields,(n,i)=>{const s=new It([n]);if(ac(i)){const o=f0(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n,i,s,o,l,h){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Nt(e,0,pe.min(),pe.min(),pe.min(),gn.empty(),0)}static newFoundDocument(e,n,i,s){return new Nt(e,1,n,pe.min(),i,s,0)}static newNoDocument(e,n){return new Nt(e,2,n,pe.min(),pe.min(),gn.empty(),0)}static newUnknownDocument(e,n){return new Nt(e,3,n,pe.min(),pe.min(),gn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n){this.position=e,this.inclusive=n}}function xg(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?i=se.comparator(se.fromName(l.referenceValue),n.key):i=So(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Lg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n="asc"){this.field=e,this.dir=n}}function VC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{}class ht extends p0{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new FC(e,n,i):n==="array-contains"?new jC(e,i):n==="in"?new HC(e,i):n==="not-in"?new WC(e,i):n==="array-contains-any"?new qC(e,i):new ht(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new UC(e,i):new BC(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(So(n,this.value)):n!==null&&rs(this.value)===rs(n)&&this.matchesComparison(So(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends p0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Yn(e,n)}matches(e){return m0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function m0(t){return t.op==="and"}function _0(t){return zC(t)&&m0(t)}function zC(t){for(const e of t.filters)if(e instanceof Yn)return!1;return!0}function Lf(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+Ao(t.value);if(_0(t))return t.filters.map(e=>Lf(e)).join(",");{const e=t.filters.map(n=>Lf(n)).join(",");return`${t.op}(${e})`}}function g0(t,e){return t instanceof ht?function(i,s){return s instanceof ht&&i.op===s.op&&i.field.isEqual(s.field)&&Qn(i.value,s.value)}(t,e):t instanceof Yn?function(i,s){return s instanceof Yn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,l,h)=>o&&g0(l,s.filters[h]),!0):!1}(t,e):void de()}function v0(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${Ao(n.value)}`}(t):t instanceof Yn?function(n){return n.op.toString()+" {"+n.getFilters().map(v0).join(" ,")+"}"}(t):"Filter"}class FC extends ht{constructor(e,n,i){super(e,n,i),this.key=se.fromName(i.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class UC extends ht{constructor(e,n){super(e,"in",n),this.keys=y0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class BC extends ht{constructor(e,n){super(e,"not-in",n),this.keys=y0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function y0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>se.fromName(i.referenceValue))}class jC extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yp(n)&&wl(n.arrayValue,this.value)}}class HC extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wl(this.value.arrayValue,n)}}class WC extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!wl(this.value.arrayValue,n)}}class qC extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>wl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n=null,i=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.ue=null}}function Og(t,e=null,n=[],i=[],s=null,o=null,l=null){return new ZC(t,e,n,i,s,o,l)}function Xp(t){const e=me(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Lf(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),wh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ao(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ao(i)).join(",")),e.ue=n}return e.ue}function Jp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!VC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!g0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Lg(t.startAt,e.startAt)&&Lg(t.endAt,e.endAt)}function Of(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n=null,i=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $C(t,e,n,i,s,o,l,h){return new Eh(t,e,n,i,s,o,l,h)}function Th(t){return new Eh(t)}function Ng(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GC(t){return t.collectionGroup!==null}function Ka(t){const e=me(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new St(It.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(_=>{_.isInequality()&&(h=h.add(_.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new qc(o,i))}),n.has(It.keyField().canonicalString())||e.ce.push(new qc(It.keyField(),i))}return e.ce}function Zn(t){const e=me(t);return e.le||(e.le=KC(e,Ka(t))),e.le}function KC(t,e){if(t.limitType==="F")return Og(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new qc(s.field,o)});const n=t.endAt?new Wc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Wc(t.startAt.position,t.startAt.inclusive):null;return Og(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Nf(t,e,n){return new Eh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ih(t,e){return Jp(Zn(t),Zn(e))&&t.limitType===e.limitType}function w0(t){return`${Xp(Zn(t))}|lt:${t.limitType}`}function js(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>v0(s)).join(", ")}]`),wh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>Ao(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>Ao(s)).join(",")),`Target(${i})`}(Zn(t))}; limitType=${t.limitType})`}function Ph(t,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):se.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,s){for(const o of Ka(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(l,h,d){const _=xg(l,h,d);return l.inclusive?_<=0:_<0}(i.startAt,Ka(i),s)||i.endAt&&!function(l,h,d){const _=xg(l,h,d);return l.inclusive?_>=0:_>0}(i.endAt,Ka(i),s))}(t,e)}function QC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function E0(t){return(e,n)=>{let i=!1;for(const s of Ka(t)){const o=YC(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function YC(t,e,n){const i=t.field.isKeyField()?se.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),_=h.data.field(o);return d!==null&&_!==null?So(d,_):de()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return de()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){bo(this.inner,(n,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return h0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=new Ke(se.comparator);function Ci(){return XC}const T0=new Ke(se.comparator);function ba(...t){let e=T0;for(const n of t)e=e.insert(n.key,n);return e}function I0(t){let e=T0;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function qr(){return Qa()}function P0(){return Qa()}function Qa(){return new Vo(t=>t.toString(),(t,e)=>t.isEqual(e))}const JC=new Ke(se.comparator),ek=new St(se.comparator);function Se(...t){let e=ek;for(const n of t)e=e.add(n);return e}const tk=new St(xe);function nk(){return tk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hc(e)?"-0":e}}function S0(t){return{integerValue:""+t}}function ik(t,e){return OC(e)?S0(e):em(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(){this._=void 0}}function rk(t,e,n){return t instanceof Zc?function(s,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Kp(o)&&(o=Qp(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(n,e):t instanceof El?C0(t,e):t instanceof Tl?k0(t,e):function(s,o){const l=A0(s,o),h=Mg(l)+Mg(s.Pe);return xf(l)&&xf(s.Pe)?S0(h):em(s.serializer,h)}(t,e)}function sk(t,e,n){return t instanceof El?C0(t,e):t instanceof Tl?k0(t,e):n}function A0(t,e){return t instanceof $c?function(i){return xf(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Zc extends Sh{}class El extends Sh{constructor(e){super(),this.elements=e}}function C0(t,e){const n=R0(e);for(const i of t.elements)n.some(s=>Qn(s,i))||n.push(i);return{arrayValue:{values:n}}}class Tl extends Sh{constructor(e){super(),this.elements=e}}function k0(t,e){let n=R0(e);for(const i of t.elements)n=n.filter(s=>!Qn(s,i));return{arrayValue:{values:n}}}class $c extends Sh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Mg(t){return tt(t.integerValue||t.doubleValue)}function R0(t){return Yp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function ok(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof El&&s instanceof El||i instanceof Tl&&s instanceof Tl?Po(i.elements,s.elements,Qn):i instanceof $c&&s instanceof $c?Qn(i.Pe,s.Pe):i instanceof Zc&&s instanceof Zc}(t.transform,e.transform)}class ak{constructor(e,n){this.version=e,this.transformResults=n}}class wi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wi}static exists(e){return new wi(void 0,e)}static updateTime(e){return new wi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ah{}function x0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new O0(t.key,wi.none()):new Vl(t.key,t.data,wi.none());{const n=t.data,i=gn.empty();let s=new St(It.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new ls(t.key,i,new Ln(s.toArray()),wi.none())}}function lk(t,e,n){t instanceof Vl?function(s,o,l){const h=s.value.clone(),d=bg(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof ls?function(s,o,l){if(!lc(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=bg(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(L0(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function Ya(t,e,n,i){return t instanceof Vl?function(o,l,h,d){if(!lc(o.precondition,l))return h;const _=o.value.clone(),v=Vg(o.fieldTransforms,d,l);return _.setAll(v),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),null}(t,e,n,i):t instanceof ls?function(o,l,h,d){if(!lc(o.precondition,l))return h;const _=Vg(o.fieldTransforms,d,l),v=l.data;return v.setAll(L0(o)),v.setAll(_),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(w=>w.field))}(t,e,n,i):function(o,l,h){return lc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function uk(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=A0(i.transform,s||null);o!=null&&(n===null&&(n=gn.empty()),n.set(i.field,o))}return n||null}function Dg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Po(i,s,(o,l)=>ok(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Vl extends Ah{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ls extends Ah{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function L0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function bg(t,e,n){const i=new Map;Me(t.length===n.length);for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,h=e.data.field(o.field);i.set(o.field,sk(l,h,n[s]))}return i}function Vg(t,e,n){const i=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);i.set(s.field,rk(o,l,e))}return i}class O0 extends Ah{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ck extends Ah{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&lk(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ya(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Ya(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=P0();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const d=x0(l,h);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(pe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Se())}isEqual(e){return this.batchId===e.batchId&&Po(this.mutations,e.mutations,(n,i)=>Dg(n,i))&&Po(this.baseMutations,e.baseMutations,(n,i)=>Dg(n,i))}}class tm{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Me(e.mutations.length===i.length);let s=function(){return JC}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new tm(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,ke;function pk(t){switch(t){default:return de();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function N0(t){if(t===void 0)return Ai("GRPC error has no .code"),$.UNKNOWN;switch(t){case ot.OK:return $.OK;case ot.CANCELLED:return $.CANCELLED;case ot.UNKNOWN:return $.UNKNOWN;case ot.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case ot.INTERNAL:return $.INTERNAL;case ot.UNAVAILABLE:return $.UNAVAILABLE;case ot.UNAUTHENTICATED:return $.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case ot.NOT_FOUND:return $.NOT_FOUND;case ot.ALREADY_EXISTS:return $.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return $.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case ot.ABORTED:return $.ABORTED;case ot.OUT_OF_RANGE:return $.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return $.UNIMPLEMENTED;case ot.DATA_LOSS:return $.DATA_LOSS;default:return de()}}(ke=ot||(ot={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=new Gr([4294967295,4294967295],0);function zg(t){const e=mk().encode(t),n=new i0;return n.update(e),new Uint8Array(n.digest())}function Fg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Gr([n,i],0),new Gr([s,o],0)]}class nm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Va(`Invalid padding: ${n}`);if(i<0)throw new Va(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Va(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Va(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Gr.fromNumber(this.Ie)}Ee(e,n,i){let s=e.add(n.multiply(Gr.fromNumber(i)));return s.compare(_k)===1&&(s=new Gr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=zg(e),[i,s]=Fg(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,s,o);if(!this.de(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new nm(o,s,n);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.Ie===0)return;const n=zg(e),[i,s]=Fg(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,s,o);this.Ae(l)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Va extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,zl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Ch(pe.min(),s,new Ke(xe),Ci(),Se())}}class zl{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new zl(i,n,Se(),Se(),Se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n,i,s){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=s}}class M0{constructor(e,n){this.targetId=e,this.me=n}}class D0{constructor(e,n,i=Ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class Ug{constructor(){this.fe=0,this.ge=jg(),this.pe=Ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Se(),n=Se(),i=Se();return this.ge.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:de()}}),new zl(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=jg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class gk{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ci(),this.qe=Bg(),this.Qe=new Ke(xe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:de()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,i=e.me.count,s=this.Je(n);if(s){const o=s.target;if(Of(o))if(i===0){const l=new se(o.path);this.Ue(n,l,Nt.newNoDocument(l,pe.min()))}else Me(i===1);else{const l=this.Ye(n);if(l!==i){const h=this.Ze(e),d=h?this.Xe(h,e,l):1;if(d!==0){this.je(n);const _=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,_)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=is(i).toUint8Array()}catch(d){if(d instanceof d0)return Io("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new nm(l,s,o)}catch(d){return Io(d instanceof Va?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.Ie===0?null:h}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let s=0;return i.forEach(o=>{const l=this.Le.tt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.Ue(n,o,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((o,l)=>{const h=this.Je(l);if(h){if(o.current&&Of(h.target)){const d=new se(h.target.path);this.ke.get(d)!==null||this.it(l,d)||this.Ue(l,d,Nt.newNoDocument(d,e))}o.be&&(n.set(l,o.ve()),o.Ce())}});let i=Se();this.qe.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const _=this.Je(d);return!_||_.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(e));const s=new Ch(e,n,this.Qe,this.ke,i);return this.ke=Ci(),this.qe=Bg(),this.Qe=new Ke(xe),s}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Ug,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new St(xe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ug),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Bg(){return new Ke(se.comparator)}function jg(){return new Ke(se.comparator)}const vk={asc:"ASCENDING",desc:"DESCENDING"},yk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wk={and:"AND",or:"OR"};class Ek{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Mf(t,e){return t.useProto3Json||wh(e)?e:{value:e}}function Gc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function b0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Tk(t,e){return Gc(t,e.toTimestamp())}function $n(t){return Me(!!t),pe.fromTimestamp(function(n){const i=vr(n);return new ft(i.seconds,i.nanos)}(t))}function im(t,e){return Df(t,e).canonicalString()}function Df(t,e){const n=function(s){return new Je(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function V0(t){const e=Je.fromString(t);return Me(j0(e)),e}function bf(t,e){return im(t.databaseId,e.path)}function wd(t,e){const n=V0(e);if(n.get(1)!==t.databaseId.projectId)throw new re($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(F0(n))}function z0(t,e){return im(t.databaseId,e)}function Ik(t){const e=V0(t);return e.length===4?Je.emptyPath():F0(e)}function Vf(t){return new Je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function F0(t){return Me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Hg(t,e,n){return{name:bf(t,e),fields:n.value.mapValue.fields}}function Pk(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:de()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(_,v){return _.useProto3Json?(Me(v===void 0||typeof v=="string"),Ct.fromBase64String(v||"")):(Me(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Ct.fromUint8Array(v||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(_){const v=_.code===void 0?$.UNKNOWN:N0(_.code);return new re(v,_.message||"")}(l);n=new D0(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=wd(t,i.document.name),o=$n(i.document.updateTime),l=i.document.createTime?$n(i.document.createTime):pe.min(),h=new gn({mapValue:{fields:i.document.fields}}),d=Nt.newFoundDocument(s,o,l,h),_=i.targetIds||[],v=i.removedTargetIds||[];n=new uc(_,v,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=wd(t,i.document),o=i.readTime?$n(i.readTime):pe.min(),l=Nt.newNoDocument(s,o),h=i.removedTargetIds||[];n=new uc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=wd(t,i.document),o=i.removedTargetIds||[];n=new uc([],o,s,null)}else{if(!("filter"in e))return de();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new fk(s,o),h=i.targetId;n=new M0(h,l)}}return n}function Sk(t,e){let n;if(e instanceof Vl)n={update:Hg(t,e.key,e.value)};else if(e instanceof O0)n={delete:bf(t,e.key)};else if(e instanceof ls)n={update:Hg(t,e.key,e.data),updateMask:Mk(e.fieldMask)};else{if(!(e instanceof ck))return de();n={verify:bf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const h=l.transform;if(h instanceof Zc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof El)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Tl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof $c)return{fieldPath:l.field.canonicalString(),increment:h.Pe};throw de()}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:Tk(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:de()}(t,e.precondition)),n}function Ak(t,e){return t&&t.length>0?(Me(e!==void 0),t.map(n=>function(s,o){let l=s.updateTime?$n(s.updateTime):$n(o);return l.isEqual(pe.min())&&(l=$n(o)),new ak(l,s.transformResults||[])}(n,e))):[]}function Ck(t,e){return{documents:[z0(t,e.path)]}}function kk(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=z0(t,s);const o=function(_){if(_.length!==0)return B0(Yn.create(_,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(_){if(_.length!==0)return _.map(v=>function(I){return{field:Hs(I.field),direction:Lk(I.dir)}}(v))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=Mf(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),{_t:n,parent:s}}function Rk(t){let e=Ik(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Me(i===1);const v=n.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let o=[];n.where&&(o=function(w){const I=U0(w);return I instanceof Yn&&_0(I)?I.getFilters():[I]}(n.where));let l=[];n.orderBy&&(l=function(w){return w.map(I=>function(b){return new qc(Ws(b.field),function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(I))}(n.orderBy));let h=null;n.limit&&(h=function(w){let I;return I=typeof w=="object"?w.value:w,wh(I)?null:I}(n.limit));let d=null;n.startAt&&(d=function(w){const I=!!w.before,N=w.values||[];return new Wc(N,I)}(n.startAt));let _=null;return n.endAt&&(_=function(w){const I=!w.before,N=w.values||[];return new Wc(N,I)}(n.endAt)),$C(e,s,l,o,h,"F",d,_)}function xk(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function U0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Ws(n.unaryFilter.field);return ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Ws(n.unaryFilter.field);return ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ws(n.unaryFilter.field);return ht.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ws(n.unaryFilter.field);return ht.create(l,"!=",{nullValue:"NULL_VALUE"});default:return de()}}(t):t.fieldFilter!==void 0?function(n){return ht.create(Ws(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return de()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Yn.create(n.compositeFilter.filters.map(i=>U0(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return de()}}(n.compositeFilter.op))}(t):de()}function Lk(t){return vk[t]}function Ok(t){return yk[t]}function Nk(t){return wk[t]}function Hs(t){return{fieldPath:t.canonicalString()}}function Ws(t){return It.fromServerFormat(t.fieldPath)}function B0(t){return t instanceof ht?function(n){if(n.op==="=="){if(Rg(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NAN"}};if(kg(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Rg(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NOT_NAN"}};if(kg(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hs(n.field),op:Ok(n.op),value:n.value}}}(t):t instanceof Yn?function(n){const i=n.getFilters().map(s=>B0(s));return i.length===1?i[0]:{compositeFilter:{op:Nk(n.op),filters:i}}}(t):de()}function Mk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function j0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,n,i,s,o=pe.min(),l=pe.min(),h=Ct.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e){this.ct=e}}function bk(t){const e=Rk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(){this.un=new zk}addToCollectionParentIndex(e,n){return this.un.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(gr.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(gr.min())}updateCollectionGroup(e,n,i){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class zk{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new St(Je.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new St(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Co(0)}static kn(){return new Co(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.changes=new Vo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Z.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&Ya(i.mutation,s,Ln.empty(),ft.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Se()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Se()){const s=qr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(o=>{let l=ba();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=qr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Se()))}populateOverlays(e,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,i,s){let o=Ci();const l=Qa(),h=function(){return Qa()}();return n.forEach((d,_)=>{const v=i.get(_.key);s.has(_.key)&&(v===void 0||v.mutation instanceof ls)?o=o.insert(_.key,_):v!==void 0?(l.set(_.key,v.mutation.getFieldMask()),Ya(v.mutation,_,v.mutation.getFieldMask(),ft.now())):l.set(_.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((_,v)=>l.set(_,v)),n.forEach((_,v)=>{var w;return h.set(_,new Uk(v,(w=l.get(_))!==null&&w!==void 0?w:null))}),h))}recalculateAndSaveOverlays(e,n){const i=Qa();let s=new Ke((l,h)=>l-h),o=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const _=n.get(d);if(_===null)return;let v=i.get(d)||Ln.empty();v=h.applyToLocalView(_,v),i.set(d,v);const w=(s.get(h.batchId)||Se()).add(d);s=s.insert(h.batchId,w)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),_=d.key,v=d.value,w=P0();v.forEach(I=>{if(!o.has(I)){const N=x0(n.get(I),i.get(I));N!==null&&w.set(I,N),o=o.add(I)}}),l.push(this.documentOverlayCache.saveOverlays(e,_,w))}return Z.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(l){return se.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):GC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):Z.resolve(qr());let h=-1,d=o;return l.next(_=>Z.forEach(_,(v,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),o.get(v)?Z.resolve():this.remoteDocumentCache.getEntry(e,v).next(I=>{d=d.insert(v,I)}))).next(()=>this.populateOverlays(e,_,o)).next(()=>this.computeViews(e,d,_,Se())).next(v=>({batchId:h,changes:I0(v)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(i=>{let s=ba();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const o=n.collectionGroup;let l=ba();return this.indexManager.getCollectionParents(e,o).next(h=>Z.forEach(h,d=>{const _=function(w,I){return new Eh(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,_,i,s).next(v=>{v.forEach((w,I)=>{l=l.insert(w,I)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,s))).next(l=>{o.forEach((d,_)=>{const v=_.getKey();l.get(v)===null&&(l=l.insert(v,Nt.newInvalidDocument(v)))});let h=ba();return l.forEach((d,_)=>{const v=o.get(d);v!==void 0&&Ya(v.mutation,_,Ln.empty(),ft.now()),Ph(n,_)&&(h=h.insert(d,_))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:$n(s.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:bk(s.bundledQuery),readTime:$n(s.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(){this.overlays=new Ke(se.comparator),this.Ir=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const i=qr();return Z.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,o)=>{this.ht(e,n,o)}),Z.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.Ir.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),Z.resolve()}getOverlaysForCollection(e,n,i){const s=qr(),o=n.length+1,l=new se(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,_=d.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return Z.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new Ke((_,v)=>_-v);const l=this.overlays.getIterator();for(;l.hasNext();){const _=l.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>i){let v=o.get(_.largestBatchId);v===null&&(v=qr(),o=o.insert(_.largestBatchId,v)),v.set(_.getKey(),_)}}const h=qr(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((_,v)=>h.set(_,v)),!(h.size()>=s)););return Z.resolve(h)}ht(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.Ir.get(s.largestBatchId).delete(i.key);this.Ir.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new dk(n,i));let o=this.Ir.get(n);o===void 0&&(o=Se(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(){this.sessionToken=Ct.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(){this.Tr=new St(gt.Er),this.dr=new St(gt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new gt(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new gt(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new se(new Je([])),i=new gt(n,e),s=new gt(n,e+1),o=[];return this.dr.forEachInRange([i,s],l=>{this.Vr(l),o.push(l.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new se(new Je([])),i=new gt(n,e),s=new gt(n,e+1);let o=Se();return this.dr.forEachInRange([i,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new gt(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class gt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return se.comparator(e.key,n.key)||xe(e.wr,n.wr)}static Ar(e,n){return xe(e.wr,n.wr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new St(gt.Er)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new hk(o,n,i,s);this.mutationQueue.push(l);for(const h of s)this.br=this.br.add(new gt(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Z.resolve(l)}lookupMutationBatch(e,n){return Z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.vr(i),o=s<0?0:s;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new gt(n,0),s=new gt(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,s],l=>{const h=this.Dr(l.wr);o.push(h)}),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new St(xe);return n.forEach(s=>{const o=new gt(s,0),l=new gt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],h=>{i=i.add(h.wr)})}),Z.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;se.isDocumentKey(o)||(o=o.child(""));const l=new gt(new se(o),0);let h=new St(xe);return this.br.forEachWhile(d=>{const _=d.key.path;return!!i.isPrefixOf(_)&&(_.length===s&&(h=h.add(d.wr)),!0)},l),Z.resolve(this.Cr(h))}Cr(e){const n=[];return e.forEach(i=>{const s=this.Dr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Me(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return Z.forEach(n.mutations,s=>{const o=new gt(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new gt(n,0),s=this.br.firstAfterOrEqual(i);return Z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e){this.Mr=e,this.docs=function(){return new Ke(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,l=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Z.resolve(i?i.document.mutableCopy():Nt.newInvalidDocument(n))}getEntries(e,n){let i=Ci();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Nt.newInvalidDocument(s))}),Z.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=Ci();const l=n.path,h=new se(l.child("")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:_,value:{document:v}}=d.getNext();if(!l.isPrefixOf(_.path))break;_.path.length>l.length+1||kC(CC(v),i)<=0||(s.has(v.key)||Ph(n,v))&&(o=o.insert(v.key,v.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,n,i,s){de()}Or(e,n){return Z.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new $k(this)}getSize(e){return Z.resolve(this.size)}}class $k extends Fk{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(i)}),Z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.persistence=e,this.Nr=new Vo(n=>Xp(n),Jp),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new rm,this.targetCount=0,this.kr=Co.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,s)=>n(s)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),Z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Co(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Kn(n),Z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.Nr.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),Z.waitFor(o).next(()=>s)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return Z.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),Z.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),Z.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return Z.resolve(i)}containsKey(e,n){return Z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Gp(0),this.Kr=!1,this.Kr=!0,this.$r=new Wk,this.referenceDelegate=e(this),this.Ur=new Gk(this),this.indexManager=new Vk,this.remoteDocumentCache=function(s){return new Zk(s)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new Dk(n),this.Gr=new jk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Hk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new qk(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){te("MemoryPersistence","Starting transaction:",e);const s=new Qk(this.Qr.next());return this.referenceDelegate.zr(),i(s).next(o=>this.referenceDelegate.jr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Hr(e,n){return Z.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class Qk extends xC{constructor(e){super(),this.currentSequenceNumber=e}}class sm{constructor(e){this.persistence=e,this.Jr=new rm,this.Yr=null}static Zr(e){return new sm(e)}get Xr(){if(this.Yr)return this.Yr;throw de()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),Z.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.Xr,i=>{const s=se.fromPath(i);return this.ei(e,s).next(o=>{o||n.removeEntry(s,pe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Z.or([()=>Z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=s}static Wi(e,n){let i=Se(),s=Se();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new om(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return XS()?8:LC(Dt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,s){const o={result:null};return this.Yi(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Zi(e,n,s,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new Yk;return this.Xi(e,n,l).next(h=>{if(o.result=h,this.zi)return this.es(e,n,l,h.size)})}).next(()=>o.result)}es(e,n,i,s){return i.documentReadCount<this.ji?(xa()<=Ae.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",js(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Z.resolve()):(xa()<=Ae.DEBUG&&te("QueryEngine","Query:",js(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.Hi*s?(xa()<=Ae.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",js(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zn(n))):Z.resolve())}Yi(e,n){if(Ng(n))return Z.resolve(null);let i=Zn(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Nf(n,null,"F"),i=Zn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=Se(...o);return this.Ji.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(d=>{const _=this.ts(n,h);return this.ns(n,_,l,d.readTime)?this.Yi(e,Nf(n,null,"F")):this.rs(e,_,n,d)}))})))}Zi(e,n,i,s){return Ng(n)||s.isEqual(pe.min())?Z.resolve(null):this.Ji.getDocuments(e,i).next(o=>{const l=this.ts(n,o);return this.ns(n,l,i,s)?Z.resolve(null):(xa()<=Ae.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),js(n)),this.rs(e,l,n,AC(s,-1)).next(h=>h))})}ts(e,n){let i=new St(E0(e));return n.forEach((s,o)=>{Ph(e,o)&&(i=i.add(o))}),i}ns(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Xi(e,n,i){return xa()<=Ae.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",js(n)),this.Ji.getDocumentsMatchingQuery(e,n,gr.min(),i)}rs(e,n,i,s){return this.Ji.getDocumentsMatchingQuery(e,i,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,n,i,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ke(xe),this._s=new Vo(o=>Xp(o),Jp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function eR(t,e,n,i){return new Jk(t,e,n,i)}async function H0(t,e){const n=me(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let d=Se();for(const _ of s){l.push(_.batchId);for(const v of _.mutations)d=d.add(v.key)}for(const _ of o){h.push(_.batchId);for(const v of _.mutations)d=d.add(v.key)}return n.localDocuments.getDocuments(i,d).next(_=>({hs:_,removedBatchIds:l,addedBatchIds:h}))})})}function tR(t,e){const n=me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(h,d,_,v){const w=_.batch,I=w.keys();let N=Z.resolve();return I.forEach(b=>{N=N.next(()=>v.getEntry(d,b)).next(z=>{const W=_.docVersions.get(b);Me(W!==null),z.version.compareTo(W)<0&&(w.applyToRemoteDocument(z,_),z.isValidDocument()&&(z.setReadTime(_.commitVersion),v.addEntry(z)))})}),N.next(()=>h.mutationQueue.removeMutationBatch(d,w))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Se();for(let _=0;_<h.mutationResults.length;++_)h.mutationResults[_].transformResults.length>0&&(d=d.add(h.batch.mutations[_].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function W0(t){const e=me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function nR(t,e){const n=me(t),i=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const h=[];e.targetChanges.forEach((v,w)=>{const I=s.get(w);if(!I)return;h.push(n.Ur.removeMatchingKeys(o,v.removedDocuments,w).next(()=>n.Ur.addMatchingKeys(o,v.addedDocuments,w)));let N=I.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(w)!==null?N=N.withResumeToken(Ct.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,i)),s=s.insert(w,N),function(z,W,x){return z.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(I,N,v)&&h.push(n.Ur.updateTargetData(o,N))});let d=Ci(),_=Se();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,v))}),h.push(iR(o,l,e.documentUpdates).next(v=>{d=v.Ps,_=v.Is})),!i.isEqual(pe.min())){const v=n.Ur.getLastRemoteSnapshotVersion(o).next(w=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(v)}return Z.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,_)).next(()=>d)}).then(o=>(n.os=s,o))}function iR(t,e,n){let i=Se(),s=Se();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=Ci();return n.forEach((h,d)=>{const _=o.get(h);d.isFoundDocument()!==_.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(pe.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!_.isValidDocument()||d.version.compareTo(_.version)>0||d.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):te("LocalStore","Ignoring outdated watch update for ",h,". Current version:",_.version," Watch version:",d.version)}),{Ps:l,Is:s}})}function rR(t,e){const n=me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function sR(t,e){const n=me(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Ur.getTargetData(i,e).next(o=>o?(s=o,Z.resolve(s)):n.Ur.allocateTargetId(i).next(l=>(s=new tr(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.os.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function zf(t,e,n){const i=me(t),s=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!bl(l))throw l;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.os=i.os.remove(e),i._s.delete(s.target)}function Wg(t,e,n){const i=me(t);let s=pe.min(),o=Se();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,_,v){const w=me(d),I=w._s.get(v);return I!==void 0?Z.resolve(w.os.get(I)):w.Ur.getTargetData(_,v)}(i,l,Zn(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>i.ss.getDocumentsMatchingQuery(l,e,n?s:pe.min(),n?o:Se())).next(h=>(oR(i,QC(e),h),{documents:h,Ts:o})))}function oR(t,e,n){let i=t.us.get(e)||pe.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}class qg{constructor(){this.activeTargetIds=nk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aR{constructor(){this.so=new qg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new qg,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zu=null;function Ed(){return Zu===null?Zu=function(){return 268435456+Math.round(2147483648*Math.random())}():Zu++,"0x"+Zu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt="WebChannelConnection";class hR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${s}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get Fo(){return!1}Mo(n,i,s,o,l){const h=Ed(),d=this.xo(n,i.toUriEncodedString());te("RestConnection",`Sending RPC '${n}' ${h}:`,d,s);const _={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(_,o,l),this.No(n,d,_,s).then(v=>(te("RestConnection",`Received RPC '${n}' ${h}: `,v),v),v=>{throw Io("RestConnection",`RPC '${n}' ${h} failed with error: `,v,"url: ",d,"request:",s),v})}Lo(n,i,s,o,l,h){return this.Mo(n,i,s,o,l)}Oo(n,i,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Do}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,l)=>n[l]=o),s&&s.headers.forEach((o,l)=>n[l]=o)}xo(n,i){const s=uR[n];return`${this.Do}/v1/${i}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,s){const o=Ed();return new Promise((l,h)=>{const d=new r0;d.setWithCredentials(!0),d.listenOnce(s0.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case oc.NO_ERROR:const v=d.getResponseJson();te(xt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(v)),l(v);break;case oc.TIMEOUT:te(xt,`RPC '${e}' ${o} timed out`),h(new re($.DEADLINE_EXCEEDED,"Request time out"));break;case oc.HTTP_ERROR:const w=d.getStatus();if(te(xt,`RPC '${e}' ${o} failed with status:`,w,"response text:",d.getResponseText()),w>0){let I=d.getResponseJson();Array.isArray(I)&&(I=I[0]);const N=I==null?void 0:I.error;if(N&&N.status&&N.message){const b=function(W){const x=W.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(x)>=0?x:$.UNKNOWN}(N.status);h(new re(b,N.message))}else h(new re($.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new re($.UNAVAILABLE,"Connection failed."));break;default:de()}}finally{te(xt,`RPC '${e}' ${o} completed.`)}});const _=JSON.stringify(s);te(xt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",_,i,15)})}Bo(e,n,i){const s=Ed(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=l0(),h=a0(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(d.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const v=o.join("");te(xt,`Creating RPC '${e}' stream ${s}: ${v}`,d);const w=l.createWebChannel(v,d);let I=!1,N=!1;const b=new cR({Io:W=>{N?te(xt,`Not sending because RPC '${e}' stream ${s} is closed:`,W):(I||(te(xt,`Opening RPC '${e}' stream ${s} transport.`),w.open(),I=!0),te(xt,`RPC '${e}' stream ${s} sending:`,W),w.send(W))},To:()=>w.close()}),z=(W,x,P)=>{W.listen(x,O=>{try{P(O)}catch(j){setTimeout(()=>{throw j},0)}})};return z(w,Da.EventType.OPEN,()=>{N||(te(xt,`RPC '${e}' stream ${s} transport opened.`),b.yo())}),z(w,Da.EventType.CLOSE,()=>{N||(N=!0,te(xt,`RPC '${e}' stream ${s} transport closed`),b.So())}),z(w,Da.EventType.ERROR,W=>{N||(N=!0,Io(xt,`RPC '${e}' stream ${s} transport errored:`,W),b.So(new re($.UNAVAILABLE,"The operation could not be completed")))}),z(w,Da.EventType.MESSAGE,W=>{var x;if(!N){const P=W.data[0];Me(!!P);const O=P,j=O.error||((x=O[0])===null||x===void 0?void 0:x.error);if(j){te(xt,`RPC '${e}' stream ${s} received error:`,j);const K=j.status;let Y=function(S){const k=ot[S];if(k!==void 0)return N0(k)}(K),A=j.message;Y===void 0&&(Y=$.INTERNAL,A="Unknown error status: "+K+" with message "+j.message),N=!0,b.So(new re(Y,A)),w.close()}else te(xt,`RPC '${e}' stream ${s} received:`,P),b.bo(P)}}),z(h,o0.STAT_EVENT,W=>{W.stat===kf.PROXY?te(xt,`RPC '${e}' stream ${s} detected buffering proxy`):W.stat===kf.NOPROXY&&te(xt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function Td(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(t){return new Ek(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e,n,i=1e3,s=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=s,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-i);s>0&&te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,n,i,s,o,l,h,d){this.ui=e,this.Ho=i,this.Jo=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new q0(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Ai(n.toString()),Ai("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Yo===n&&this.P_(i,s)},i=>{e(()=>{const s=new re($.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(s)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{i(()=>this.I_(s))}),this.stream.onMessage(s=>{i(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dR extends Z0{constructor(e,n,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Pk(this.serializer,e),i=function(o){if(!("targetChange"in o))return pe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?pe.min():l.readTime?$n(l.readTime):pe.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Vf(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=Of(d)?{documents:Ck(o,d)}:{query:kk(o,d)._t},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=b0(o,l.resumeToken);const _=Mf(o,l.expectedCount);_!==null&&(h.expectedCount=_)}else if(l.snapshotVersion.compareTo(pe.min())>0){h.readTime=Gc(o,l.snapshotVersion.toTimestamp());const _=Mf(o,l.expectedCount);_!==null&&(h.expectedCount=_)}return h}(this.serializer,e);const i=xk(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Vf(this.serializer),n.removeTarget=e,this.a_(n)}}class fR extends Z0{constructor(e,n,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Me(!!e.streamToken),this.lastStreamToken=e.streamToken,Me(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Ak(e.writeResults,e.commitTime),i=$n(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Vf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>Sk(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR extends class{}{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new re($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Mo(e,Df(n,i),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re($.UNKNOWN,o.toString())})}Lo(e,n,i,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Lo(e,Df(n,i),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new re($.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class mR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ai(n),this.D_=!1):te("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(l=>{i.enqueueAndForget(async()=>{us(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await async function(d){const _=me(d);_.L_.add(4),await Fl(_),_.q_.set("Unknown"),_.L_.delete(4),await Rh(_)}(this))})}),this.q_=new mR(i,s)}}async function Rh(t){if(us(t))for(const e of t.B_)await e(!0)}async function Fl(t){for(const e of t.B_)await e(!1)}function $0(t,e){const n=me(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),cm(n)?um(n):zo(n).r_()&&lm(n,e))}function am(t,e){const n=me(t),i=zo(n);n.N_.delete(e),i.r_()&&G0(n,e),n.N_.size===0&&(i.r_()?i.o_():us(n)&&n.q_.set("Unknown"))}function lm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zo(t).A_(e)}function G0(t,e){t.Q_.xe(e),zo(t).R_(e)}function um(t){t.Q_=new gk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),zo(t).start(),t.q_.v_()}function cm(t){return us(t)&&!zo(t).n_()&&t.N_.size>0}function us(t){return me(t).L_.size===0}function K0(t){t.Q_=void 0}async function gR(t){t.q_.set("Online")}async function vR(t){t.N_.forEach((e,n)=>{lm(t,e)})}async function yR(t,e){K0(t),cm(t)?(t.q_.M_(e),um(t)):t.q_.set("Unknown")}async function wR(t,e,n){if(t.q_.set("Online"),e instanceof D0&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.N_.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.N_.delete(h),s.Q_.removeTarget(h))}(t,e)}catch(i){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Kc(t,i)}else if(e instanceof uc?t.Q_.Ke(e):e instanceof M0?t.Q_.He(e):t.Q_.We(e),!n.isEqual(pe.min()))try{const i=await W0(t.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.Q_.rt(l);return h.targetChanges.forEach((d,_)=>{if(d.resumeToken.approximateByteSize()>0){const v=o.N_.get(_);v&&o.N_.set(_,v.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,_)=>{const v=o.N_.get(d);if(!v)return;o.N_.set(d,v.withResumeToken(Ct.EMPTY_BYTE_STRING,v.snapshotVersion)),G0(o,d);const w=new tr(v.target,d,_,v.sequenceNumber);lm(o,w)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){te("RemoteStore","Failed to raise snapshot:",i),await Kc(t,i)}}async function Kc(t,e,n){if(!bl(e))throw e;t.L_.add(1),await Fl(t),t.q_.set("Offline"),n||(n=()=>W0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Rh(t)})}function Q0(t,e){return e().catch(n=>Kc(t,n,e))}async function xh(t){const e=me(t),n=yr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ER(e);)try{const s=await rR(e.localStore,i);if(s===null){e.O_.length===0&&n.o_();break}i=s.batchId,TR(e,s)}catch(s){await Kc(e,s)}Y0(e)&&X0(e)}function ER(t){return us(t)&&t.O_.length<10}function TR(t,e){t.O_.push(e);const n=yr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Y0(t){return us(t)&&!yr(t).n_()&&t.O_.length>0}function X0(t){yr(t).start()}async function IR(t){yr(t).p_()}async function PR(t){const e=yr(t);for(const n of t.O_)e.m_(n.mutations)}async function SR(t,e,n){const i=t.O_.shift(),s=tm.from(i,e,n);await Q0(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await xh(t)}async function AR(t,e){e&&yr(t).V_&&await async function(i,s){if(function(l){return pk(l)&&l!==$.ABORTED}(s.code)){const o=i.O_.shift();yr(i).s_(),await Q0(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await xh(i)}}(t,e),Y0(t)&&X0(t)}async function $g(t,e){const n=me(t);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const i=us(n);n.L_.add(3),await Fl(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Rh(n)}async function CR(t,e){const n=me(t);e?(n.L_.delete(2),await Rh(n)):e||(n.L_.add(2),await Fl(n),n.q_.set("Unknown"))}function zo(t){return t.K_||(t.K_=function(n,i,s){const o=me(n);return o.w_(),new dR(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Eo:gR.bind(null,t),Ro:vR.bind(null,t),mo:yR.bind(null,t),d_:wR.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),cm(t)?um(t):t.q_.set("Unknown")):(await t.K_.stop(),K0(t))})),t.K_}function yr(t){return t.U_||(t.U_=function(n,i,s){const o=me(n);return o.w_(),new fR(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:IR.bind(null,t),mo:AR.bind(null,t),f_:PR.bind(null,t),g_:SR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await xh(t)):(await t.U_.stop(),t.O_.length>0&&(te("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,o){const l=Date.now()+i,h=new hm(e,n,l,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dm(t,e){if(Ai("AsyncQueue",`${e}: ${t}`),bl(t))return new re($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.comparator=e?(n,i)=>e(n,i)||se.comparator(n.key,i.key):(n,i)=>se.comparator(n.key,i.key),this.keyedMap=ba(),this.sortedSet=new Ke(this.comparator)}static emptySet(e){return new co(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new co;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(){this.W_=new Ke(se.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):de():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class ko{constructor(e,n,i,s,o,l,h,d,_){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=_}static fromInitialDocuments(e,n,i,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new ko(e,n,co.emptySet(n),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ih(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class RR{constructor(){this.queries=Kg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const s=me(n),o=s.queries;s.queries=Kg(),o.forEach((l,h)=>{for(const d of h.j_)d.onError(i)})})(this,new re($.ABORTED,"Firestore shutting down"))}}function Kg(){return new Vo(t=>w0(t),Ih)}async function J0(t,e){const n=me(t);let i=3;const s=e.query;let o=n.queries.get(s);o?!o.H_()&&e.J_()&&(i=2):(o=new kR,i=e.J_()?0:1);try{switch(i){case 0:o.z_=await n.onListen(s,!0);break;case 1:o.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=dm(l,`Initialization of query '${js(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&fm(n)}async function eE(t,e){const n=me(t),i=e.query;let s=3;const o=n.queries.get(i);if(o){const l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?s=e.J_()?0:1:!o.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function xR(t,e){const n=me(t);let i=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.j_)h.X_(s)&&(i=!0);l.z_=s}}i&&fm(n)}function LR(t,e,n){const i=me(t),s=i.queries.get(e);if(s)for(const o of s.j_)o.onError(n);i.queries.delete(e)}function fm(t){t.Y_.forEach(e=>{e.next()})}var Ff,Qg;(Qg=Ff||(Ff={})).ea="default",Qg.Cache="cache";class tE{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new ko(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ff.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e){this.key=e}}class iE{constructor(e){this.key=e}}class OR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Se(),this.mutatedKeys=Se(),this.Aa=E0(e),this.Ra=new co(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new Gg,s=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,_=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((v,w)=>{const I=s.get(v),N=Ph(this.query,w)?w:null,b=!!I&&this.mutatedKeys.has(I.key),z=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let W=!1;I&&N?I.data.isEqual(N.data)?b!==z&&(i.track({type:3,doc:N}),W=!0):this.ga(I,N)||(i.track({type:2,doc:N}),W=!0,(d&&this.Aa(N,d)>0||_&&this.Aa(N,_)<0)&&(h=!0)):!I&&N?(i.track({type:0,doc:N}),W=!0):I&&!N&&(i.track({type:1,doc:I}),W=!0,(d||_)&&(h=!0)),W&&(N?(l=l.add(N),o=z?o.add(v):o.delete(v)):(l=l.delete(v),o=o.delete(v)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),o=o.delete(v.key),i.track({type:1,doc:v})}return{Ra:l,fa:i,ns:h,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort((v,w)=>function(N,b){const z=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de()}};return z(N)-z(b)}(v.type,w.type)||this.Aa(v.doc,w.doc)),this.pa(i),s=s!=null&&s;const h=n&&!s?this.ya():[],d=this.da.size===0&&this.current&&!s?1:0,_=d!==this.Ea;return this.Ea=d,l.length!==0||_?{snapshot:new ko(this.query,e.Ra,o,l,e.mutatedKeys,d===0,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Gg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Se(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new iE(i))}),this.da.forEach(i=>{e.has(i)||n.push(new nE(i))}),n}ba(e){this.Ta=e.Ts,this.da=Se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ko.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class NR{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class MR{constructor(e){this.key=e,this.va=!1}}class DR{constructor(e,n,i,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new Vo(h=>w0(h),Ih),this.Ma=new Map,this.xa=new Set,this.Oa=new Ke(se.comparator),this.Na=new Map,this.La=new rm,this.Ba={},this.ka=new Map,this.qa=Co.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function bR(t,e,n=!0){const i=uE(t);let s;const o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Da()):s=await rE(i,e,n,!0),s}async function VR(t,e){const n=uE(t);await rE(n,e,!0,!1)}async function rE(t,e,n,i){const s=await sR(t.localStore,Zn(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await zR(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&$0(t.remoteStore,s),h}async function zR(t,e,n,i,s){t.Ka=(w,I,N)=>async function(z,W,x,P){let O=W.view.ma(x);O.ns&&(O=await Wg(z.localStore,W.query,!1).then(({documents:A})=>W.view.ma(A,O)));const j=P&&P.targetChanges.get(W.targetId),K=P&&P.targetMismatches.get(W.targetId)!=null,Y=W.view.applyChanges(O,z.isPrimaryClient,j,K);return Xg(z,W.targetId,Y.wa),Y.snapshot}(t,w,I,N);const o=await Wg(t.localStore,e,!0),l=new OR(e,o.Ts),h=l.ma(o.documents),d=zl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),_=l.applyChanges(h,t.isPrimaryClient,d);Xg(t,n,_.wa);const v=new NR(e,n,l);return t.Fa.set(e,v),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),_.snapshot}async function FR(t,e,n){const i=me(t),s=i.Fa.get(e),o=i.Ma.get(s.targetId);if(o.length>1)return i.Ma.set(s.targetId,o.filter(l=>!Ih(l,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await zf(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&am(i.remoteStore,s.targetId),Uf(i,s.targetId)}).catch(Dl)):(Uf(i,s.targetId),await zf(i.localStore,s.targetId,!0))}async function UR(t,e){const n=me(t),i=n.Fa.get(e),s=n.Ma.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),am(n.remoteStore,i.targetId))}async function BR(t,e,n){const i=GR(t);try{const s=await function(l,h){const d=me(l),_=ft.now(),v=h.reduce((N,b)=>N.add(b.key),Se());let w,I;return d.persistence.runTransaction("Locally write mutations","readwrite",N=>{let b=Ci(),z=Se();return d.cs.getEntries(N,v).next(W=>{b=W,b.forEach((x,P)=>{P.isValidDocument()||(z=z.add(x))})}).next(()=>d.localDocuments.getOverlayedDocuments(N,b)).next(W=>{w=W;const x=[];for(const P of h){const O=uk(P,w.get(P.key).overlayedDocument);O!=null&&x.push(new ls(P.key,O,f0(O.value.mapValue),wi.exists(!0)))}return d.mutationQueue.addMutationBatch(N,_,x,h)}).next(W=>{I=W;const x=W.applyToLocalDocumentSet(w,z);return d.documentOverlayCache.saveOverlays(N,W.batchId,x)})}).then(()=>({batchId:I.batchId,changes:I0(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(l,h,d){let _=l.Ba[l.currentUser.toKey()];_||(_=new Ke(xe)),_=_.insert(h,d),l.Ba[l.currentUser.toKey()]=_}(i,s.batchId,n),await Ul(i,s.changes),await xh(i.remoteStore)}catch(s){const o=dm(s,"Failed to persist write");n.reject(o)}}async function sE(t,e){const n=me(t);try{const i=await nR(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Na.get(o);l&&(Me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.va=!0:s.modifiedDocuments.size>0?Me(l.va):s.removedDocuments.size>0&&(Me(l.va),l.va=!1))}),await Ul(n,i,e)}catch(i){await Dl(i)}}function Yg(t,e,n){const i=me(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Fa.forEach((o,l)=>{const h=l.view.Z_(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const d=me(l);d.onlineState=h;let _=!1;d.queries.forEach((v,w)=>{for(const I of w.j_)I.Z_(h)&&(_=!0)}),_&&fm(d)}(i.eventManager,e),s.length&&i.Ca.d_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function jR(t,e,n){const i=me(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Na.get(e),o=s&&s.key;if(o){let l=new Ke(se.comparator);l=l.insert(o,Nt.newNoDocument(o,pe.min()));const h=Se().add(o),d=new Ch(pe.min(),new Map,new Ke(xe),l,h);await sE(i,d),i.Oa=i.Oa.remove(o),i.Na.delete(e),pm(i)}else await zf(i.localStore,e,!1).then(()=>Uf(i,e,n)).catch(Dl)}async function HR(t,e){const n=me(t),i=e.batch.batchId;try{const s=await tR(n.localStore,e);aE(n,i,null),oE(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ul(n,s)}catch(s){await Dl(s)}}async function WR(t,e,n){const i=me(t);try{const s=await function(l,h){const d=me(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let v;return d.mutationQueue.lookupMutationBatch(_,h).next(w=>(Me(w!==null),v=w.keys(),d.mutationQueue.removeMutationBatch(_,w))).next(()=>d.mutationQueue.performConsistencyCheck(_)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(_,v,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,v)).next(()=>d.localDocuments.getDocuments(_,v))})}(i.localStore,e);aE(i,e,n),oE(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ul(i,s)}catch(s){await Dl(s)}}function oE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function aE(t,e,n){const i=me(t);let s=i.Ba[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),i.Ba[i.currentUser.toKey()]=s}}function Uf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||lE(t,i)})}function lE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(am(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),pm(t))}function Xg(t,e,n){for(const i of n)i instanceof nE?(t.La.addReference(i.key,e),qR(t,i)):i instanceof iE?(te("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||lE(t,i.key)):de()}function qR(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(te("SyncEngine","New document in limbo: "+n),t.xa.add(i),pm(t))}function pm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new se(Je.fromString(e)),i=t.qa.next();t.Na.set(i,new MR(n)),t.Oa=t.Oa.insert(n,i),$0(t.remoteStore,new tr(Zn(Th(n.path)),i,"TargetPurposeLimboResolution",Gp.oe))}}async function Ul(t,e,n){const i=me(t),s=[],o=[],l=[];i.Fa.isEmpty()||(i.Fa.forEach((h,d)=>{l.push(i.Ka(d,e,n).then(_=>{var v;if((_||n)&&i.isPrimaryClient){const w=_?!_.fromCache:(v=n==null?void 0:n.targetChanges.get(d.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(d.targetId,w?"current":"not-current")}if(_){s.push(_);const w=om.Wi(d.targetId,_);o.push(w)}}))}),await Promise.all(l),i.Ca.d_(s),await async function(d,_){const v=me(d);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>Z.forEach(_,I=>Z.forEach(I.$i,N=>v.persistence.referenceDelegate.addReference(w,I.targetId,N)).next(()=>Z.forEach(I.Ui,N=>v.persistence.referenceDelegate.removeReference(w,I.targetId,N)))))}catch(w){if(!bl(w))throw w;te("LocalStore","Failed to update sequence numbers: "+w)}for(const w of _){const I=w.targetId;if(!w.fromCache){const N=v.os.get(I),b=N.snapshotVersion,z=N.withLastLimboFreeSnapshotVersion(b);v.os=v.os.insert(I,z)}}}(i.localStore,o))}async function ZR(t,e){const n=me(t);if(!n.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const i=await H0(n.localStore,e);n.currentUser=e,function(o,l){o.ka.forEach(h=>{h.forEach(d=>{d.reject(new re($.CANCELLED,l))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ul(n,i.hs)}}function $R(t,e){const n=me(t),i=n.Na.get(e);if(i&&i.va)return Se().add(i.key);{let s=Se();const o=n.Ma.get(e);if(!o)return s;for(const l of o){const h=n.Fa.get(l);s=s.unionWith(h.view.Va)}return s}}function uE(t){const e=me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$R.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jR.bind(null,e),e.Ca.d_=xR.bind(null,e.eventManager),e.Ca.$a=LR.bind(null,e.eventManager),e}function GR(t){const e=me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WR.bind(null,e),e}class Qc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return eR(this.persistence,new Xk,e.initialUser,this.serializer)}Ga(e){return new Kk(sm.Zr,this.serializer)}Wa(e){return new aR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qc.provider={build:()=>new Qc};class Bf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Yg(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZR.bind(null,this.syncEngine),await CR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new RR}()}createDatastore(e){const n=kh(e.databaseInfo.databaseId),i=function(o){return new hR(o)}(e.databaseInfo);return function(o,l,h,d){return new pR(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,o,l,h){return new _R(i,s,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>Yg(this.syncEngine,n,0),function(){return Zg.D()?new Zg:new lR}())}createSyncEngine(e,n){return function(s,o,l,h,d,_,v){const w=new DR(s,o,l,h,d,_);return v&&(w.Qa=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=me(s);te("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await Fl(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Bf.provider={build:()=>new Bf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ai("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,n,i,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Lt.UNAUTHENTICATED,this.clientId=c0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{te("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(te("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=dm(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Id(t,e){t.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await H0(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Jg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await QR(t);te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>$g(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>$g(e.remoteStore,s)),t._onlineComponents=e}async function QR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{await Id(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Io("Error using user provided cache. Falling back to memory cache: "+n),await Id(t,new Qc)}}else te("FirestoreClient","Using default OfflineComponentProvider"),await Id(t,new Qc);return t._offlineComponents}async function hE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),await Jg(t,t._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),await Jg(t,new Bf))),t._onlineComponents}function YR(t){return hE(t).then(e=>e.syncEngine)}async function jf(t){const e=await hE(t),n=e.eventManager;return n.onListen=bR.bind(null,e.syncEngine),n.onUnlisten=FR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=VR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=UR.bind(null,e.syncEngine),n}function XR(t,e,n={}){const i=new fr;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,_){const v=new cE({next:I=>{v.Za(),l.enqueueAndForget(()=>eE(o,w));const N=I.docs.has(h);!N&&I.fromCache?_.reject(new re($.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&I.fromCache&&d&&d.source==="server"?_.reject(new re($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(I)},error:I=>_.reject(I)}),w=new tE(Th(h.path),v,{includeMetadataChanges:!0,_a:!0});return J0(o,w)}(await jf(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(t,e,n){if(!n)throw new re($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function e1(t,e,n,i){if(e===!0&&i===!0)throw new re($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tv(t){if(!se.isDocumentKey(t))throw new re($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":de()}function pr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mm(t);throw new re($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new re($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new re($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}e1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _m{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nv(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new gC;switch(i.type){case"firstParty":return new EC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new re($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=ev.get(n);i&&(te("ComponentProvider","Removing Datastore"),ev.delete(n),i.terminate())}(this),Promise.resolve()}}function t1(t,e,n,i={}){var s;const o=(t=pr(t,_m))._getSettings(),l=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&Io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),i.mockUserToken){let h,d;if(typeof i.mockUserToken=="string")h=i.mockUserToken,d=Lt.MOCK_USER;else{h=qS(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new re($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Lt(_)}t._authCredentials=new vC(new u0(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Lh(this.firestore,e,this._query)}}class nn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Il(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}}class Il extends Lh{constructor(e,n,i){super(e,n,Th(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new se(e))}withConverter(e){return new Il(this.firestore,e,this._path)}}function iv(t,e,...n){if(t=Dn(t),arguments.length===1&&(e=c0.newId()),JR("doc","path",e),t instanceof _m){const i=Je.fromString(e,...n);return tv(i),new nn(t,null,new se(i))}{if(!(t instanceof nn||t instanceof Il))throw new re($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Je.fromString(e,...n));return tv(i),new nn(t.firestore,t instanceof Il?t.converter:null,new se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new q0(this,"async_queue_retry"),this.Vu=()=>{const i=Td();i&&te("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Td();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Td();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new fr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!bl(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const s=function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),h}(i);throw Ai("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=hm.createAndSchedule(this,e,n,i,o=>this.yu(o));return this.Tu.push(s),s}fu(){this.Eu&&de()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function sv(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Pl extends _m{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new rv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rv(e),this._firestoreClient=void 0,await e}}}function n1(t,e){const n=typeof t=="object"?t:e0(),i=typeof t=="string"?t:"(default)",s=Zp(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=HS("firestore");o&&t1(s,...o)}return s}function gm(t){if(t._terminated)throw new re($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||i1(t),t._firestoreClient}function i1(t){var e,n,i;const s=t._freezeSettings(),o=function(h,d,_,v){return new MC(h,d,_,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,dE(v.experimentalLongPollingOptions),v.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new KR(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ro(Ct.fromBase64String(e))}catch(n){throw new re($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ro(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=/^__.*__$/;class s1{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ls(e,this.data,this.fieldMask,n,this.fieldTransforms):new Vl(e,this.data,n,this.fieldTransforms)}}function pE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de()}}class Em{constructor(e,n,i,s,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Em(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:i,xu:!1});return s.Ou(e),s}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:i,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Yc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(pE(this.Cu)&&r1.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class o1{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||kh(e)}Qu(e,n,i,s=!1){return new Em({Cu:e,methodName:n,qu:i,path:It.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function a1(t){const e=t._freezeSettings(),n=kh(t._databaseId);return new o1(t._databaseId,!!e.ignoreUndefinedProperties,n)}function l1(t,e,n,i,s,o={}){const l=t.Qu(o.merge||o.mergeFields?2:0,e,n,s);vE("Data must be an object, but it was:",l,i);const h=_E(i,l);let d,_;if(o.merge)d=new Ln(l.fieldMask),_=l.fieldTransforms;else if(o.mergeFields){const v=[];for(const w of o.mergeFields){const I=u1(e,w,n);if(!l.contains(I))throw new re($.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);h1(v,I)||v.push(I)}d=new Ln(v),_=l.fieldTransforms.filter(w=>d.covers(w.field))}else d=null,_=l.fieldTransforms;return new s1(new gn(h),d,_)}function mE(t,e){if(gE(t=Dn(t)))return vE("Unsupported field value:",e,t),_E(t,e);if(t instanceof fE)return function(i,s){if(!pE(s.Cu))throw s.Bu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,s){const o=[];let l=0;for(const h of i){let d=mE(h,s.Lu(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,s){if((i=Dn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ik(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=ft.fromDate(i);return{timestampValue:Gc(s.serializer,o)}}if(i instanceof ft){const o=new ft(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Gc(s.serializer,o)}}if(i instanceof ym)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ro)return{bytesValue:b0(s.serializer,i._byteString)};if(i instanceof nn){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:im(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof wm)return function(l,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw h.Bu("VectorValues must only contain numeric values.");return em(h.serializer,d)})}}}}}}(i,s);throw s.Bu(`Unsupported field value: ${mm(i)}`)}(t,e)}function _E(t,e){const n={};return h0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bo(t,(i,s)=>{const o=mE(s,e.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function gE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ft||t instanceof ym||t instanceof Ro||t instanceof nn||t instanceof fE||t instanceof wm)}function vE(t,e,n){if(!gE(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const i=mm(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function u1(t,e,n){if((e=Dn(e))instanceof vm)return e._internalPath;if(typeof e=="string")return yE(t,e);throw Yc("Field path arguments must be of type string or ",t,!1,void 0,n)}const c1=new RegExp("[~\\*/\\[\\]]");function yE(t,e,n){if(e.search(c1)>=0)throw Yc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vm(...e.split("."))._internalPath}catch{throw Yc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Yc(t,e,n,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new re($.INVALID_ARGUMENT,h+t+d)}function h1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new d1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(EE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class d1 extends wE{data(){return super.data()}}function EE(t,e){return typeof e=="string"?yE(t,e):e instanceof vm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class p1{convertValue(e,n="none"){switch(rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(is(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw de()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return bo(e,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,s;const o=(s=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(l=>tt(l.doubleValue));return new wm(o)}convertGeoPoint(e){return new ym(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Qp(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(vl(e));default:return null}}convertTimestamp(e){const n=vr(e);return new ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Je.fromString(e);Me(j0(i));const s=new yl(i.get(1),i.get(3)),o=new se(i.popFirst(5));return s.isEqual(n)||Ai(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class TE extends wE{constructor(e,n,i,s,o,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(EE("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class cc extends TE{data(e={}){return super.data(e)}}class _1{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new za(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new cc(this._firestore,this._userDataWriter,i.key,i,new za(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{const d=new cc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new za(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new cc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new za(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let _=-1,v=-1;return h.type!==0&&(_=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),v=l.indexOf(h.doc.key)),{type:g1(h.type),doc:d,oldIndex:_,newIndex:v}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function g1(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(t){t=pr(t,nn);const e=pr(t.firestore,Pl);return XR(gm(e),t._key).then(n=>PE(e,t,n))}class IE extends p1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ro(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,n)}}function y1(t,e,n){t=pr(t,nn);const i=pr(t.firestore,Pl),s=m1(t.converter,e);return E1(i,[l1(a1(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,wi.none())])}function w1(t,...e){var n,i,s;t=Dn(t);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||sv(e[l])||(o=e[l],l++);const h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(sv(e[l])){const w=e[l];e[l]=(n=w.next)===null||n===void 0?void 0:n.bind(w),e[l+1]=(i=w.error)===null||i===void 0?void 0:i.bind(w),e[l+2]=(s=w.complete)===null||s===void 0?void 0:s.bind(w)}let d,_,v;if(t instanceof nn)_=pr(t.firestore,Pl),v=Th(t._key.path),d={next:w=>{e[l]&&e[l](PE(_,t,w))},error:e[l+1],complete:e[l+2]};else{const w=pr(t,Lh);_=pr(w.firestore,Pl),v=w._query;const I=new IE(_);d={next:N=>{e[l]&&e[l](new _1(_,I,w,N))},error:e[l+1],complete:e[l+2]},f1(t._query)}return function(I,N,b,z){const W=new cE(z),x=new tE(N,W,b);return I.asyncQueue.enqueueAndForget(async()=>J0(await jf(I),x)),()=>{W.Za(),I.asyncQueue.enqueueAndForget(async()=>eE(await jf(I),x))}}(gm(_),v,h,d)}function E1(t,e){return function(i,s){const o=new fr;return i.asyncQueue.enqueueAndForget(async()=>BR(await YR(i),s,o)),o.promise}(gm(t),e)}function PE(t,e,n){const i=n.docs.get(e._key),s=new IE(t);return new TE(t,s,e._key,i,new za(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Do=s})(Mo),To(new ts("firestore",(i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new Pl(new yC(i.getProvider("auth-internal")),new IC(i.getProvider("app-check-internal")),function(_,v){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new re($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yl(_.options.projectId,v)}(l,s),l);return o=Object.assign({useFetchStreams:n},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),dr(Ig,"4.7.3",e),dr(Ig,"4.7.3","esm2017")})();function Tm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function SE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const T1=SE,AE=new Nl("auth","Firebase",SE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc=new Wp("@firebase/auth");function I1(t,...e){Xc.logLevel<=Ae.WARN&&Xc.warn(`Auth (${Mo}): ${t}`,...e)}function hc(t,...e){Xc.logLevel<=Ae.ERROR&&Xc.error(`Auth (${Mo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(t,...e){throw Im(t,...e)}function Gn(t,...e){return Im(t,...e)}function CE(t,e,n){const i=Object.assign(Object.assign({},T1()),{[e]:n});return new Nl("auth","Firebase",i).create(e,{appName:t.name})}function Kr(t){return CE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Im(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return AE.create(t,...e)}function he(t,e,...n){if(!t)throw Im(e,...n)}function _i(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hc(e),new Error(e)}function Ri(t,e){t||_i(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function P1(){return ov()==="http:"||ov()==="https:"}function ov(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(P1()||KS()||"connection"in navigator)?navigator.onLine:!0}function A1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ri(n>e,"Short delay should be less than long delay!"),this.isMobile=ZS()||QS()}get(){return S1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(t,e){Ri(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=new Bl(3e4,6e4);function Sm(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Fo(t,e,n,i,s={}){return RE(t,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=Ml(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const _=Object.assign({method:e,headers:d},o);return GS()||(_.referrerPolicy="no-referrer"),kE.fetch()(xE(t,t.config.apiHost,n,h),_)})}async function RE(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},C1),e);try{const s=new x1(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw $u(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,_]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw $u(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw $u(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw $u(t,"user-disabled",l);const v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw CE(t,v,_);ki(t,v)}}catch(s){if(s instanceof Li)throw s;ki(t,"network-request-failed",{message:String(s)})}}async function R1(t,e,n,i,s={}){const o=await Fo(t,e,n,i,s);return"mfaPendingCredential"in o&&ki(t,"multi-factor-auth-required",{_serverResponse:o}),o}function xE(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?Pm(t.config,s):`${t.config.apiScheme}://${s}`}class x1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Gn(this.auth,"network-request-failed")),k1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $u(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Gn(t,e,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L1(t,e){return Fo(t,"POST","/v1/accounts:delete",e)}async function LE(t,e){return Fo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function O1(t,e=!1){const n=Dn(t),i=await n.getIdToken(e),s=Am(i);he(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:Xa(Pd(s.auth_time)),issuedAtTime:Xa(Pd(s.iat)),expirationTime:Xa(Pd(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Pd(t){return Number(t)*1e3}function Am(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return hc("JWT malformed, contained fewer than 3 sections"),null;try{const s=$w(n);return s?JSON.parse(s):(hc("Failed to decode base64 JWT payload"),null)}catch(s){return hc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function av(t){const e=Am(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Li&&N1(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function N1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xa(this.lastLoginAt),this.creationTime=Xa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jc(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Sl(t,LE(n,{idToken:i}));he(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?OE(o.providerUserInfo):[],h=b1(t.providerData,l),d=t.isAnonymous,_=!(t.email&&o.passwordHash)&&!(h!=null&&h.length),v=d?_:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Wf(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(t,w)}async function D1(t){const e=Dn(t);await Jc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function b1(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function OE(t){return t.map(e=>{var{providerId:n}=e,i=Tm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V1(t,e){const n=await RE(t,{},async()=>{const i=Ml({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=xE(t,s,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",kE.fetch()(l,{method:"POST",headers:h,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function z1(t,e){return Fo(t,"POST","/v2/accounts:revokeToken",Sm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):av(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=av(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await V1(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,l=new ho;return i&&(he(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(he(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(he(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ho,this.toJSON())}_performRefresh(){return _i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class gi{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,o=Tm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new M1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Wf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Sl(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return O1(this,e)}reload(){return D1(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Jc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(er(this.auth.app))return Promise.reject(Kr(this.auth));const e=await this.getIdToken();return await Sl(this,L1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,o,l,h,d,_,v;const w=(i=n.displayName)!==null&&i!==void 0?i:void 0,I=(s=n.email)!==null&&s!==void 0?s:void 0,N=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,b=(l=n.photoURL)!==null&&l!==void 0?l:void 0,z=(h=n.tenantId)!==null&&h!==void 0?h:void 0,W=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,x=(_=n.createdAt)!==null&&_!==void 0?_:void 0,P=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:O,emailVerified:j,isAnonymous:K,providerData:Y,stsTokenManager:A}=n;he(O&&A,e,"internal-error");const T=ho.fromJSON(this.name,A);he(typeof O=="string",e,"internal-error"),Wi(w,e.name),Wi(I,e.name),he(typeof j=="boolean",e,"internal-error"),he(typeof K=="boolean",e,"internal-error"),Wi(N,e.name),Wi(b,e.name),Wi(z,e.name),Wi(W,e.name),Wi(x,e.name),Wi(P,e.name);const S=new gi({uid:O,auth:e,email:I,emailVerified:j,displayName:w,isAnonymous:K,photoURL:b,phoneNumber:N,tenantId:z,stsTokenManager:T,createdAt:x,lastLoginAt:P});return Y&&Array.isArray(Y)&&(S.providerData=Y.map(k=>Object.assign({},k))),W&&(S._redirectEventId=W),S}static async _fromIdTokenResponse(e,n,i=!1){const s=new ho;s.updateFromServerResponse(n);const o=new gi({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Jc(o),o}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];he(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?OE(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new ho;h.updateFromIdToken(i);const d=new gi({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Wf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,_),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv=new Map;function vi(t){Ri(t instanceof Function,"Expected a class definition");let e=lv.get(t);return e?(Ri(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,lv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}NE.type="NONE";const uv=NE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t,e,n){return`firebase:${t}:${e}:${n}`}class fo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=dc(this.userKey,s.apiKey,o),this.fullPersistenceKey=dc("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?gi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new fo(vi(uv),e,i);const s=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let o=s[0]||vi(uv);const l=dc(i,e.config.apiKey,e.name);let h=null;for(const _ of n)try{const v=await _._get(l);if(v){const w=gi._fromJSON(e,v);_!==o&&(h=w),o=_;break}}catch{}const d=s.filter(_=>_._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new fo(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async _=>{if(_!==o)try{await _._remove(l)}catch{}})),new fo(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ME(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FE(e))return"Blackberry";if(UE(e))return"Webos";if(DE(e))return"Safari";if((e.includes("chrome/")||bE(e))&&!e.includes("edge/"))return"Chrome";if(zE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function ME(t=Dt()){return/firefox\//i.test(t)}function DE(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bE(t=Dt()){return/crios\//i.test(t)}function VE(t=Dt()){return/iemobile/i.test(t)}function zE(t=Dt()){return/android/i.test(t)}function FE(t=Dt()){return/blackberry/i.test(t)}function UE(t=Dt()){return/webos/i.test(t)}function Cm(t=Dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function F1(t=Dt()){var e;return Cm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function U1(){return YS()&&document.documentMode===10}function BE(t=Dt()){return Cm(t)||zE(t)||UE(t)||FE(t)||/windows phone/i.test(t)||VE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(t,e=[]){let n;switch(t){case"Browser":n=cv(Dt());break;case"Worker":n=`${cv(Dt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j1(t,e={}){return Fo(t,"GET","/v2/passwordPolicy",Sm(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=6;class W1{constructor(e){var n,i,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:H1,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,o,l,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hv(this),this.idTokenSubscription=new hv(this),this.beforeStateQueue=new B1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vi(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await fo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await LE(this,{idToken:e}),i=await gi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(er(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Jc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=A1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(er(this.app))return Promise.reject(Kr(this));const n=e?Dn(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return er(this.app)?Promise.reject(Kr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return er(this.app)?Promise.reject(Kr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await j1(this),n=new W1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Nl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await z1(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vi(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await fo.create(this,[vi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&I1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function km(t){return Dn(t)}class hv{constructor(e){this.auth=e,this.observer=null,this.addObserver=sA(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Z1(t){Rm=t}function $1(t){return Rm.loadJS(t)}function G1(){return Rm.gapiScript}function K1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t,e){const n=Zp(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Bc(o,e??{}))return s;ki(s,"already-initialized")}return n.initialize({options:e})}function Y1(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(vi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function X1(t,e,n){const i=km(t);he(i._canInitEmulator,i,"emulator-config-failed"),he(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=HE(e),{host:l,port:h}=J1(e),d=h===null?"":`:${h}`;i.config.emulator={url:`${o}//${l}${d}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),ex()}function HE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function J1(t){const e=HE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:dv(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:dv(l)}}}function dv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ex(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _i("not implemented")}_getIdTokenResponse(e){return _i("not implemented")}_linkToIdToken(e,n){return _i("not implemented")}_getReauthenticationResolver(e){return _i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function po(t,e){return R1(t,"POST","/v1/accounts:signInWithIdp",Sm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="http://localhost";class ss extends WE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ss(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ki("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,o=Tm(n,["providerId","signInMethod"]);if(!i||!s)return null;const l=new ss(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return po(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,po(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,po(e,n)}buildRequest(){const e={requestUri:tx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ml(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl extends qE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends jl{constructor(){super("facebook.com")}static credential(e){return ss._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ki.credential(e.oauthAccessToken)}catch{return null}}}Ki.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ki.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends jl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ss._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return fi.credential(n,i)}catch{return null}}}fi.GOOGLE_SIGN_IN_METHOD="google.com";fi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends jl{constructor(){super("github.com")}static credential(e){return ss._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qi.credential(e.oauthAccessToken)}catch{return null}}}Qi.GITHUB_SIGN_IN_METHOD="github.com";Qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends jl{constructor(){super("twitter.com")}static credential(e,n){return ss._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Yi.credential(n,i)}catch{return null}}}Yi.TWITTER_SIGN_IN_METHOD="twitter.com";Yi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await gi._fromIdTokenResponse(e,i,s),l=fv(i);return new xo({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=fv(i);return new xo({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function fv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh extends Li{constructor(e,n,i,s){var o;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,eh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new eh(e,n,i,s)}}function ZE(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?eh._fromErrorAndOperation(t,o,e,i):o})}async function nx(t,e,n=!1){const i=await Sl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return xo._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ix(t,e,n=!1){const{auth:i}=t;if(er(i.app))return Promise.reject(Kr(i));const s="reauthenticate";try{const o=await Sl(t,ZE(i,s,e,t),n);he(o.idToken,i,"internal-error");const l=Am(o.idToken);he(l,i,"internal-error");const{sub:h}=l;return he(t.uid===h,i,"user-mismatch"),xo._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&ki(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rx(t,e,n=!1){if(er(t.app))return Promise.reject(Kr(t));const i="signIn",s=await ZE(t,i,e),o=await xo._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(o.user),o}function sx(t,e,n,i){return Dn(t).onIdTokenChanged(e,n,i)}function ox(t,e,n){return Dn(t).beforeAuthStateChanged(e,n)}const th="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(th,"1"),this.storage.removeItem(th),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=1e3,lx=10;class GE extends $E{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);U1()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,lx):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},ax)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}GE.type="LOCAL";const ux=GE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE extends $E{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}KE.type="SESSION";const QE=KE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Oh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(l).map(async _=>_(n.origin,o)),d=await cx(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const _=xm("",20);s.port1.start();const v=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(w){const I=w;if(I.data.eventId===_)switch(I.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(I.data.response);break;default:clearTimeout(v),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:_,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(){return window}function dx(t){Kn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(){return typeof Kn().WorkerGlobalScope<"u"&&typeof Kn().importScripts=="function"}async function fx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function px(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function mx(){return YE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="firebaseLocalStorageDb",_x=1,nh="firebaseLocalStorage",JE="fbase_key";class Hl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nh(t,e){return t.transaction([nh],e?"readwrite":"readonly").objectStore(nh)}function gx(){const t=indexedDB.deleteDatabase(XE);return new Hl(t).toPromise()}function qf(){const t=indexedDB.open(XE,_x);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(nh,{keyPath:JE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(nh)?e(i):(i.close(),await gx(),e(await qf()))})})}async function pv(t,e,n){const i=Nh(t,!0).put({[JE]:e,value:n});return new Hl(i).toPromise()}async function vx(t,e){const n=Nh(t,!1).get(e),i=await new Hl(n).toPromise();return i===void 0?null:i.value}function mv(t,e){const n=Nh(t,!0).delete(e);return new Hl(n).toPromise()}const yx=800,wx=3;class eT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>wx)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return YE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oh._getInstance(mx()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await fx(),!this.activeServiceWorker)return;this.sender=new hx(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||px()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qf();return await pv(e,th,"1"),await mv(e,th),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>pv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>vx(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>mv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Nh(s,!1).getAll();return new Hl(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eT.type="LOCAL";const Ex=eT;new Bl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t,e){return e?vi(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm extends WE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return po(e,this._buildIdpRequest())}_linkToIdToken(e,n){return po(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return po(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Ix(t){return rx(t.auth,new Lm(t),t.bypassAuthState)}function Px(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),ix(n,new Lm(t),t.bypassAuthState)}async function Sx(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),nx(n,new Lm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ix;case"linkViaPopup":case"linkViaRedirect":return Sx;case"reauthViaPopup":case"reauthViaRedirect":return Px;default:ki(this.auth,"internal-error")}}resolve(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=new Bl(2e3,1e4);class io extends tT{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,io.currentPopupAction&&io.currentPopupAction.cancel(),io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){Ri(this.filter.length===1,"Popup operations only handle one event");const e=xm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,io.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ax.get())};e()}}io.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="pendingRedirect",fc=new Map;class kx extends tT{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=fc.get(this.auth._key());if(!e){try{const i=await Rx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}fc.set(this.auth._key(),e)}return this.bypassAuthState||fc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Rx(t,e){const n=Ox(e),i=Lx(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function xx(t,e){fc.set(t._key(),e)}function Lx(t){return vi(t._redirectPersistence)}function Ox(t){return dc(Cx,t.config.apiKey,t.name)}async function Nx(t,e,n=!1){if(er(t.app))return Promise.reject(Kr(t));const i=km(t),s=Tx(i,e),l=await new kx(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=10*60*1e3;class Dx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bx(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!nT(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Gn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Mx&&this.cachedEventUids.clear(),this.cachedEventUids.has(_v(e))}saveEventToCache(e){this.cachedEventUids.add(_v(e)),this.lastProcessedEventTime=Date.now()}}function _v(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bx(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vx(t,e={}){return Fo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fx=/^https?/;async function Ux(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Vx(t);for(const n of e)try{if(Bx(n))return}catch{}ki(t,"unauthorized-domain")}function Bx(t){const e=Hf(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!Fx.test(n))return!1;if(zx.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=new Bl(3e4,6e4);function gv(){const t=Kn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Hx(t){return new Promise((e,n)=>{var i,s,o;function l(){gv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gv(),n(Gn(t,"network-request-failed"))},timeout:jx.get()})}if(!((s=(i=Kn().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Kn().gapi)===null||o===void 0)&&o.load)l();else{const h=K1("iframefcb");return Kn()[h]=()=>{gapi.load?l():n(Gn(t,"network-request-failed"))},$1(`${G1()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw pc=null,e})}let pc=null;function Wx(t){return pc=pc||Hx(t),pc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=new Bl(5e3,15e3),Zx="__/auth/iframe",$x="emulator/auth/iframe",Gx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Kx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qx(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Pm(e,$x):`https://${t.config.authDomain}/${Zx}`,i={apiKey:e.apiKey,appName:t.name,v:Mo},s=Kx.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Ml(i).slice(1)}`}async function Yx(t){const e=await Wx(t),n=Kn().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:Qx(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gx,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=Gn(t,"network-request-failed"),h=Kn().setTimeout(()=>{o(l)},qx.get());function d(){Kn().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Jx=500,eL=600,tL="_blank",nL="http://localhost";class vv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iL(t,e,n,i=Jx,s=eL){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},Xx),{width:i.toString(),height:s.toString(),top:o,left:l}),_=Dt().toLowerCase();n&&(h=bE(_)?tL:n),ME(_)&&(e=e||nL,d.scrollbars="yes");const v=Object.entries(d).reduce((I,[N,b])=>`${I}${N}=${b},`,"");if(F1(_)&&h!=="_self")return rL(e||"",h),new vv(null);const w=window.open(e||"",h,v);he(w,t,"popup-blocked");try{w.focus()}catch{}return new vv(w)}function rL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL="__/auth/handler",oL="emulator/auth/handler",aL=encodeURIComponent("fac");async function yv(t,e,n,i,s,o){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Mo,eventId:s};if(e instanceof qE){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",rA(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))l[v]=w}if(e instanceof jl){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(l.scopes=v.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const d=await t._getAppCheckToken(),_=d?`#${aL}=${encodeURIComponent(d)}`:"";return`${lL(t)}?${Ml(h).slice(1)}${_}`}function lL({config:t}){return t.emulator?Pm(t,oL):`https://${t.authDomain}/${sL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd="webStorageSupport";class uL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QE,this._completeRedirectFn=Nx,this._overrideRedirectResult=xx}async _openPopup(e,n,i,s){var o;Ri((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await yv(e,n,i,Hf(),s);return iL(e,l,xm())}async _openRedirect(e,n,i,s){await this._originValidation(e);const o=await yv(e,n,i,Hf(),s);return dx(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Ri(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Yx(e),i=new Dx(e);return n.register("authEvent",s=>(he(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sd,{type:Sd},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[Sd];l!==void 0&&n(!!l),ki(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ux(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return BE()||DE()||Cm()}}const cL=uL;var wv="@firebase/auth",Ev="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fL(t){To(new ts("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;he(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jE(t)},_=new q1(i,s,o,d);return Y1(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),To(new ts("auth-internal",e=>{const n=km(e.getProvider("auth").getImmediate());return(i=>new hL(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),dr(wv,Ev,dL(t)),dr(wv,Ev,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=5*60,mL=Qw("authIdTokenMaxAge")||pL;let Tv=null;const _L=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>mL)return;const s=n==null?void 0:n.token;Tv!==s&&(Tv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function gL(t=e0()){const e=Zp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Q1(t,{popupRedirectResolver:cL,persistence:[Ex,ux,QE]}),i=Qw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=_L(o.toString());ox(n,l,()=>l(n.currentUser)),sx(n,h=>l(h))}}const s=Gw("auth");return s&&X1(n,`http://${s}`),n}function vL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Z1({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=Gn("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",vL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fL("Browser");const yL={apiKey:"AIzaSyDidt5FhT9i7ZAcTnBG1sEEnBKg-CSJ2mE",authDomain:"tracking-app-71665.firebaseapp.com",projectId:"tracking-app-71665",storageBucket:"tracking-app-71665.firebasestorage.app",messagingSenderId:"859645642622",appId:"1:859645642622:web:15b800e66cb44feb61d52f",measurementId:"G-H96M3NQ99E"},iT=Jw(yL),Iv=n1(iT);gL(iT);new fi;function wL(){const[t,e]=we.useState(""),[n,i]=we.useState(null),[s,o]=we.useState(!1),[l,h]=we.useState(""),d=async v=>{if(v.preventDefault(),!t)return;o(!0),h(""),i(null);const w=iv(Iv,"orders",t.trim());if(!(await v1(w)).exists()){o(!1),h("Order ID not found. Try creating a test order first.");return}w1(w,N=>{if(N.exists()){const b=N.data(),z=W=>{const x=["Order Received","Picked Up","In Transit","Delivered"],P=x.indexOf(W);return x.map((O,j)=>({title:O,time:j<=P?"Completed":"Pending",completed:j<=P,current:j===P}))};i({id:N.id,status:b.status,eta:b.eta,progress:b.progress,location:{lat:b.lat,lng:b.lng},proofPhoto:b.proofPhoto||null,steps:z(b.status)})}o(!1)})},_=async()=>{o(!0);try{await y1(iv(Iv,"orders","ORD-999"),{status:"Picked Up",eta:"18:00 PM Today",progress:30,lat:13.7563,lng:100.5018,steps:[{title:"Order Received",time:"10:00 AM",completed:!0},{title:"Picked Up",time:"11:30 AM",completed:!0,current:!0},{title:"In Transit",time:"Pending",completed:!1},{title:"Delivered",time:"Pending",completed:!1}]}),alert(" Created ORD-999 in Firebase!"),e("ORD-999")}catch(v){console.error(v),alert("Error creating data: "+v.message)}o(!1)};return ie.jsxs("div",{className:"container",children:[ie.jsxs("header",{className:"animate-enter",style:{marginBottom:"40px",marginTop:"20px"},children:[ie.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[ie.jsx("div",{style:{background:"var(--primary)",padding:"8px",borderRadius:"12px"},children:ie.jsx(oS,{color:"white",size:24})}),ie.jsx("h1",{style:{margin:0,fontSize:"24px"},children:"ProTrack"})]}),ie.jsx("p",{style:{color:"var(--text-muted)",margin:0},children:"Premium Logistics Partner"})]}),ie.jsxs("div",{className:"glass-panel animate-enter",style:{padding:"24px",marginBottom:"24px",animationDelay:"0.1s"},children:[ie.jsx("h2",{style:{fontSize:"18px",marginTop:0},children:"Track your Package"}),ie.jsxs("form",{onSubmit:d,style:{display:"flex",gap:"12px",flexDirection:"column"},children:[ie.jsxs("div",{style:{position:"relative"},children:[ie.jsx(aS,{size:20,style:{position:"absolute",left:"12px",top:"14px",color:"var(--text-muted)"}}),ie.jsx("input",{type:"text",className:"input-field",placeholder:"Enter Order ID (e.g. ORD-999)",style:{paddingLeft:"44px"},value:t,onChange:v=>e(v.target.value)})]}),ie.jsx("button",{type:"submit",className:"btn-primary",disabled:s,children:s?"Searching...":"Track Package"}),ie.jsx("button",{type:"button",onClick:_,style:{background:"transparent",border:"1px dashed #555",color:"#888",padding:"8px",borderRadius:"8px",cursor:"pointer",fontSize:"12px"},children:'+ Create Test Order "ORD-999" (Dev Only)'})]}),l&&ie.jsx("p",{style:{color:"#ef4444",marginTop:"12px",textAlign:"center"},children:l})]}),n&&ie.jsxs("div",{className:"animate-enter",style:{animationDelay:"0.2s"},children:[n.location&&ie.jsx("div",{className:"glass-panel",style:{padding:"0",marginBottom:"16px",overflow:"hidden"},children:ie.jsx(DS,{center:n.location})}),ie.jsxs("div",{className:"glass-panel",style:{padding:"24px",marginBottom:"16px",backgroundImage:"var(--accent-gradient)"},children:[ie.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"20px"},children:[ie.jsxs("div",{children:[ie.jsx("p",{style:{margin:0,opacity:.8,fontSize:"14px"},children:"Status"}),ie.jsx("h2",{style:{margin:"4px 0 0",fontSize:"24px"},children:n.status})]}),ie.jsx("div",{style:{background:"rgba(255,255,255,0.2)",padding:"8px",borderRadius:"50%"},children:ie.jsx(lS,{color:"white",size:24})})]}),ie.jsx("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"99px",height:"6px",overflow:"hidden"},children:ie.jsx("div",{style:{width:`${n.progress}%`,background:"white",height:"100%"}})}),ie.jsxs("p",{style:{marginTop:"12px",marginBottom:0,fontSize:"14px",opacity:.9},children:["Arriving by ",(()=>{if(!n.eta)return"-";const v=new Date(n.eta);return isNaN(v)?n.eta:v.toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"})})()]})]}),ie.jsxs("div",{className:"glass-panel",style:{padding:"24px"},children:[ie.jsx("h3",{style:{marginTop:0,marginBottom:"20px"},children:"Timeline"}),ie.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:n.steps.map((v,w)=>ie.jsxs("div",{style:{display:"flex",gap:"16px",position:"relative"},children:[w!==n.steps.length-1&&ie.jsx("div",{style:{position:"absolute",left:"11px",top:"24px",bottom:"-24px",width:"2px",background:v.completed?"var(--primary)":"rgba(255,255,255,0.1)"}}),ie.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:v.completed?"var(--primary)":"rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},children:v.completed?ie.jsx(ug,{size:14,color:"white"}):ie.jsx(sS,{size:14,color:"gray"})}),ie.jsxs("div",{children:[ie.jsx("h4",{style:{margin:"0 0 4px",color:v.completed?"white":"var(--text-muted)"},children:v.title}),ie.jsx("p",{style:{margin:0,fontSize:"12px",color:v.completed?"var(--text-muted)":"#555"},children:v.time})]})]},w))})]}),n.proofPhoto&&ie.jsxs("div",{className:"glass-panel",style:{padding:"24px",marginTop:"16px",borderLeft:"4px solid #10b981"},children:[ie.jsxs("h3",{style:{marginTop:0,marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[ie.jsx(ug,{color:"#10b981",size:20}),"Proof of Delivery"]}),ie.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"12px",borderRadius:"8px"},children:[ie.jsx("p",{style:{margin:"0 0 8px",fontSize:"14px",opacity:.8},children:"Image Reference Code:"}),ie.jsx("code",{style:{display:"block",background:"rgba(0,0,0,0.3)",padding:"8px",borderRadius:"4px",fontSize:"12px",wordBreak:"break-all"},children:n.proofPhoto}),ie.jsx("p",{style:{margin:"8px 0 0",fontSize:"12px",color:"#10b981"},children:"(Image secured in Admin Database)"})]})]})]})]})}Ad.createRoot(document.getElementById("root")).render(ie.jsx(mc.StrictMode,{children:ie.jsx(wL,{})}));
